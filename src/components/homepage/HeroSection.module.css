/* src/components/homepage/HeroSection.module.css */

@property --shine-progress {
  syntax: '<number>';
  inherits: false;
  initial-value: -0.2;
}

/* === Shared CTA timing so both buttons sync perfectly === */
.ctaGroup {
  position: relative;
  isolation: isolate;
  --track-duration: 4.6s;
  --shine-progress: -0.2;
  animation: heroCtaTrack var(--track-duration) ease-in-out infinite;
}

.ctaGroup::after {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 0;
}

.ctaGroup :global(.cta-btn) {
  position: relative;
  z-index: 1;
}

/* ---------------- Base: Browse Listings ---------------- */
.ctaInner {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.55rem;
  width: 100%;
  line-height: 1.2;
}

.ctaLabel {
  display: inline-flex;
  align-items: center;
}

.browseListingsIcon {
  width: 1rem;
  height: 1rem;
  transition: transform 300ms ease;
  flex-shrink: 0;
}
.browseListingsBtn:hover .browseListingsIcon,
.browseListingsBtn:focus-visible .browseListingsIcon {
  transform: translateX(-2px);
}

.browseListingsBtn,
.startSellingBtn {
  --pp-accent: #ff950e;
  --pp-bg: #0b0b0b;
  --pp-text: #ffffff;
  --pp-radius: 14px;
  --pp-border-w: 2px;
  --pp-padding-y: 0.8rem;
  --pp-padding-x: 1.2rem;
  --pp-shadow: 0 4px 18px rgba(255, 149, 14, 0.15);
  --track-start: 0;
  --track-length: 0.5;
  --normalized-length: max(var(--track-length, 0.5), 0.001);
  --local-progress-raw: calc(
    (var(--shine-progress, -0.2) - var(--track-start, 0)) /
      var(--normalized-length)
  );

  --local-progress: clamp(0, var(--local-progress-raw), 1);

  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;

  padding: var(--pp-padding-y) var(--pp-padding-x);
  border-radius: var(--pp-radius);
  color: var(--pp-text);
  background: var(--pp-bg);
  border: var(--pp-border-w) solid var(--pp-accent);
  cursor: pointer;
  font-weight: 600;
  line-height: 1.2;
  transform: translateZ(0);
  box-shadow: var(--pp-shadow);
  transition: transform 120ms ease, box-shadow 200ms ease, filter 200ms ease;
  overflow: hidden;
  min-height: 3rem;
}

.browseListingsBtn {
  background: var(--pp-bg);
}

.browseListingsBtn:focus { outline: none; }
.browseListingsBtn:focus-visible {
  filter: drop-shadow(0 0 10px rgba(255, 149, 14, 0.65));
}

/* Sheen overlay â€” OFF left -> cross -> OFF right */
.browseListingsBtn::after,
.startSellingBtn::after {
  content: "";
  position: absolute;
  top: -35%;
  bottom: -35%;
  left: -60%;
  width: 60%;
  border-radius: 999px;
  pointer-events: none;

  background: linear-gradient(90deg,
    rgba(255,255,255,0) 0%,
    rgba(255,255,255,0.12) 45%,
    rgba(255,255,255,0.32) 50%,
    rgba(255,255,255,0.12) 55%,
    rgba(255,255,255,0) 100%
  );

  transform: translateX(
      calc((var(--local-progress-raw) * 260%) - 130%)
    )
    skewX(-18deg);
  filter: blur(0.5px);
  mix-blend-mode: screen;
  will-change: transform;

  opacity: calc(clamp(0, var(--local-progress-raw), 1) * 0.95);
}

.browseListingsBtn:hover {
  box-shadow:
    0 6px 22px rgba(255, 149, 14, 0.22),
    0 0 0 1px rgba(255, 149, 14, 0.25);
}
.browseListingsBtn:active { transform: scale(0.98); }

/* ---------------- Base: Start Selling ---------------- */
.startSellingIcon {
  width: 1rem;
  height: 1rem;
  transition: transform 300ms ease;
  flex-shrink: 0;
}
.startSellingBtn:hover .startSellingIcon,
.startSellingBtn:focus-visible .startSellingIcon {
  transform: translateX(-2px);
}

.startSellingBtn:focus { outline: none; }
.startSellingBtn:focus-visible {
  filter: drop-shadow(0 0 10px rgba(255, 149, 14, 0.65));
}


.startSellingBtn {
  background: var(--pp-bg);
}

.startSellingBtn:hover {
  box-shadow:
    0 6px 22px rgba(255, 149, 14, 0.22),
    0 0 0 1px rgba(255, 149, 14, 0.25);
}
.startSellingBtn:active { transform: scale(0.98); }

/* ---------------- Animations ---------------- */
@keyframes heroCtaTrack {
  0% {
    --shine-progress: -0.25;
  }
  68% {
    --shine-progress: 1.25;
  }
  100% {
    --shine-progress: 1.25;
  }
}

/* ---------------- Reduced Motion ---------------- */
@media (prefers-reduced-motion: reduce) {
  .ctaGroup {
    animation: none;
  }
  .browseListingsBtn::after,
  .startSellingBtn::after {
    opacity: 0;
  }
}
