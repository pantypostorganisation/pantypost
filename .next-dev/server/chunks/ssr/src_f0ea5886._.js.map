{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/gerom/OneDrive/Documents/pantypost/src/components/RequireAuth.tsx"],"sourcesContent":["// src/components/RequireAuth.tsx\r\n'use client';\r\n\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useEffect, useState } from 'react';\r\nimport { z } from 'zod';\r\n\r\nconst VALID_ROLES = ['buyer', 'seller', 'admin'] as const;\r\ntype ValidRole = (typeof VALID_ROLES)[number];\r\n\r\nconst RoleSchema = z.enum(VALID_ROLES);\r\n\r\nexport default function RequireAuth({\r\n  role,\r\n  children,\r\n}: {\r\n  role: ValidRole;\r\n  children: React.ReactNode;\r\n}) {\r\n  const { user, isAuthReady } = useAuth();\r\n  const router = useRouter();\r\n  const [authorized, setAuthorized] = useState(false);\r\n  const [hasChecked, setHasChecked] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!isAuthReady || hasChecked) return;\r\n\r\n    // Runtime validation of `role` prop (dev-only noise)\r\n    const parsed = RoleSchema.safeParse(role);\r\n    if (!parsed.success) {\r\n      if (process.env.NODE_ENV === 'development') {\r\n        console.warn('[RequireAuth] Invalid role prop supplied:', role);\r\n      }\r\n      router.push('/login');\r\n      setHasChecked(true);\r\n      return;\r\n    }\r\n\r\n    const userRole = user?.role as ValidRole | undefined;\r\n\r\n    // NEW: strict role matching — no admin override for buyer/seller routes\r\n    let hasAccess = false;\r\n    if (parsed.data === 'admin') {\r\n      hasAccess = userRole === 'admin';\r\n    } else {\r\n      hasAccess = userRole === parsed.data; // admin can’t view buyer/seller pages\r\n    }\r\n\r\n    if (!user || !hasAccess) {\r\n      router.push('/login');\r\n    } else {\r\n      setAuthorized(true);\r\n    }\r\n\r\n    setHasChecked(true);\r\n  }, [isAuthReady, user, role, router, hasChecked]);\r\n\r\n  if (!isAuthReady || !hasChecked) {\r\n    return (\r\n      <div className=\"min-h-screen bg-black flex items-center justify-center\" role=\"status\" aria-label=\"Checking access\">\r\n        <div className=\"flex items-center space-x-2\">\r\n          <div className=\"w-4 h-4 bg-[#ff950e] rounded-full animate-pulse\" />\r\n          <div className=\"w-4 h-4 bg-[#ff950e] rounded-full animate-pulse\" style={{ animationDelay: '0.2s' }} />\r\n          <div className=\"w-4 h-4 bg-[#ff950e] rounded-full animate-pulse\" style={{ animationDelay: '0.4s' }} />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!authorized) return null;\r\n\r\n  return <>{children}</>;\r\n}\r\n"],"names":[],"mappings":"AAAA,iCAAiC;;;;;AAGjC;AACA;AACA;AACA;AALA;;;;;;AAOA,MAAM,cAAc;IAAC;IAAS;IAAU;CAAQ;AAGhD,MAAM,aAAa,kKAAA,CAAA,IAAC,CAAC,IAAI,CAAC;AAEX,SAAS,YAAY,EAClC,IAAI,EACJ,QAAQ,EAIT;IACC,MAAM,EAAE,IAAI,EAAE,WAAW,EAAE,GAAG,CAAA,GAAA,8HAAA,CAAA,UAAO,AAAD;IACpC,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC7C,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAE7C,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,CAAC,eAAe,YAAY;QAEhC,qDAAqD;QACrD,MAAM,SAAS,WAAW,SAAS,CAAC;QACpC,IAAI,CAAC,OAAO,OAAO,EAAE;YACnB,wCAA4C;gBAC1C,QAAQ,IAAI,CAAC,6CAA6C;YAC5D;YACA,OAAO,IAAI,CAAC;YACZ,cAAc;YACd;QACF;QAEA,MAAM,WAAW,MAAM;QAEvB,wEAAwE;QACxE,IAAI,YAAY;QAChB,IAAI,OAAO,IAAI,KAAK,SAAS;YAC3B,YAAY,aAAa;QAC3B,OAAO;YACL,YAAY,aAAa,OAAO,IAAI,EAAE,sCAAsC;QAC9E;QAEA,IAAI,CAAC,QAAQ,CAAC,WAAW;YACvB,OAAO,IAAI,CAAC;QACd,OAAO;YACL,cAAc;QAChB;QAEA,cAAc;IAChB,GAAG;QAAC;QAAa;QAAM;QAAM;QAAQ;KAAW;IAEhD,IAAI,CAAC,eAAe,CAAC,YAAY;QAC/B,qBACE,8OAAC;YAAI,WAAU;YAAyD,MAAK;YAAS,cAAW;sBAC/F,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAI,WAAU;wBAAkD,OAAO;4BAAE,gBAAgB;wBAAO;;;;;;kCACjG,8OAAC;wBAAI,WAAU;wBAAkD,OAAO;4BAAE,gBAAgB;wBAAO;;;;;;;;;;;;;;;;;IAIzG;IAEA,IAAI,CAAC,YAAY,OAAO;IAExB,qBAAO;kBAAG;;AACZ","debugId":null}},
    {"offset": {"line": 120, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/gerom/OneDrive/Documents/pantypost/src/components/admin/resolved/ResolvedHeader.tsx"],"sourcesContent":["// src/components/admin/resolved/ResolvedHeader.tsx\r\n'use client';\r\n\r\nimport { Archive, RefreshCw, Download, Upload, ArrowLeft } from 'lucide-react';\r\nimport { useRouter } from 'next/navigation';\r\nimport type { ResolvedHeaderProps } from '@/types/resolved';\r\n\r\nexport default function ResolvedHeader({\r\n  lastRefresh,\r\n  onRefresh,\r\n  onExport,\r\n  onImport\r\n}: ResolvedHeaderProps) {\r\n  const router = useRouter();\r\n\r\n  return (\r\n    <>\r\n      <div className=\"flex justify-between items-center mb-8\">\r\n        <div className=\"flex items-center gap-4\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => router.push('/admin/reports')}\r\n            className=\"p-2 hover:bg-[#1a1a1a] rounded-lg transition\"\r\n            aria-label=\"Back to active reports\"\r\n            title=\"Back\"\r\n          >\r\n            <ArrowLeft size={20} className=\"text-gray-400\" />\r\n          </button>\r\n          <h1 className=\"text-3xl font-bold text-white flex items-center gap-3\">\r\n            <Archive className=\"text-[#ff950e]\" />\r\n            Resolved Reports\r\n          </h1>\r\n        </div>\r\n        <div className=\"flex items-center gap-3\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={onRefresh}\r\n            className=\"px-4 py-2 bg-[#1a1a1a] border border-gray-700 rounded-lg text-white hover:bg-[#222] transition flex items-center gap-2\"\r\n            aria-label=\"Refresh\"\r\n            title=\"Refresh\"\r\n          >\r\n            <RefreshCw size={16} />\r\n            Refresh\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            onClick={onExport}\r\n            className=\"px-4 py-2 bg-[#1a1a1a] border border-gray-700 rounded-lg text-white hover:bg-[#222] transition flex items-center gap-2\"\r\n            aria-label=\"Export resolved reports\"\r\n            title=\"Export JSON\"\r\n          >\r\n            <Download size={16} />\r\n            Export\r\n          </button>\r\n          <label\r\n            className=\"px-4 py-2 bg-[#1a1a1a] border border-gray-700 rounded-lg text-white hover:bg-[#222] transition flex items-center gap-2 cursor-pointer\"\r\n            title=\"Import JSON\"\r\n          >\r\n            <Upload size={16} />\r\n            Import\r\n            <input\r\n              type=\"file\"\r\n              accept=\".json,application/json\"\r\n              onChange={onImport}\r\n              className=\"hidden\"\r\n              aria-label=\"Import resolved reports JSON\"\r\n            />\r\n          </label>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"text-sm text-gray-400 mb-6\">\r\n        Last refreshed: {lastRefresh.toLocaleString()}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,mDAAmD;;;;;AAGnD;AAAA;AAAA;AAAA;AAAA;AACA;AAHA;;;;AAMe,SAAS,eAAe,EACrC,WAAW,EACX,SAAS,EACT,QAAQ,EACR,QAAQ,EACY;IACpB,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAEvB,qBACE;;0BACE,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCACC,MAAK;gCACL,SAAS,IAAM,OAAO,IAAI,CAAC;gCAC3B,WAAU;gCACV,cAAW;gCACX,OAAM;0CAEN,cAAA,8OAAC,gNAAA,CAAA,YAAS;oCAAC,MAAM;oCAAI,WAAU;;;;;;;;;;;0CAEjC,8OAAC;gCAAG,WAAU;;kDACZ,8OAAC,wMAAA,CAAA,UAAO;wCAAC,WAAU;;;;;;oCAAmB;;;;;;;;;;;;;kCAI1C,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCACC,MAAK;gCACL,SAAS;gCACT,WAAU;gCACV,cAAW;gCACX,OAAM;;kDAEN,8OAAC,gNAAA,CAAA,YAAS;wCAAC,MAAM;;;;;;oCAAM;;;;;;;0CAGzB,8OAAC;gCACC,MAAK;gCACL,SAAS;gCACT,WAAU;gCACV,cAAW;gCACX,OAAM;;kDAEN,8OAAC,0MAAA,CAAA,WAAQ;wCAAC,MAAM;;;;;;oCAAM;;;;;;;0CAGxB,8OAAC;gCACC,WAAU;gCACV,OAAM;;kDAEN,8OAAC,sMAAA,CAAA,SAAM;wCAAC,MAAM;;;;;;oCAAM;kDAEpB,8OAAC;wCACC,MAAK;wCACL,QAAO;wCACP,UAAU;wCACV,WAAU;wCACV,cAAW;;;;;;;;;;;;;;;;;;;;;;;;0BAMnB,8OAAC;gBAAI,WAAU;;oBAA6B;oBACzB,YAAY,cAAc;;;;;;;;;AAInD","debugId":null}},
    {"offset": {"line": 291, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/gerom/OneDrive/Documents/pantypost/src/components/admin/resolved/ResolvedStats.tsx"],"sourcesContent":["// src/components/admin/resolved/ResolvedStats.tsx\r\n'use client';\r\n\r\nimport { FileText, Ban, CheckCircle, Clock, Calendar } from 'lucide-react';\r\nimport type { ResolvedStatsProps } from '@/types/resolved';\r\n\r\nexport default function ResolvedStats({ stats }: ResolvedStatsProps) {\r\n  const safeNumber = (value: any): number => {\r\n    const num = Number(value);\r\n    return Number.isFinite(num) && num >= 0 ? num : 0;\r\n  };\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-2 md:grid-cols-5 gap-4 mb-8\">\r\n      <div className=\"bg-[#1a1a1a] border border-gray-800 rounded-lg p-4 text-center hover:border-gray-700 transition-colors\">\r\n        <FileText className=\"mx-auto mb-2 text-gray-400\" size={20} />\r\n        <div className=\"text-2xl font-bold text-white\">{safeNumber(stats?.total)}</div>\r\n        <div className=\"text-xs text-gray-400\">Total Resolved</div>\r\n      </div>\r\n      <div className=\"bg-[#1a1a1a] border border-gray-800 rounded-lg p-4 text-center hover:border-gray-700 transition-colors\">\r\n        <Ban className=\"mx-auto mb-2 text-red-400\" size={20} />\r\n        <div className=\"text-2xl font-bold text-red-400\">{safeNumber(stats?.withBans)}</div>\r\n        <div className=\"text-xs text-gray-400\">With Bans</div>\r\n      </div>\r\n      <div className=\"bg-[#1a1a1a] border border-gray-800 rounded-lg p-4 text-center hover:border-gray-700 transition-colors\">\r\n        <CheckCircle className=\"mx-auto mb-2 text-green-400\" size={20} />\r\n        <div className=\"text-2xl font-bold text-green-400\">{safeNumber(stats?.withoutBans)}</div>\r\n        <div className=\"text-xs text-gray-400\">No Bans</div>\r\n      </div>\r\n      <div className=\"bg-[#1a1a1a] border border-gray-800 rounded-lg p-4 text-center hover:border-gray-700 transition-colors\">\r\n        <Clock className=\"mx-auto mb-2 text-blue-400\" size={20} />\r\n        <div className=\"text-2xl font-bold text-blue-400\">{safeNumber(stats?.today)}</div>\r\n        <div className=\"text-xs text-gray-400\">Today</div>\r\n      </div>\r\n      <div className=\"bg-[#1a1a1a] border border-gray-800 rounded-lg p-4 text-center hover:border-gray-700 transition-colors\">\r\n        <Calendar className=\"mx-auto mb-2 text-purple-400\" size={20} />\r\n        <div className=\"text-2xl font-bold text-purple-400\">{safeNumber(stats?.thisWeek)}</div>\r\n        <div className=\"text-xs text-gray-400\">This Week</div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,kDAAkD;;;;;AAGlD;AAAA;AAAA;AAAA;AAAA;AAFA;;;AAKe,SAAS,cAAc,EAAE,KAAK,EAAsB;IACjE,MAAM,aAAa,CAAC;QAClB,MAAM,MAAM,OAAO;QACnB,OAAO,OAAO,QAAQ,CAAC,QAAQ,OAAO,IAAI,MAAM;IAClD;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,8MAAA,CAAA,WAAQ;wBAAC,WAAU;wBAA6B,MAAM;;;;;;kCACvD,8OAAC;wBAAI,WAAU;kCAAiC,WAAW,OAAO;;;;;;kCAClE,8OAAC;wBAAI,WAAU;kCAAwB;;;;;;;;;;;;0BAEzC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,gMAAA,CAAA,MAAG;wBAAC,WAAU;wBAA4B,MAAM;;;;;;kCACjD,8OAAC;wBAAI,WAAU;kCAAmC,WAAW,OAAO;;;;;;kCACpE,8OAAC;wBAAI,WAAU;kCAAwB;;;;;;;;;;;;0BAEzC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,2NAAA,CAAA,cAAW;wBAAC,WAAU;wBAA8B,MAAM;;;;;;kCAC3D,8OAAC;wBAAI,WAAU;kCAAqC,WAAW,OAAO;;;;;;kCACtE,8OAAC;wBAAI,WAAU;kCAAwB;;;;;;;;;;;;0BAEzC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,oMAAA,CAAA,QAAK;wBAAC,WAAU;wBAA6B,MAAM;;;;;;kCACpD,8OAAC;wBAAI,WAAU;kCAAoC,WAAW,OAAO;;;;;;kCACrE,8OAAC;wBAAI,WAAU;kCAAwB;;;;;;;;;;;;0BAEzC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,0MAAA,CAAA,WAAQ;wBAAC,WAAU;wBAA+B,MAAM;;;;;;kCACzD,8OAAC;wBAAI,WAAU;kCAAsC,WAAW,OAAO;;;;;;kCACvE,8OAAC;wBAAI,WAAU;kCAAwB;;;;;;;;;;;;;;;;;;AAI/C","debugId":null}},
    {"offset": {"line": 488, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/gerom/OneDrive/Documents/pantypost/src/components/admin/resolved/ResolvedFilters.tsx"],"sourcesContent":["// src/components/admin/resolved/ResolvedFilters.tsx\r\n'use client';\r\n\r\nimport { Search, ChevronUp, ChevronDown } from 'lucide-react';\r\nimport { SecureInput } from '@/components/ui/SecureInput';\r\nimport { sanitizeSearchQuery } from '@/utils/security/sanitization';\r\nimport type { ResolvedFiltersProps } from '@/types/resolved';\r\n\r\nexport default function ResolvedFilters({\r\n  filters,\r\n  onFiltersChange\r\n}: ResolvedFiltersProps) {\r\n  const handleSearchChange = (value: string) => {\r\n    onFiltersChange({ searchTerm: sanitizeSearchQuery(value) });\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-[#1a1a1a] border border-gray-800 rounded-lg p-4 mb-6\">\r\n      <div className=\"flex flex-col lg:flex-row gap-4\">\r\n        {/* Search */}\r\n        <div className=\"relative flex-1\">\r\n          <Search className=\"absolute left-3 top-3 text-gray-400 z-10\" size={16} />\r\n          <SecureInput\r\n            type=\"text\"\r\n            placeholder=\"Search by username or notes...\"\r\n            value={filters.searchTerm}\r\n            onChange={handleSearchChange}\r\n            className=\"w-full pl-10 pr-4 py-2 bg-[#222] border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-[#ff950e] transition-all\"\r\n            maxLength={100}\r\n            sanitize={true}\r\n            sanitizer={sanitizeSearchQuery}\r\n            aria-label=\"Search resolved reports\"\r\n          />\r\n        </div>\r\n\r\n        {/* Filter Type */}\r\n        <select\r\n          value={filters.filterBy}\r\n          onChange={(e) => onFiltersChange({ filterBy: e.target.value as any })}\r\n          className=\"px-3 py-2 bg-[#222] border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-[#ff950e]\"\r\n          aria-label=\"Filter resolved reports\"\r\n        >\r\n          <option value=\"all\">All Reports</option>\r\n          <option value=\"banned\">With Bans</option>\r\n          <option value=\"nobanned\">No Bans</option>\r\n        </select>\r\n\r\n        {/* Sort Controls */}\r\n        <div className=\"flex gap-2\">\r\n          <select\r\n            value={filters.sortBy}\r\n            onChange={(e) => onFiltersChange({ sortBy: e.target.value as any })}\r\n            className=\"px-3 py-2 bg-[#222] border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-[#ff950e]\"\r\n            aria-label=\"Sort resolved reports\"\r\n          >\r\n            <option value=\"date\">Sort by Date</option>\r\n            <option value=\"reporter\">Sort by Reporter</option>\r\n            <option value=\"reportee\">Sort by Reportee</option>\r\n          </select>\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => onFiltersChange({ sortOrder: filters.sortOrder === 'asc' ? 'desc' : 'asc' })}\r\n            className=\"px-3 py-2 bg-[#222] border border-gray-700 rounded-lg text-white hover:bg-[#333] transition-colors\"\r\n            aria-label={`Sort ${filters.sortOrder === 'asc' ? 'descending' : 'ascending'}`}\r\n            title=\"Toggle sort order\"\r\n          >\r\n            {filters.sortOrder === 'asc' ? <ChevronUp size={16} /> : <ChevronDown size={16} />}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,oDAAoD;;;;;AAGpD;AAAA;AAAA;AACA;AACA;AAJA;;;;;AAOe,SAAS,gBAAgB,EACtC,OAAO,EACP,eAAe,EACM;IACrB,MAAM,qBAAqB,CAAC;QAC1B,gBAAgB;YAAE,YAAY,CAAA,GAAA,wIAAA,CAAA,sBAAmB,AAAD,EAAE;QAAO;IAC3D;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BAEb,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,sMAAA,CAAA,SAAM;4BAAC,WAAU;4BAA2C,MAAM;;;;;;sCACnE,8OAAC,uIAAA,CAAA,cAAW;4BACV,MAAK;4BACL,aAAY;4BACZ,OAAO,QAAQ,UAAU;4BACzB,UAAU;4BACV,WAAU;4BACV,WAAW;4BACX,UAAU;4BACV,WAAW,wIAAA,CAAA,sBAAmB;4BAC9B,cAAW;;;;;;;;;;;;8BAKf,8OAAC;oBACC,OAAO,QAAQ,QAAQ;oBACvB,UAAU,CAAC,IAAM,gBAAgB;4BAAE,UAAU,EAAE,MAAM,CAAC,KAAK;wBAAQ;oBACnE,WAAU;oBACV,cAAW;;sCAEX,8OAAC;4BAAO,OAAM;sCAAM;;;;;;sCACpB,8OAAC;4BAAO,OAAM;sCAAS;;;;;;sCACvB,8OAAC;4BAAO,OAAM;sCAAW;;;;;;;;;;;;8BAI3B,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BACC,OAAO,QAAQ,MAAM;4BACrB,UAAU,CAAC,IAAM,gBAAgB;oCAAE,QAAQ,EAAE,MAAM,CAAC,KAAK;gCAAQ;4BACjE,WAAU;4BACV,cAAW;;8CAEX,8OAAC;oCAAO,OAAM;8CAAO;;;;;;8CACrB,8OAAC;oCAAO,OAAM;8CAAW;;;;;;8CACzB,8OAAC;oCAAO,OAAM;8CAAW;;;;;;;;;;;;sCAE3B,8OAAC;4BACC,MAAK;4BACL,SAAS,IAAM,gBAAgB;oCAAE,WAAW,QAAQ,SAAS,KAAK,QAAQ,SAAS;gCAAM;4BACzF,WAAU;4BACV,cAAY,CAAC,KAAK,EAAE,QAAQ,SAAS,KAAK,QAAQ,eAAe,aAAa;4BAC9E,OAAM;sCAEL,QAAQ,SAAS,KAAK,sBAAQ,8OAAC,gNAAA,CAAA,YAAS;gCAAC,MAAM;;;;;qDAAS,8OAAC,oNAAA,CAAA,cAAW;gCAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMxF","debugId":null}},
    {"offset": {"line": 673, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/gerom/OneDrive/Documents/pantypost/src/components/admin/resolved/BulkActions.tsx"],"sourcesContent":["// src/components/admin/resolved/BulkActions.tsx\r\n'use client';\r\n\r\nimport { useState, useCallback } from 'react';\r\nimport { RotateCcw, Trash2 } from 'lucide-react';\r\nimport type { BulkActionsProps } from '@/types/resolved';\r\n\r\nexport default function BulkActions({\r\n  selectedCount,\r\n  totalCount,\r\n  onSelectAll,\r\n  onClearSelection,\r\n  onBulkRestore,\r\n  onBulkDelete\r\n}: BulkActionsProps) {\r\n  const [busy, setBusy] = useState<'none' | 'restore' | 'delete'>('none');\r\n\r\n  if (!Number.isFinite(selectedCount) || selectedCount <= 0) return null;\r\n\r\n  const handleBulkRestore = useCallback(async () => {\r\n    if (busy !== 'none') return;\r\n    setBusy('restore');\r\n    try {\r\n      await Promise.resolve(onBulkRestore());\r\n    } finally {\r\n      setBusy('none');\r\n    }\r\n  }, [onBulkRestore, busy]);\r\n\r\n  const handleBulkDelete = useCallback(async () => {\r\n    if (busy !== 'none') return;\r\n    setBusy('delete');\r\n    try {\r\n      await Promise.resolve(onBulkDelete());\r\n    } finally {\r\n      setBusy('none');\r\n    }\r\n  }, [onBulkDelete, busy]);\r\n\r\n  return (\r\n    <div\r\n      className=\"bg-[#1a1a1a] border border-gray-800 rounded-lg p-4 mb-6 flex items-center justify-between\"\r\n      role=\"region\"\r\n      aria-label=\"Bulk actions\"\r\n    >\r\n      <div className=\"flex items-center gap-4\">\r\n        <input\r\n          type=\"checkbox\"\r\n          checked={selectedCount === totalCount && totalCount > 0}\r\n          onChange={onSelectAll}\r\n          className=\"w-4 h-4 text-[#ff950e] bg-gray-700 border-gray-600 rounded focus:ring-[#ff950e]\"\r\n          aria-label=\"Select all\"\r\n        />\r\n        <span className=\"text-white\">\r\n          {Math.max(0, selectedCount)} of {Math.max(0, totalCount)} selected\r\n        </span>\r\n      </div>\r\n\r\n      <div className=\"flex gap-2\">\r\n        <button\r\n          type=\"button\"\r\n          onClick={onClearSelection}\r\n          className=\"px-3 py-1.5 bg-[#222] text-white rounded hover:bg-[#333] transition\"\r\n          aria-label=\"Clear selection\"\r\n        >\r\n          Clear Selection\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          onClick={handleBulkRestore}\r\n          disabled={busy !== 'none'}\r\n          className=\"px-3 py-1.5 bg-yellow-600 text-white rounded hover:bg-yellow-700 transition flex items-center gap-2 disabled:opacity-60 disabled:cursor-not-allowed\"\r\n          aria-label=\"Restore selected\"\r\n        >\r\n          <RotateCcw size={16} />\r\n          {busy === 'restore' ? 'Restoring…' : 'Restore Selected'}\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          onClick={handleBulkDelete}\r\n          disabled={busy !== 'none'}\r\n          className=\"px-3 py-1.5 bg-red-600 text-white rounded hover:bg-red-700 transition flex items-center gap-2 disabled:opacity-60 disabled:cursor-not-allowed\"\r\n          aria-label=\"Delete selected permanently\"\r\n        >\r\n          <Trash2 size={16} />\r\n          {busy === 'delete' ? 'Deleting…' : 'Delete Selected'}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,gDAAgD;;;;;AAGhD;AACA;AAAA;AAHA;;;;AAMe,SAAS,YAAY,EAClC,aAAa,EACb,UAAU,EACV,WAAW,EACX,gBAAgB,EAChB,aAAa,EACb,YAAY,EACK;IACjB,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiC;IAEhE,IAAI,CAAC,OAAO,QAAQ,CAAC,kBAAkB,iBAAiB,GAAG,OAAO;IAElE,MAAM,oBAAoB,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE;QACpC,IAAI,SAAS,QAAQ;QACrB,QAAQ;QACR,IAAI;YACF,MAAM,QAAQ,OAAO,CAAC;QACxB,SAAU;YACR,QAAQ;QACV;IACF,GAAG;QAAC;QAAe;KAAK;IAExB,MAAM,mBAAmB,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE;QACnC,IAAI,SAAS,QAAQ;QACrB,QAAQ;QACR,IAAI;YACF,MAAM,QAAQ,OAAO,CAAC;QACxB,SAAU;YACR,QAAQ;QACV;IACF,GAAG;QAAC;QAAc;KAAK;IAEvB,qBACE,8OAAC;QACC,WAAU;QACV,MAAK;QACL,cAAW;;0BAEX,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBACC,MAAK;wBACL,SAAS,kBAAkB,cAAc,aAAa;wBACtD,UAAU;wBACV,WAAU;wBACV,cAAW;;;;;;kCAEb,8OAAC;wBAAK,WAAU;;4BACb,KAAK,GAAG,CAAC,GAAG;4BAAe;4BAAK,KAAK,GAAG,CAAC,GAAG;4BAAY;;;;;;;;;;;;;0BAI7D,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBACC,MAAK;wBACL,SAAS;wBACT,WAAU;wBACV,cAAW;kCACZ;;;;;;kCAGD,8OAAC;wBACC,MAAK;wBACL,SAAS;wBACT,UAAU,SAAS;wBACnB,WAAU;wBACV,cAAW;;0CAEX,8OAAC,gNAAA,CAAA,YAAS;gCAAC,MAAM;;;;;;4BAChB,SAAS,YAAY,eAAe;;;;;;;kCAEvC,8OAAC;wBACC,MAAK;wBACL,SAAS;wBACT,UAAU,SAAS;wBACnB,WAAU;wBACV,cAAW;;0CAEX,8OAAC,0MAAA,CAAA,SAAM;gCAAC,MAAM;;;;;;4BACb,SAAS,WAAW,cAAc;;;;;;;;;;;;;;;;;;;AAK7C","debugId":null}},
    {"offset": {"line": 823, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/gerom/OneDrive/Documents/pantypost/src/components/admin/resolved/ResolvedEntry.tsx"],"sourcesContent":["// src/components/admin/resolved/ResolvedEntry.tsx\r\n'use client';\r\n\r\nimport { useMemo } from 'react';\r\nimport {\r\n  User, Calendar, Shield, AlertTriangle, ChevronDown, ChevronUp,\r\n  RotateCcw, Trash2, MessageSquare, FileText\r\n} from 'lucide-react';\r\nimport { SecureMessageDisplay } from '@/components/ui/SecureMessageDisplay';\r\nimport type { ResolvedEntryProps } from '@/types/resolved';\r\nimport { sanitizeStrict } from '@/utils/security/sanitization';\r\n\r\nconst getSeverityColor = (severity?: string) => {\r\n  switch (severity) {\r\n    case 'critical': return 'text-red-500';\r\n    case 'high': return 'text-orange-500';\r\n    case 'medium': return 'text-yellow-500';\r\n    case 'low': return 'text-green-500';\r\n    default: return 'text-gray-500';\r\n  }\r\n};\r\n\r\nconst getSeverityIcon = (severity?: string) => {\r\n  switch (severity) {\r\n    case 'critical': return Shield;\r\n    case 'high': return AlertTriangle;\r\n    case 'medium': return AlertTriangle;\r\n    case 'low': return AlertTriangle;\r\n    default: return AlertTriangle;\r\n  }\r\n};\r\n\r\nconst safeDate = (d?: string | number | Date) => {\r\n  const dd = d ? new Date(d) : null;\r\n  return dd && Number.isFinite(dd.getTime()) ? dd.toLocaleDateString() : '—';\r\n};\r\n\r\nexport default function ResolvedEntry({\r\n  report,\r\n  index,\r\n  isExpanded,\r\n  isSelected,\r\n  onToggleExpanded,\r\n  onToggleSelected,\r\n  onRestore,\r\n  onDelete\r\n}: ResolvedEntryProps) {\r\n  const SeverityIcon = getSeverityIcon(report?.severity);\r\n\r\n  const prettyCategory = useMemo(() => {\r\n    const c = (report?.category ?? '').toString().replace(/_/g, ' ');\r\n    return c ? sanitizeStrict(c) : '—';\r\n  }, [report?.category]);\r\n\r\n  const resolvedBy = sanitizeStrict(report?.resolvedBy ?? 'Unknown');\r\n  const resolvedReason = sanitizeStrict(report?.resolvedReason ?? 'No reason provided');\r\n\r\n  return (\r\n    <div\r\n      className={`bg-[#1a1a1a] border ${\r\n        isSelected ? 'border-[#ff950e]' : 'border-gray-800'\r\n      } rounded-lg overflow-hidden hover:border-gray-700 transition-all`}\r\n      role=\"group\"\r\n      aria-label={`Resolved report ${index + 1}`}\r\n    >\r\n      {/* Report Header */}\r\n      <div className=\"p-4\">\r\n        <div className=\"flex items-start gap-4\">\r\n          {/* Checkbox */}\r\n          <input\r\n            type=\"checkbox\"\r\n            checked={!!isSelected}\r\n            onChange={onToggleSelected}\r\n            className=\"mt-1 w-4 h-4 text-[#ff950e] bg-gray-700 border-gray-600 rounded focus:ring-[#ff950e]\"\r\n            aria-label=\"Select resolved report\"\r\n          />\r\n\r\n          {/* Main Content */}\r\n          <div\r\n            className=\"flex-1 cursor-pointer\"\r\n            onClick={onToggleExpanded}\r\n            role=\"button\"\r\n            aria-expanded={!!isExpanded}\r\n            tabIndex={0}\r\n            onKeyDown={(e) => {\r\n              if (e.key === 'Enter' || e.key === ' ') {\r\n                e.preventDefault();\r\n                onToggleExpanded();\r\n              }\r\n            }}\r\n          >\r\n            <div className=\"flex justify-between items-start\">\r\n              <div>\r\n                <div className=\"flex items-center gap-3 mb-2 flex-wrap\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <User size={16} className=\"text-gray-400\" />\r\n                    <span className=\"font-semibold text-white\">\r\n                      <SecureMessageDisplay\r\n                        content={report?.reporter ?? ''}\r\n                        className=\"inline\"\r\n                        maxLength={120}\r\n                        allowBasicFormatting={false}\r\n                      />\r\n                      {' '}&rarr;{' '}\r\n                      <SecureMessageDisplay\r\n                        content={report?.reportee ?? ''}\r\n                        className=\"inline\"\r\n                        maxLength={120}\r\n                        allowBasicFormatting={false}\r\n                      />\r\n                    </span>\r\n                  </div>\r\n\r\n                  {report?.banApplied ? (\r\n                    <span className=\"px-2 py-0.5 bg-red-900/20 text-red-400 text-xs rounded-md border border-red-800\">\r\n                      Ban Applied\r\n                    </span>\r\n                  ) : (\r\n                    <span className=\"px-2 py-0.5 bg-green-900/20 text-green-400 text-xs rounded-md border border-green-800\">\r\n                      No Ban\r\n                    </span>\r\n                  )}\r\n\r\n                  {report?.severity && (\r\n                    <div className={`flex items-center gap-1 ${getSeverityColor(report.severity)}`}>\r\n                      <SeverityIcon size={14} />\r\n                      <span className=\"text-xs font-medium uppercase\">{sanitizeStrict(report.severity)}</span>\r\n                    </div>\r\n                  )}\r\n\r\n                  {report?.category && (\r\n                    <span className=\"text-xs text-gray-400\">\r\n                      {prettyCategory}\r\n                    </span>\r\n                  )}\r\n                </div>\r\n\r\n                <div className=\"flex items-center gap-4 text-sm text-gray-400 flex-wrap\">\r\n                  <div className=\"flex items-center gap-1\">\r\n                    <Calendar size={14} />\r\n                    <span>Resolved: {safeDate(report?.date)}</span>\r\n                  </div>\r\n                  {report?.resolvedBy && (\r\n                    <span>By: {resolvedBy}</span>\r\n                  )}\r\n                  {report?.resolvedReason && (\r\n                    <span>Reason: {resolvedReason}</span>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Actions */}\r\n              <div className=\"flex items-center gap-2\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    onRestore();\r\n                  }}\r\n                  className=\"p-2 hover:bg-[#222] rounded transition\"\r\n                  title=\"Restore to active reports\"\r\n                  aria-label=\"Restore report to active\"\r\n                >\r\n                  <RotateCcw size={16} className=\"text-yellow-500\" />\r\n                </button>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    onDelete();\r\n                  }}\r\n                  className=\"p-2 hover:bg-[#222] rounded transition\"\r\n                  title=\"Delete permanently\"\r\n                  aria-label=\"Delete report permanently\"\r\n                >\r\n                  <Trash2 size={16} className=\"text-red-500\" />\r\n                </button>\r\n                <div className=\"pl-2\" aria-hidden>\r\n                  {isExpanded ? (\r\n                    <ChevronUp size={20} className=\"text-gray-400\" />\r\n                  ) : (\r\n                    <ChevronDown size={20} className=\"text-gray-400\" />\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Expanded Content */}\r\n      {isExpanded && (\r\n        <div className=\"border-t border-gray-800 bg-[#0d0d0d] p-4\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            {/* Report Details */}\r\n            <div>\r\n              <h4 className=\"text-sm font-medium text-gray-300 mb-3 flex items-center gap-2\">\r\n                <FileText size={14} />\r\n                Report Details\r\n              </h4>\r\n              <div className=\"space-y-2 text-sm\">\r\n                {report?.originalReportDate && (\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-500\">Original Report Date:</span>\r\n                    <span className=\"text-gray-300\">{safeDate(report.originalReportDate)}</span>\r\n                  </div>\r\n                )}\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-gray-500\">Resolution Date:</span>\r\n                  <span className=\"text-gray-300\">{safeDate(report?.date)}</span>\r\n                </div>\r\n                {report?.banId && (\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-500\">Ban ID:</span>\r\n                    <span className=\"text-gray-300 font-mono text-xs\">{sanitizeStrict(report.banId)}</span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Processing Info */}\r\n            <div>\r\n              <h4 className=\"text-sm font-medium text-gray-300 mb-3\">Processing Information</h4>\r\n              <div className=\"space-y-2 text-sm\">\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-gray-500\">Resolved By:</span>\r\n                  <span className=\"text-gray-300\">{resolvedBy}</span>\r\n                </div>\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-gray-500\">Resolution:</span>\r\n                  <span className=\"text-gray-300\">{resolvedReason}</span>\r\n                </div>\r\n                {typeof report?.banApplied === 'boolean' && (\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-500\">Ban Applied:</span>\r\n                    <span className={report.banApplied ? 'text-red-400' : 'text-green-400'}>\r\n                      {report.banApplied ? 'Yes' : 'No'}\r\n                    </span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Admin Notes */}\r\n          {(report?.notes || report?.adminNotes) && (\r\n            <div className=\"mt-4\">\r\n              <h4 className=\"text-sm font-medium text-gray-300 mb-2\">Admin Notes</h4>\r\n              <div className=\"bg-[#1a1a1a] border border-gray-800 rounded-lg p-3\">\r\n                <SecureMessageDisplay\r\n                  content={report?.notes || report?.adminNotes || ''}\r\n                  className=\"text-sm text-gray-400 whitespace-pre-wrap\"\r\n                  allowBasicFormatting={false}\r\n                  maxLength={1000}\r\n                />\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Messages */}\r\n          {Array.isArray(report?.messages) && report.messages.length > 0 && (\r\n            <div className=\"mt-4\">\r\n              <h4 className=\"text-sm font-medium text-gray-300 mb-2 flex items-center gap-2\">\r\n                <MessageSquare size={14} />\r\n                Reported Messages ({report.messages.length})\r\n              </h4>\r\n              <div className=\"space-y-2 max-h-60 overflow-y-auto\">\r\n                {report.messages.map((msg, idx) => (\r\n                  <div key={idx} className=\"bg-[#1a1a1a] border border-gray-800 rounded-lg p-3\">\r\n                    <div className=\"flex justify-between items-start mb-1\">\r\n                      <span className=\"text-sm font-medium text-white\">\r\n                        <SecureMessageDisplay\r\n                          content={msg.sender}\r\n                          className=\"inline\"\r\n                          allowBasicFormatting={false}\r\n                          maxLength={120}\r\n                        />\r\n                        {' '}&rarr;{' '}\r\n                        <SecureMessageDisplay\r\n                          content={msg.receiver}\r\n                          className=\"inline\"\r\n                          allowBasicFormatting={false}\r\n                          maxLength={120}\r\n                        />\r\n                      </span>\r\n                      <span className=\"text-xs text-gray-500\">\r\n                        {safeDate(msg.date)} {new Date(msg.date).toLocaleTimeString?.()}\r\n                      </span>\r\n                    </div>\r\n                    <SecureMessageDisplay\r\n                      content={msg.content}\r\n                      className=\"text-sm text-gray-300\"\r\n                      allowBasicFormatting={false}\r\n                      maxLength={500}\r\n                    />\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,kDAAkD;;;;;AAGlD;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAEA;AATA;;;;;;AAWA,MAAM,mBAAmB,CAAC;IACxB,OAAQ;QACN,KAAK;YAAY,OAAO;QACxB,KAAK;YAAQ,OAAO;QACpB,KAAK;YAAU,OAAO;QACtB,KAAK;YAAO,OAAO;QACnB;YAAS,OAAO;IAClB;AACF;AAEA,MAAM,kBAAkB,CAAC;IACvB,OAAQ;QACN,KAAK;YAAY,OAAO,sMAAA,CAAA,SAAM;QAC9B,KAAK;YAAQ,OAAO,wNAAA,CAAA,gBAAa;QACjC,KAAK;YAAU,OAAO,wNAAA,CAAA,gBAAa;QACnC,KAAK;YAAO,OAAO,wNAAA,CAAA,gBAAa;QAChC;YAAS,OAAO,wNAAA,CAAA,gBAAa;IAC/B;AACF;AAEA,MAAM,WAAW,CAAC;IAChB,MAAM,KAAK,IAAI,IAAI,KAAK,KAAK;IAC7B,OAAO,MAAM,OAAO,QAAQ,CAAC,GAAG,OAAO,MAAM,GAAG,kBAAkB,KAAK;AACzE;AAEe,SAAS,cAAc,EACpC,MAAM,EACN,KAAK,EACL,UAAU,EACV,UAAU,EACV,gBAAgB,EAChB,gBAAgB,EAChB,SAAS,EACT,QAAQ,EACW;IACnB,MAAM,eAAe,gBAAgB,QAAQ;IAE7C,MAAM,iBAAiB,CAAA,GAAA,qMAAA,CAAA,UAAO,AAAD,EAAE;QAC7B,MAAM,IAAI,CAAC,QAAQ,YAAY,EAAE,EAAE,QAAQ,GAAG,OAAO,CAAC,MAAM;QAC5D,OAAO,IAAI,CAAA,GAAA,wIAAA,CAAA,iBAAc,AAAD,EAAE,KAAK;IACjC,GAAG;QAAC,QAAQ;KAAS;IAErB,MAAM,aAAa,CAAA,GAAA,wIAAA,CAAA,iBAAc,AAAD,EAAE,QAAQ,cAAc;IACxD,MAAM,iBAAiB,CAAA,GAAA,wIAAA,CAAA,iBAAc,AAAD,EAAE,QAAQ,kBAAkB;IAEhE,qBACE,8OAAC;QACC,WAAW,CAAC,oBAAoB,EAC9B,aAAa,qBAAqB,kBACnC,gEAAgE,CAAC;QAClE,MAAK;QACL,cAAY,CAAC,gBAAgB,EAAE,QAAQ,GAAG;;0BAG1C,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;sCAEb,8OAAC;4BACC,MAAK;4BACL,SAAS,CAAC,CAAC;4BACX,UAAU;4BACV,WAAU;4BACV,cAAW;;;;;;sCAIb,8OAAC;4BACC,WAAU;4BACV,SAAS;4BACT,MAAK;4BACL,iBAAe,CAAC,CAAC;4BACjB,UAAU;4BACV,WAAW,CAAC;gCACV,IAAI,EAAE,GAAG,KAAK,WAAW,EAAE,GAAG,KAAK,KAAK;oCACtC,EAAE,cAAc;oCAChB;gCACF;4BACF;sCAEA,cAAA,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;;0DACC,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAI,WAAU;;0EACb,8OAAC,kMAAA,CAAA,OAAI;gEAAC,MAAM;gEAAI,WAAU;;;;;;0EAC1B,8OAAC;gEAAK,WAAU;;kFACd,8OAAC,gJAAA,CAAA,uBAAoB;wEACnB,SAAS,QAAQ,YAAY;wEAC7B,WAAU;wEACV,WAAW;wEACX,sBAAsB;;;;;;oEAEvB;oEAAI;oEAAO;kFACZ,8OAAC,gJAAA,CAAA,uBAAoB;wEACnB,SAAS,QAAQ,YAAY;wEAC7B,WAAU;wEACV,WAAW;wEACX,sBAAsB;;;;;;;;;;;;;;;;;;oDAK3B,QAAQ,2BACP,8OAAC;wDAAK,WAAU;kEAAkF;;;;;6EAIlG,8OAAC;wDAAK,WAAU;kEAAwF;;;;;;oDAKzG,QAAQ,0BACP,8OAAC;wDAAI,WAAW,CAAC,wBAAwB,EAAE,iBAAiB,OAAO,QAAQ,GAAG;;0EAC5E,8OAAC;gEAAa,MAAM;;;;;;0EACpB,8OAAC;gEAAK,WAAU;0EAAiC,CAAA,GAAA,wIAAA,CAAA,iBAAc,AAAD,EAAE,OAAO,QAAQ;;;;;;;;;;;;oDAIlF,QAAQ,0BACP,8OAAC;wDAAK,WAAU;kEACb;;;;;;;;;;;;0DAKP,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAI,WAAU;;0EACb,8OAAC,0MAAA,CAAA,WAAQ;gEAAC,MAAM;;;;;;0EAChB,8OAAC;;oEAAK;oEAAW,SAAS,QAAQ;;;;;;;;;;;;;oDAEnC,QAAQ,4BACP,8OAAC;;4DAAK;4DAAK;;;;;;;oDAEZ,QAAQ,gCACP,8OAAC;;4DAAK;4DAAS;;;;;;;;;;;;;;;;;;;kDAMrB,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDACC,MAAK;gDACL,SAAS,CAAC;oDACR,EAAE,eAAe;oDACjB;gDACF;gDACA,WAAU;gDACV,OAAM;gDACN,cAAW;0DAEX,cAAA,8OAAC,gNAAA,CAAA,YAAS;oDAAC,MAAM;oDAAI,WAAU;;;;;;;;;;;0DAEjC,8OAAC;gDACC,MAAK;gDACL,SAAS,CAAC;oDACR,EAAE,eAAe;oDACjB;gDACF;gDACA,WAAU;gDACV,OAAM;gDACN,cAAW;0DAEX,cAAA,8OAAC,0MAAA,CAAA,SAAM;oDAAC,MAAM;oDAAI,WAAU;;;;;;;;;;;0DAE9B,8OAAC;gDAAI,WAAU;gDAAO,aAAW;0DAC9B,2BACC,8OAAC,gNAAA,CAAA,YAAS;oDAAC,MAAM;oDAAI,WAAU;;;;;yEAE/B,8OAAC,oNAAA,CAAA,cAAW;oDAAC,MAAM;oDAAI,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAU9C,4BACC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CAEb,8OAAC;;kDACC,8OAAC;wCAAG,WAAU;;0DACZ,8OAAC,8MAAA,CAAA,WAAQ;gDAAC,MAAM;;;;;;4CAAM;;;;;;;kDAGxB,8OAAC;wCAAI,WAAU;;4CACZ,QAAQ,oCACP,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAK,WAAU;kEAAgB;;;;;;kEAChC,8OAAC;wDAAK,WAAU;kEAAiB,SAAS,OAAO,kBAAkB;;;;;;;;;;;;0DAGvE,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAK,WAAU;kEAAgB;;;;;;kEAChC,8OAAC;wDAAK,WAAU;kEAAiB,SAAS,QAAQ;;;;;;;;;;;;4CAEnD,QAAQ,uBACP,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAK,WAAU;kEAAgB;;;;;;kEAChC,8OAAC;wDAAK,WAAU;kEAAmC,CAAA,GAAA,wIAAA,CAAA,iBAAc,AAAD,EAAE,OAAO,KAAK;;;;;;;;;;;;;;;;;;;;;;;;0CAOtF,8OAAC;;kDACC,8OAAC;wCAAG,WAAU;kDAAyC;;;;;;kDACvD,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAK,WAAU;kEAAgB;;;;;;kEAChC,8OAAC;wDAAK,WAAU;kEAAiB;;;;;;;;;;;;0DAEnC,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAK,WAAU;kEAAgB;;;;;;kEAChC,8OAAC;wDAAK,WAAU;kEAAiB;;;;;;;;;;;;4CAElC,OAAO,QAAQ,eAAe,2BAC7B,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAK,WAAU;kEAAgB;;;;;;kEAChC,8OAAC;wDAAK,WAAW,OAAO,UAAU,GAAG,iBAAiB;kEACnD,OAAO,UAAU,GAAG,QAAQ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;oBASxC,CAAC,QAAQ,SAAS,QAAQ,UAAU,mBACnC,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAG,WAAU;0CAAyC;;;;;;0CACvD,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC,gJAAA,CAAA,uBAAoB;oCACnB,SAAS,QAAQ,SAAS,QAAQ,cAAc;oCAChD,WAAU;oCACV,sBAAsB;oCACtB,WAAW;;;;;;;;;;;;;;;;;oBAOlB,MAAM,OAAO,CAAC,QAAQ,aAAa,OAAO,QAAQ,CAAC,MAAM,GAAG,mBAC3D,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAG,WAAU;;kDACZ,8OAAC,wNAAA,CAAA,gBAAa;wCAAC,MAAM;;;;;;oCAAM;oCACP,OAAO,QAAQ,CAAC,MAAM;oCAAC;;;;;;;0CAE7C,8OAAC;gCAAI,WAAU;0CACZ,OAAO,QAAQ,CAAC,GAAG,CAAC,CAAC,KAAK,oBACzB,8OAAC;wCAAc,WAAU;;0DACvB,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAK,WAAU;;0EACd,8OAAC,gJAAA,CAAA,uBAAoB;gEACnB,SAAS,IAAI,MAAM;gEACnB,WAAU;gEACV,sBAAsB;gEACtB,WAAW;;;;;;4DAEZ;4DAAI;4DAAO;0EACZ,8OAAC,gJAAA,CAAA,uBAAoB;gEACnB,SAAS,IAAI,QAAQ;gEACrB,WAAU;gEACV,sBAAsB;gEACtB,WAAW;;;;;;;;;;;;kEAGf,8OAAC;wDAAK,WAAU;;4DACb,SAAS,IAAI,IAAI;4DAAE;4DAAE,IAAI,KAAK,IAAI,IAAI,EAAE,kBAAkB;;;;;;;;;;;;;0DAG/D,8OAAC,gJAAA,CAAA,uBAAoB;gDACnB,SAAS,IAAI,OAAO;gDACpB,WAAU;gDACV,sBAAsB;gDACtB,WAAW;;;;;;;uCAzBL;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoC5B","debugId":null}},
    {"offset": {"line": 1570, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/gerom/OneDrive/Documents/pantypost/src/components/admin/resolved/ResolvedList.tsx"],"sourcesContent":["// src/components/admin/resolved/ResolvedList.tsx\r\n'use client';\r\n\r\nimport { useMemo } from 'react';\r\nimport { Archive } from 'lucide-react';\r\nimport ResolvedEntry from './ResolvedEntry';\r\nimport type { ResolvedListProps } from '@/types/resolved';\r\nimport { sanitizeSearchQuery } from '@/utils/security/sanitization';\r\n\r\nexport default function ResolvedList({\r\n  reports,\r\n  expandedReports,\r\n  selectedReports,\r\n  onToggleExpanded,\r\n  onToggleSelected,\r\n  onRestore,\r\n  onDelete,\r\n  filters\r\n}: ResolvedListProps) {\r\n  const sanitizedSearchTerm = (filters?.searchTerm ? sanitizeSearchQuery(filters.searchTerm) : '').toLowerCase();\r\n\r\n  const filteredAndSortedReports = useMemo(() => {\r\n    const safeReports = Array.isArray(reports) ? reports : [];\r\n\r\n    const filtered = safeReports.filter((report) => {\r\n      const reporter = (report?.reporter || '').toString().toLowerCase();\r\n      const reportee = (report?.reportee || '').toString().toLowerCase();\r\n      const notes = (report?.notes || '').toString().toLowerCase();\r\n      const reason = (report?.resolvedReason || '').toString().toLowerCase();\r\n\r\n      const matchesSearch = sanitizedSearchTerm\r\n        ? reporter.includes(sanitizedSearchTerm) ||\r\n          reportee.includes(sanitizedSearchTerm) ||\r\n          notes.includes(sanitizedSearchTerm) ||\r\n          reason.includes(sanitizedSearchTerm)\r\n        : true;\r\n\r\n      const matchesFilter =\r\n        filters.filterBy === 'all'\r\n          ? true\r\n          : filters.filterBy === 'banned'\r\n            ? report?.banApplied === true\r\n            : report?.banApplied === false;\r\n\r\n      return matchesSearch && matchesFilter;\r\n    });\r\n\r\n    filtered.sort((a, b) => {\r\n      let comparison = 0;\r\n      switch (filters.sortBy) {\r\n        case 'date':\r\n          comparison = new Date(a?.date ?? 0).getTime() - new Date(b?.date ?? 0).getTime();\r\n          break;\r\n        case 'reporter':\r\n          comparison = (a?.reporter || '').localeCompare(b?.reporter || '');\r\n          break;\r\n        case 'reportee':\r\n          comparison = (a?.reportee || '').localeCompare(b?.reportee || '');\r\n          break;\r\n        default:\r\n          comparison = 0;\r\n      }\r\n      return filters.sortOrder === 'asc' ? comparison : -comparison;\r\n    });\r\n\r\n    return filtered;\r\n  }, [reports, filters.sortBy, filters.sortOrder, filters.filterBy, sanitizedSearchTerm]);\r\n\r\n  if (filteredAndSortedReports.length === 0) {\r\n    return (\r\n      <div className=\"bg-[#1a1a1a] border border-gray-800 rounded-lg p-8 text-center\">\r\n        <Archive size={48} className=\"mx-auto text-gray-600 mb-4\" />\r\n        <p className=\"text-gray-400 text-lg\">No resolved reports found</p>\r\n        {sanitizedSearchTerm && (\r\n          <p className=\"text-gray-500 text-sm mt-2\">\r\n            Try adjusting your search terms or filters\r\n          </p>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {filteredAndSortedReports.map((report, index) => {\r\n        const fallbackId = `${report?.reporter ?? 'unknown'}-${report?.reportee ?? 'unknown'}-${report?.date ?? index}`;\r\n        const reportId = (report?.id && String(report.id)) || fallbackId;\r\n\r\n        return (\r\n          <ResolvedEntry\r\n            key={reportId}\r\n            report={report}\r\n            index={index}\r\n            isExpanded={expandedReports.has(reportId)}\r\n            isSelected={selectedReports.has(reportId)}\r\n            onToggleExpanded={() => onToggleExpanded(reportId)}\r\n            onToggleSelected={() => onToggleSelected(reportId)}\r\n            onRestore={() => onRestore(report)}\r\n            onDelete={() => onDelete(reportId)}\r\n          />\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,iDAAiD;;;;;AAGjD;AACA;AACA;AAEA;AANA;;;;;;AAQe,SAAS,aAAa,EACnC,OAAO,EACP,eAAe,EACf,eAAe,EACf,gBAAgB,EAChB,gBAAgB,EAChB,SAAS,EACT,QAAQ,EACR,OAAO,EACW;IAClB,MAAM,sBAAsB,CAAC,SAAS,aAAa,CAAA,GAAA,wIAAA,CAAA,sBAAmB,AAAD,EAAE,QAAQ,UAAU,IAAI,EAAE,EAAE,WAAW;IAE5G,MAAM,2BAA2B,CAAA,GAAA,qMAAA,CAAA,UAAO,AAAD,EAAE;QACvC,MAAM,cAAc,MAAM,OAAO,CAAC,WAAW,UAAU,EAAE;QAEzD,MAAM,WAAW,YAAY,MAAM,CAAC,CAAC;YACnC,MAAM,WAAW,CAAC,QAAQ,YAAY,EAAE,EAAE,QAAQ,GAAG,WAAW;YAChE,MAAM,WAAW,CAAC,QAAQ,YAAY,EAAE,EAAE,QAAQ,GAAG,WAAW;YAChE,MAAM,QAAQ,CAAC,QAAQ,SAAS,EAAE,EAAE,QAAQ,GAAG,WAAW;YAC1D,MAAM,SAAS,CAAC,QAAQ,kBAAkB,EAAE,EAAE,QAAQ,GAAG,WAAW;YAEpE,MAAM,gBAAgB,sBAClB,SAAS,QAAQ,CAAC,wBAClB,SAAS,QAAQ,CAAC,wBAClB,MAAM,QAAQ,CAAC,wBACf,OAAO,QAAQ,CAAC,uBAChB;YAEJ,MAAM,gBACJ,QAAQ,QAAQ,KAAK,QACjB,OACA,QAAQ,QAAQ,KAAK,WACnB,QAAQ,eAAe,OACvB,QAAQ,eAAe;YAE/B,OAAO,iBAAiB;QAC1B;QAEA,SAAS,IAAI,CAAC,CAAC,GAAG;YAChB,IAAI,aAAa;YACjB,OAAQ,QAAQ,MAAM;gBACpB,KAAK;oBACH,aAAa,IAAI,KAAK,GAAG,QAAQ,GAAG,OAAO,KAAK,IAAI,KAAK,GAAG,QAAQ,GAAG,OAAO;oBAC9E;gBACF,KAAK;oBACH,aAAa,CAAC,GAAG,YAAY,EAAE,EAAE,aAAa,CAAC,GAAG,YAAY;oBAC9D;gBACF,KAAK;oBACH,aAAa,CAAC,GAAG,YAAY,EAAE,EAAE,aAAa,CAAC,GAAG,YAAY;oBAC9D;gBACF;oBACE,aAAa;YACjB;YACA,OAAO,QAAQ,SAAS,KAAK,QAAQ,aAAa,CAAC;QACrD;QAEA,OAAO;IACT,GAAG;QAAC;QAAS,QAAQ,MAAM;QAAE,QAAQ,SAAS;QAAE,QAAQ,QAAQ;QAAE;KAAoB;IAEtF,IAAI,yBAAyB,MAAM,KAAK,GAAG;QACzC,qBACE,8OAAC;YAAI,WAAU;;8BACb,8OAAC,wMAAA,CAAA,UAAO;oBAAC,MAAM;oBAAI,WAAU;;;;;;8BAC7B,8OAAC;oBAAE,WAAU;8BAAwB;;;;;;gBACpC,qCACC,8OAAC;oBAAE,WAAU;8BAA6B;;;;;;;;;;;;IAMlD;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACZ,yBAAyB,GAAG,CAAC,CAAC,QAAQ;YACrC,MAAM,aAAa,GAAG,QAAQ,YAAY,UAAU,CAAC,EAAE,QAAQ,YAAY,UAAU,CAAC,EAAE,QAAQ,QAAQ,OAAO;YAC/G,MAAM,WAAW,AAAC,QAAQ,MAAM,OAAO,OAAO,EAAE,KAAM;YAEtD,qBACE,8OAAC,wJAAA,CAAA,UAAa;gBAEZ,QAAQ;gBACR,OAAO;gBACP,YAAY,gBAAgB,GAAG,CAAC;gBAChC,YAAY,gBAAgB,GAAG,CAAC;gBAChC,kBAAkB,IAAM,iBAAiB;gBACzC,kBAAkB,IAAM,iBAAiB;gBACzC,WAAW,IAAM,UAAU;gBAC3B,UAAU,IAAM,SAAS;eARpB;;;;;QAWX;;;;;;AAGN","debugId":null}},
    {"offset": {"line": 1688, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/gerom/OneDrive/Documents/pantypost/src/components/admin/resolved/RestoreModal.tsx"],"sourcesContent":["// src/components/admin/resolved/RestoreModal.tsx\r\n'use client';\r\n\r\nimport { useEffect, useRef, useState, useCallback } from 'react';\r\nimport { RotateCcw, AlertTriangle } from 'lucide-react';\r\nimport type { RestoreModalProps } from '@/types/resolved';\r\nimport { SecureMessageDisplay } from '@/components/ui/SecureMessageDisplay';\r\n\r\nexport default function RestoreModal({\r\n  isOpen,\r\n  report,\r\n  onClose,\r\n  onConfirm\r\n}: RestoreModalProps) {\r\n  const [busy, setBusy] = useState(false);\r\n  const dialogRef = useRef<HTMLDivElement | null>(null);\r\n  const confirmBtnRef = useRef<HTMLButtonElement | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n\r\n    const handleKeyDown = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape') {\r\n        e.stopPropagation();\r\n        onClose();\r\n      }\r\n    };\r\n    document.addEventListener('keydown', handleKeyDown);\r\n    return () => document.removeEventListener('keydown', handleKeyDown);\r\n  }, [isOpen, onClose]);\r\n\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n    const prevOverflow = document.body.style.overflow;\r\n    document.body.style.overflow = 'hidden';\r\n    const t = setTimeout(() => confirmBtnRef.current?.focus(), 0);\r\n    return () => {\r\n      clearTimeout(t);\r\n      document.body.style.overflow = prevOverflow;\r\n    };\r\n  }, [isOpen]);\r\n\r\n  const handleBackdropClick = useCallback(\r\n    (e: React.MouseEvent<HTMLDivElement>) => {\r\n      if (e.target === e.currentTarget) onClose();\r\n    },\r\n    [onClose]\r\n  );\r\n\r\n  const handleConfirm = useCallback(async () => {\r\n    if (busy) return;\r\n    setBusy(true);\r\n    try {\r\n      await Promise.resolve(onConfirm());\r\n    } finally {\r\n      setBusy(false);\r\n    }\r\n  }, [onConfirm, busy]);\r\n\r\n  if (!isOpen || !report) return null;\r\n\r\n  return (\r\n    <div\r\n      className=\"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4\"\r\n      onMouseDown={handleBackdropClick}\r\n      role=\"dialog\"\r\n      aria-modal=\"true\"\r\n      aria-label=\"Restore resolved report\"\r\n    >\r\n      <div\r\n        ref={dialogRef}\r\n        className=\"bg-[#1a1a1a] border border-gray-800 rounded-lg p-6 max-w-md w-full\"\r\n        onMouseDown={(e) => e.stopPropagation()}\r\n      >\r\n        <h3 className=\"text-xl font-bold text-white mb-4 flex items-center gap-2\">\r\n          <RotateCcw className=\"text-yellow-500\" size={24} />\r\n          Restore Report\r\n        </h3>\r\n\r\n        <div className=\"mb-6\">\r\n          <div className=\"bg-yellow-900/20 border border-yellow-800 rounded-lg p-4 mb-4\">\r\n            <div className=\"flex gap-3\">\r\n              <AlertTriangle className=\"text-yellow-500 flex-shrink-0\" size={20} />\r\n              <div className=\"text-sm text-yellow-400\">\r\n                This will move the report back to active reports for re-processing.\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-[#222] border border-gray-700 rounded-lg p-3\">\r\n            <p className=\"text-sm text-gray-400\">\r\n              <span className=\"text-white font-medium\">\r\n                <SecureMessageDisplay\r\n                  content={report.reporter}\r\n                  className=\"inline\"\r\n                  allowBasicFormatting={false}\r\n                  maxLength={120}\r\n                />\r\n              </span>{' '}\r\n              &rarr;{' '}\r\n              <span className=\"text-white font-medium ml-1\">\r\n                <SecureMessageDisplay\r\n                  content={report.reportee}\r\n                  className=\"inline\"\r\n                  allowBasicFormatting={false}\r\n                  maxLength={120}\r\n                />\r\n              </span>\r\n            </p>\r\n            <p className=\"text-xs text-gray-500 mt-1\">\r\n              Resolved on {new Date(report.date).toLocaleDateString?.() || '—'}\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex gap-3\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={onClose}\r\n            className=\"flex-1 px-4 py-2 bg-[#222] text-white rounded-lg hover:bg-[#333] transition\"\r\n            aria-label=\"Cancel restore\"\r\n          >\r\n            Cancel\r\n          </button>\r\n          <button\r\n            ref={confirmBtnRef}\r\n            type=\"button\"\r\n            onClick={handleConfirm}\r\n            disabled={busy}\r\n            className=\"flex-1 px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition disabled:opacity-60 disabled:cursor-not-allowed\"\r\n            aria-label=\"Confirm restore report\"\r\n          >\r\n            {busy ? 'Restoring…' : 'Restore Report'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1935, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/gerom/OneDrive/Documents/pantypost/src/app/admin/resolved/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport RequireAuth from '@/components/RequireAuth';\r\nimport ResolvedHeader from '@/components/admin/resolved/ResolvedHeader';\r\nimport ResolvedStats from '@/components/admin/resolved/ResolvedStats';\r\nimport ResolvedFilters from '@/components/admin/resolved/ResolvedFilters';\r\nimport BulkActions from '@/components/admin/resolved/BulkActions';\r\nimport ResolvedList from '@/components/admin/resolved/ResolvedList';\r\nimport RestoreModal from '@/components/admin/resolved/RestoreModal';\r\nimport { AlertTriangle } from 'lucide-react';\r\nimport { storageService } from '@/services';\r\nimport { sanitizeStrict, sanitizeObject } from '@/utils/security/sanitization';\r\nimport { securityService } from '@/services/security.service';\r\nimport type { ResolvedReport, FilterOptions, ResolvedStats as StatsType } from '@/types/resolved';\r\n\r\n// --- Conservative mock data detector ---\r\nconst isMockString = (val?: string) => {\r\n  if (!val) return false;\r\n  const v = String(val).trim().toLowerCase();\r\n  // Obvious dev/demo patterns only (avoid nuking real data)\r\n  const patterns = [\r\n    'spammer', 'scammer', 'troublemaker', 'oldbanner',\r\n    'mock', 'sample', 'demo', 'test',\r\n    'lorem', 'ipsum', 'john_doe', 'jane_doe'\r\n  ];\r\n  return patterns.some(p => v.includes(p));\r\n};\r\n\r\nconst isMockResolved = (r: ResolvedReport) =>\r\n  isMockString(r.reporter) ||\r\n  isMockString(r.reportee) ||\r\n  isMockString(r.resolvedBy) ||\r\n  isMockString(r.resolvedReason) ||\r\n  isMockString(r.notes) ||\r\n  isMockString(r.adminNotes) ||\r\n  (r.id && (r.id.startsWith?.('mock_') || r.id.includes('sample') || r.id.includes('test')));\r\n// --------------------------------------\r\n\r\nexport default function ResolvedReportsPage() {\r\n  const { user } = useAuth();\r\n  const [resolved, setResolved] = useState<ResolvedReport[]>([]);\r\n  const [filters, setFilters] = useState<FilterOptions>({\r\n    searchTerm: '',\r\n    filterBy: 'all',\r\n    sortBy: 'date',\r\n    sortOrder: 'desc'\r\n  });\r\n  const [expandedReports, setExpandedReports] = useState<Set<string>>(new Set());\r\n  const [selectedReports, setSelectedReports] = useState<Set<string>>(new Set());\r\n  const [lastRefresh, setLastRefresh] = useState<Date>(new Date());\r\n  const [showRestoreModal, setShowRestoreModal] = useState(false);\r\n  const [reportToRestore, setReportToRestore] = useState<ResolvedReport | null>(null);\r\n\r\n  useEffect(() => {\r\n    loadResolvedReports();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const loadResolvedReports = async () => {\r\n    if (typeof window !== 'undefined') {\r\n      try {\r\n        const stored = await storageService.getItem<ResolvedReport[]>('panty_report_resolved', []);\r\n        // Add IDs if missing and sanitize text fields\r\n        const reportsWithIds = (stored || []).map((report, index) => ({\r\n          ...report,\r\n          id: report.id || `${report.reporter}-${report.reportee}-${report.date}-${index}`,\r\n          reporter: sanitizeStrict(report.reporter || ''),\r\n          reportee: sanitizeStrict(report.reportee || ''),\r\n          resolvedBy: sanitizeStrict(report.resolvedBy || ''),\r\n          resolvedReason: sanitizeStrict(report.resolvedReason || ''),\r\n          notes: sanitizeStrict(report.notes || ''),\r\n          adminNotes: report.adminNotes ? sanitizeStrict(report.adminNotes) : undefined\r\n        }));\r\n        // Remove any obvious mock/dev entries\r\n        const cleansed = reportsWithIds.filter(r => !isMockResolved(r));\r\n        if (cleansed.length !== reportsWithIds.length) {\r\n          await storageService.setItem('panty_report_resolved', cleansed);\r\n        }\r\n        setResolved(cleansed);\r\n        setLastRefresh(new Date());\r\n      } catch (error) {\r\n        console.error('Error loading resolved reports:', error);\r\n        setResolved([]);\r\n      }\r\n    }\r\n  };\r\n\r\n  const saveResolved = async (newResolved: ResolvedReport[]) => {\r\n    // Sanitize before saving and never persist mock entries\r\n    const sanitizedResolved = newResolved\r\n      .map(report => ({\r\n        ...report,\r\n        reporter: sanitizeStrict(report.reporter || ''),\r\n        reportee: sanitizeStrict(report.reportee || ''),\r\n        resolvedBy: sanitizeStrict(report.resolvedBy || ''),\r\n        resolvedReason: sanitizeStrict(report.resolvedReason || ''),\r\n        notes: sanitizeStrict(report.notes || ''),\r\n        adminNotes: report.adminNotes ? sanitizeStrict(report.adminNotes) : undefined\r\n      }))\r\n      .filter(r => !isMockResolved(r));\r\n\r\n    setResolved(sanitizedResolved);\r\n    await storageService.setItem('panty_report_resolved', sanitizedResolved);\r\n  };\r\n\r\n  // Toggle expanded state\r\n  const toggleExpanded = (reportId: string) => {\r\n    setExpandedReports(prev => {\r\n      const newSet = new Set(prev);\r\n      if (newSet.has(reportId)) {\r\n        newSet.delete(reportId);\r\n      } else {\r\n        newSet.add(reportId);\r\n      }\r\n      return newSet;\r\n    });\r\n  };\r\n\r\n  // Toggle selection\r\n  const toggleSelection = (reportId: string) => {\r\n    setSelectedReports(prev => {\r\n      const newSet = new Set(prev);\r\n      if (newSet.has(reportId)) {\r\n        newSet.delete(reportId);\r\n      } else {\r\n        newSet.add(reportId);\r\n      }\r\n      return newSet;\r\n    });\r\n  };\r\n\r\n  // Select all\r\n  const selectAll = () => {\r\n    if (selectedReports.size === resolved.length) {\r\n      setSelectedReports(new Set());\r\n    } else {\r\n      const allIds = resolved.map(r => r.id || `${r.reporter}-${r.reportee}-${r.date}`);\r\n      setSelectedReports(new Set(allIds));\r\n    }\r\n  };\r\n\r\n  // Clear selection\r\n  const clearSelection = () => {\r\n    setSelectedReports(new Set());\r\n  };\r\n\r\n  // Handle filter changes with sanitization\r\n  const handleFiltersChange = (newFilters: Partial<FilterOptions>) => {\r\n    const sanitizedFilters: Partial<FilterOptions> = { ...newFilters };\r\n\r\n    if ('searchTerm' in sanitizedFilters && sanitizedFilters.searchTerm) {\r\n      sanitizedFilters.searchTerm = securityService.sanitizeSearchQuery(sanitizedFilters.searchTerm);\r\n    }\r\n\r\n    setFilters(prev => ({ ...prev, ...sanitizedFilters }));\r\n  };\r\n\r\n  // Handle restore\r\n  const handleRestore = (report: ResolvedReport) => {\r\n    setReportToRestore(report);\r\n    setShowRestoreModal(true);\r\n  };\r\n\r\n  const confirmRestore = async () => {\r\n    if (!reportToRestore) return;\r\n    // Don't restore obvious mock rows\r\n    if (isMockResolved(reportToRestore)) {\r\n      setShowRestoreModal(false);\r\n      setReportToRestore(null);\r\n      alert('Cannot restore mock/demo report.');\r\n      return;\r\n    }\r\n\r\n    // Generate a new report entry for active reports with sanitized data\r\n    const newReport = {\r\n      id: `report_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\r\n      reporter: sanitizeStrict(reportToRestore.reporter),\r\n      reportee: sanitizeStrict(reportToRestore.reportee),\r\n      messages: Array.isArray(reportToRestore.messages) ? reportToRestore.messages : [],\r\n      date: reportToRestore.originalReportDate || reportToRestore.date,\r\n      processed: false,\r\n      severity: reportToRestore.severity,\r\n      category: reportToRestore.category,\r\n      adminNotes: sanitizeStrict(\r\n        `[Restored from resolved on ${new Date().toLocaleString()}]\\n${reportToRestore.adminNotes || reportToRestore.notes || ''}`\r\n      )\r\n    };\r\n\r\n    // Add to active reports\r\n    const existingReports = await storageService.getItem<any[]>('panty_report_logs', []);\r\n    // Avoid restoring into mock space too\r\n    const cleanedExisting = (existingReports || []).filter((r) => !isMockString(r?.reporter) && !isMockString(r?.reportee));\r\n    cleanedExisting.push(newReport);\r\n    await storageService.setItem('panty_report_logs', cleanedExisting);\r\n\r\n    // Remove from resolved\r\n    const reportId = reportToRestore.id || `${reportToRestore.reporter}-${reportToRestore.reportee}-${reportToRestore.date}`;\r\n    await handleDelete(reportId);\r\n\r\n    // Dispatch event to update report counter\r\n    if (typeof window !== 'undefined') {\r\n      window.dispatchEvent(new Event('updateReports'));\r\n    }\r\n\r\n    setShowRestoreModal(false);\r\n    setReportToRestore(null);\r\n    alert(`Restored report from ${sanitizeStrict(newReport.reporter)} about ${sanitizeStrict(newReport.reportee)}.`);\r\n  };\r\n\r\n  // Handle delete\r\n  const handleDelete = async (reportId: string) => {\r\n    const updatedResolved = resolved.filter(r => {\r\n      const rId = r.id || `${r.reporter}-${r.reportee}-${r.date}`;\r\n      return rId !== reportId;\r\n    });\r\n    await saveResolved(updatedResolved);\r\n\r\n    // Remove from selection if selected\r\n    setSelectedReports(prev => {\r\n      const newSet = new Set(prev);\r\n      newSet.delete(reportId);\r\n      return newSet;\r\n    });\r\n  };\r\n\r\n  // Bulk actions\r\n  const handleBulkRestore = async () => {\r\n    if (selectedReports.size === 0) return;\r\n\r\n    if (confirm(`Are you sure you want to restore ${selectedReports.size} reports?`)) {\r\n      const toRestore = resolved.filter(r => {\r\n        const rId = r.id || `${r.reporter}-${r.reportee}-${r.date}`;\r\n        return selectedReports.has(rId);\r\n      }).filter(r => !isMockResolved(r)); // never restore mock\r\n\r\n      // Get existing reports\r\n      const existingReports = await storageService.getItem<any[]>('panty_report_logs', []);\r\n      const cleanedExisting = (existingReports || []).filter((r) => !isMockString(r?.reporter) && !isMockString(r?.reportee));\r\n\r\n      toRestore.forEach(report => {\r\n        const newReport = {\r\n          id: `report_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\r\n          reporter: sanitizeStrict(report.reporter),\r\n          reportee: sanitizeStrict(report.reportee),\r\n          messages: Array.isArray(report.messages) ? report.messages : [],\r\n          date: report.originalReportDate || report.date,\r\n          processed: false,\r\n          severity: report.severity,\r\n          category: report.category,\r\n          adminNotes: sanitizeStrict(\r\n            `[Restored from resolved on ${new Date().toLocaleString()}]\\n${report.adminNotes || report.notes || ''}`\r\n          )\r\n        };\r\n        cleanedExisting.push(newReport);\r\n      });\r\n\r\n      // Save updated reports\r\n      await storageService.setItem('panty_report_logs', cleanedExisting);\r\n\r\n      // Remove from resolved\r\n      const updatedResolved = resolved.filter(r => {\r\n        const rId = r.id || `${r.reporter}-${r.reportee}-${r.date}`;\r\n        return !selectedReports.has(rId);\r\n      });\r\n      await saveResolved(updatedResolved);\r\n\r\n      if (typeof window !== 'undefined') {\r\n        window.dispatchEvent(new Event('updateReports'));\r\n      }\r\n      clearSelection();\r\n      alert(`${toRestore.length} reports restored.`);\r\n    }\r\n  };\r\n\r\n  const handleBulkDelete = async () => {\r\n    if (selectedReports.size === 0) return;\r\n\r\n    if (confirm(`Are you sure you want to permanently delete ${selectedReports.size} reports? This cannot be undone.`)) {\r\n      const updatedResolved = resolved.filter(r => {\r\n        const rId = r.id || `${r.reporter}-${r.reportee}-${r.date}`;\r\n        return !selectedReports.has(rId);\r\n      });\r\n      await saveResolved(updatedResolved);\r\n      clearSelection();\r\n      alert(`${selectedReports.size} reports deleted.`);\r\n    }\r\n  };\r\n\r\n  // Export data with sanitization\r\n  const exportData = () => {\r\n    const sanitizedData = {\r\n      resolvedReports: resolved.map(report => sanitizeObject(report, {\r\n        maxDepth: 3,\r\n        keySanitizer: (key) => sanitizeStrict(key),\r\n        valueSanitizer: (value) => {\r\n          if (typeof value === 'string') {\r\n            return sanitizeStrict(value);\r\n          }\r\n          return value;\r\n        }\r\n      })),\r\n      exportDate: new Date().toISOString(),\r\n      exportedBy: sanitizeStrict(user?.username || 'admin'),\r\n      totalRecords: resolved.length\r\n    };\r\n\r\n    const blob = new Blob([JSON.stringify(sanitizedData, null, 2)], {\r\n      type: 'application/json'\r\n    });\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    a.download = `resolved-reports-${new Date().toISOString().split('T')[0]}.json`;\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    document.body.removeChild(a);\r\n    URL.revokeObjectURL(url);\r\n  };\r\n\r\n  // Import data with validation and sanitization\r\n  const handleImport = async (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = event.target.files?.[0];\r\n    if (!file) return;\r\n\r\n    // Validate file type\r\n    const validationResult = securityService.validateFileUpload(file, {\r\n      maxSize: 10 * 1024 * 1024, // 10MB\r\n      allowedTypes: ['application/json'],\r\n      allowedExtensions: ['json']\r\n    });\r\n\r\n    if (!validationResult.valid) {\r\n      alert(validationResult.error || 'Invalid file');\r\n      return;\r\n    }\r\n\r\n    const reader = new FileReader();\r\n    reader.onload = async (e) => {\r\n      try {\r\n        const data = JSON.parse(e.target?.result as string);\r\n        if (data.resolvedReports && Array.isArray(data.resolvedReports)) {\r\n          const imported = data.resolvedReports as ResolvedReport[];\r\n\r\n          // Sanitize imported data\r\n          const sanitizedImports = imported.map((report, index) => ({\r\n            ...report,\r\n            id: report.id || `${report.reporter}-${report.reportee}-${report.date}-imported-${index}`,\r\n            reporter: sanitizeStrict(report.reporter || ''),\r\n            reportee: sanitizeStrict(report.reportee || ''),\r\n            resolvedBy: sanitizeStrict(report.resolvedBy || ''),\r\n            resolvedReason: sanitizeStrict(report.resolvedReason || ''),\r\n            notes: sanitizeStrict(report.notes || ''),\r\n            adminNotes: report.adminNotes ? sanitizeStrict(report.adminNotes) : undefined\r\n          }))\r\n          // Never import mock entries\r\n          .filter(r => !isMockResolved(r));\r\n\r\n          const merged = [...resolved, ...sanitizedImports];\r\n          // Remove duplicates based on reporter + reportee + date\r\n          const unique = merged.filter((report, index, self) =>\r\n            index === self.findIndex((r) => (\r\n              r.reporter === report.reporter &&\r\n              r.reportee === report.reportee &&\r\n              r.date === report.date\r\n            ))\r\n          );\r\n          await saveResolved(unique);\r\n          alert(`Imported ${sanitizedImports.length} reports. Total: ${unique.length}`);\r\n        } else {\r\n          alert('Invalid file format');\r\n        }\r\n      } catch (error) {\r\n        alert('Error importing file');\r\n        console.error('Import error:', error);\r\n      }\r\n    };\r\n    reader.readAsText(file);\r\n\r\n    // Reset input\r\n    event.target.value = '';\r\n  };\r\n\r\n  // Calculate stats\r\n  const stats: StatsType = {\r\n    total: resolved.length,\r\n    withBans: resolved.filter(r => r.banApplied).length,\r\n    withoutBans: resolved.filter(r => !r.banApplied).length,\r\n    today: resolved.filter(r => {\r\n      const reportDate = new Date(r.date);\r\n      const today = new Date();\r\n      return reportDate.toDateString() === today.toDateString();\r\n    }).length,\r\n    thisWeek: resolved.filter(r => {\r\n      const reportDate = new Date(r.date);\r\n      const weekAgo = new Date();\r\n      weekAgo.setDate(weekAgo.getDate() - 7);\r\n      return reportDate >= weekAgo;\r\n    }).length\r\n  };\r\n\r\n  // Clean role-based admin access\r\n  if (!user || user.role !== 'admin') {\r\n    return (\r\n      <RequireAuth role=\"admin\">\r\n        <main className=\"p-8 max-w-4xl mx-auto\">\r\n          <div className=\"bg-[#1a1a1a] border border-red-800 rounded-lg p-8 text-center\">\r\n            <AlertTriangle size={48} className=\"mx-auto text-red-400 mb-4\" />\r\n            <h1 className=\"text-2xl font-bold mb-4 text-red-400\">🔒 Access Denied</h1>\r\n            <p className=\"text-gray-400\">You do not have permission to view this page.</p>\r\n            <button\r\n              onClick={() => window.history.back()}\r\n              className=\"mt-4 px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 flex items-center mx-auto\"\r\n            >\r\n              Go Back\r\n            </button>\r\n          </div>\r\n        </main>\r\n      </RequireAuth>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <RequireAuth role=\"admin\">\r\n      <main className=\"p-8 max-w-7xl mx-auto\">\r\n        <ResolvedHeader\r\n          lastRefresh={lastRefresh}\r\n          onRefresh={loadResolvedReports}\r\n          onExport={exportData}\r\n          onImport={handleImport}\r\n        />\r\n\r\n        <ResolvedStats stats={stats} />\r\n\r\n        <ResolvedFilters\r\n          filters={filters}\r\n          onFiltersChange={handleFiltersChange}\r\n        />\r\n\r\n        <BulkActions\r\n          selectedCount={selectedReports.size}\r\n          totalCount={resolved.length}\r\n          onSelectAll={selectAll}\r\n          onClearSelection={clearSelection}\r\n          onBulkRestore={handleBulkRestore}\r\n          onBulkDelete={handleBulkDelete}\r\n        />\r\n\r\n        <ResolvedList\r\n          reports={resolved}\r\n          expandedReports={expandedReports}\r\n          selectedReports={selectedReports}\r\n          onToggleExpanded={toggleExpanded}\r\n          onToggleSelected={toggleSelection}\r\n          onRestore={handleRestore}\r\n          onDelete={handleDelete}\r\n          filters={filters}\r\n        />\r\n\r\n        <RestoreModal\r\n          isOpen={showRestoreModal}\r\n          report={reportToRestore}\r\n          onClose={() => {\r\n            setShowRestoreModal(false);\r\n            setReportToRestore(null);\r\n          }}\r\n          onConfirm={confirmRestore}\r\n        />\r\n      </main>\r\n    </RequireAuth>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}