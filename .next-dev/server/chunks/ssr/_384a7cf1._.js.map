{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/gerom/OneDrive/Documents/pantypost/src/components/admin/bans/AppealReviewModal.tsx"],"sourcesContent":["// src/components/admin/bans/AppealReviewModal.tsx\r\n'use client';\r\n\r\nimport { useCallback } from 'react';\r\nimport { MessageSquare, CheckCircle, XCircle, AlertTriangle, Eye } from 'lucide-react';\r\nimport { SecureTextarea } from '@/components/ui/SecureInput';\r\nimport { SecureMessageDisplay } from '@/components/ui/SecureMessageDisplay';\r\nimport { sanitizeStrict } from '@/utils/security/sanitization';\r\nimport { BanEntry } from '@/types/ban';\r\n\r\ninterface AppealReviewModalProps {\r\n  ban: BanEntry | null;\r\n  appealReviewNotes: string;\r\n  setAppealReviewNotes: (notes: string) => void;\r\n  isLoading: boolean;\r\n  onClose: () => void;\r\n  onConfirm: (decision: 'approve' | 'reject' | 'escalate') => void;\r\n  onShowEvidence: (evidence: string[]) => void;\r\n}\r\n\r\nconst safeDate = (val: unknown): string => {\r\n  const d = new Date(String(val));\r\n  return isNaN(d.getTime()) ? 'Unknown' : d.toLocaleString();\r\n};\r\n\r\nconst humanize = (s: string) =>\r\n  sanitizeStrict(s)\r\n    .replace(/_/g, ' ')\r\n    .replace(/\\b\\w/g, (c) => c.toUpperCase());\r\n\r\nexport default function AppealReviewModal({\r\n  ban,\r\n  appealReviewNotes,\r\n  setAppealReviewNotes,\r\n  isLoading,\r\n  onClose,\r\n  onConfirm,\r\n  onShowEvidence\r\n}: AppealReviewModalProps) {\r\n  if (!ban) return null;\r\n\r\n  const handleDecision = (decision: 'approve' | 'reject' | 'escalate') => {\r\n    if (!appealReviewNotes.trim()) {\r\n      alert('Please provide review notes explaining your decision');\r\n      return;\r\n    }\r\n    onConfirm(decision);\r\n  };\r\n\r\n  const handleNotesChange = (value: string) => {\r\n    setAppealReviewNotes(sanitizeStrict(value));\r\n  };\r\n\r\n  const handleKeyDown = useCallback(\r\n    (e: React.KeyboardEvent<HTMLDivElement>) => {\r\n      if (e.key === 'Escape' && !isLoading) {\r\n        e.stopPropagation();\r\n        onClose();\r\n      }\r\n    },\r\n    [isLoading, onClose]\r\n  );\r\n\r\n  const handleOverlayClick = useCallback(\r\n    (e: React.MouseEvent<HTMLDivElement>) => {\r\n      if (e.currentTarget === e.target && !isLoading) onClose();\r\n    },\r\n    [isLoading, onClose]\r\n  );\r\n\r\n  // Sanitize fields rendered directly\r\n  const safeUsername = sanitizeStrict(ban.username || '');\r\n  const safeBanType = humanize(ban.banType || '');\r\n  const safeBannedBy = sanitizeStrict(ban.bannedBy || '');\r\n\r\n  // Build a guaranteed-string reason for display (avoid getBanReasonDisplay returning elements)\r\n  const rawReason =\r\n    ban.reason === 'other'\r\n      ? ban.customReason || 'Unknown Reason'\r\n      : typeof ban.reason === 'string'\r\n      ? ban.reason\r\n      : 'Unknown Reason';\r\n  const safeReasonDisplay = humanize(rawReason);\r\n\r\n  // Evidence: pass a definite string[] only\r\n  const evidenceList: string[] = Array.isArray(ban.appealEvidence)\r\n    ? ban.appealEvidence.filter((x): x is string => typeof x === 'string')\r\n    : [];\r\n  const hasEvidence = evidenceList.length > 0;\r\n\r\n  return (\r\n    <div\r\n      className=\"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4\"\r\n      role=\"dialog\"\r\n      aria-modal=\"true\"\r\n      aria-labelledby=\"appeal-review-title\"\r\n      onKeyDown={handleKeyDown}\r\n      onMouseDown={handleOverlayClick}\r\n    >\r\n      <div\r\n        className=\"bg-[#1a1a1a] border border-gray-800 rounded-lg p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto\"\r\n        onMouseDown={(e) => e.stopPropagation()}\r\n      >\r\n        <h3 id=\"appeal-review-title\" className=\"text-xl font-bold text-white mb-4 flex items-center\">\r\n          <MessageSquare className=\"mr-2 text-blue-400\" />\r\n          Review Appeal - <span className=\"ml-1\">{safeUsername}</span>\r\n        </h3>\r\n\r\n        {/* Original Ban Details */}\r\n        <div className=\"bg-[#222] border border-gray-700 rounded-lg p-4 mb-4\">\r\n          <h4 className=\"text-lg font-semibold text-white mb-2\">Original Ban</h4>\r\n          <div className=\"grid grid-cols-2 gap-4 text-sm\">\r\n            <div>\r\n              <span className=\"text-gray-400\">Reason:</span>\r\n              <div className=\"text-gray-300\">\r\n                <SecureMessageDisplay content={safeReasonDisplay} allowBasicFormatting={false} />\r\n              </div>\r\n            </div>\r\n            <div>\r\n              <span className=\"text-gray-400\">Type:</span>\r\n              <div className=\"text-gray-300\">\r\n                <SecureMessageDisplay content={safeBanType} allowBasicFormatting={false} />\r\n              </div>\r\n            </div>\r\n            <div>\r\n              <span className=\"text-gray-400\">Banned by:</span>\r\n              <div className=\"text-gray-300\">\r\n                <SecureMessageDisplay content={safeBannedBy} allowBasicFormatting={false} />\r\n              </div>\r\n            </div>\r\n            <div>\r\n              <span className=\"text-gray-400\">Date:</span>\r\n              <div className=\"text-gray-300\">{safeDate(ban.startTime)}</div>\r\n            </div>\r\n          </div>\r\n          {ban.notes && (\r\n            <div className=\"mt-2\">\r\n              <span className=\"text-gray-400\">Original Notes:</span>\r\n              <SecureMessageDisplay content={ban.notes} className=\"text-gray-300 mt-1\" allowBasicFormatting={false} />\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Appeal Details */}\r\n        <div className=\"bg-orange-900/10 border border-orange-800 rounded-lg p-4 mb-4\">\r\n          <div className=\"flex items-center justify-between mb-2\">\r\n            <h4 className=\"text-lg font-semibold text-orange-400\">User&apos;s Appeal</h4>\r\n            {hasEvidence && (\r\n              <button\r\n                onClick={() => onShowEvidence(evidenceList)}\r\n                className=\"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 flex items-center gap-1 transition-colors\"\r\n              >\r\n                <Eye size={14} />\r\n                View Evidence ({evidenceList.length})\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          <SecureMessageDisplay\r\n            content={ban.appealText || 'No appeal text provided'}\r\n            className=\"text-sm text-gray-300 mb-2\"\r\n            allowBasicFormatting={false}\r\n            maxLength={500}\r\n          />\r\n\r\n          <div className=\"text-xs text-gray-500\">Submitted: {ban.appealDate ? safeDate(ban.appealDate) : 'Unknown'}</div>\r\n        </div>\r\n\r\n        {/* Review Notes */}\r\n        <div className=\"mb-6\">\r\n          <SecureTextarea\r\n            label=\"Review Notes\"\r\n            value={appealReviewNotes}\r\n            onChange={handleNotesChange}\r\n            placeholder=\"Explain your decision and reasoning...\"\r\n            maxLength={1000}\r\n            characterCount={true}\r\n            required\r\n            rows={4}\r\n            sanitize={true}\r\n            sanitizer={sanitizeStrict}\r\n          />\r\n        </div>\r\n\r\n        {/* Action Buttons */}\r\n        <div className=\"flex gap-3\">\r\n          <button\r\n            onClick={onClose}\r\n            className=\"flex-1 px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition-colors\"\r\n            disabled={isLoading}\r\n          >\r\n            Cancel\r\n          </button>\r\n\r\n          <button\r\n            onClick={() => handleDecision('reject')}\r\n            className=\"flex-1 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 flex items-center justify-center transition-colors\"\r\n            disabled={isLoading}\r\n          >\r\n            {isLoading ? (\r\n              <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\" />\r\n            ) : (\r\n              <>\r\n                <XCircle size={16} className=\"mr-2\" />\r\n                Reject\r\n              </>\r\n            )}\r\n          </button>\r\n\r\n          <button\r\n            onClick={() => handleDecision('escalate')}\r\n            className=\"flex-1 px-4 py-2 bg-yellow-600 text-white rounded hover:bg-yellow-700 flex items-center justify-center transition-colors\"\r\n            disabled={isLoading}\r\n          >\r\n            {isLoading ? (\r\n              <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\" />\r\n            ) : (\r\n              <>\r\n                <AlertTriangle size={16} className=\"mr-2\" />\r\n                Escalate\r\n              </>\r\n            )}\r\n          </button>\r\n\r\n          <button\r\n            onClick={() => handleDecision('approve')}\r\n            className=\"flex-1 px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 flex items-center justify-center transition-colors\"\r\n            disabled={isLoading}\r\n          >\r\n            {isLoading ? (\r\n              <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\" />\r\n            ) : (\r\n              <>\r\n                <CheckCircle size={16} className=\"mr-2\" />\r\n                Approve\r\n              </>\r\n            )}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,kDAAkD;;;;;AAGlD;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AANA;;;;;;;AAmBA,MAAM,WAAW,CAAC;IAChB,MAAM,IAAI,IAAI,KAAK,OAAO;IAC1B,OAAO,MAAM,EAAE,OAAO,MAAM,YAAY,EAAE,cAAc;AAC1D;AAEA,MAAM,WAAW,CAAC,IAChB,CAAA,GAAA,wIAAA,CAAA,iBAAc,AAAD,EAAE,GACZ,OAAO,CAAC,MAAM,KACd,OAAO,CAAC,SAAS,CAAC,IAAM,EAAE,WAAW;AAE3B,SAAS,kBAAkB,EACxC,GAAG,EACH,iBAAiB,EACjB,oBAAoB,EACpB,SAAS,EACT,OAAO,EACP,SAAS,EACT,cAAc,EACS;IACvB,IAAI,CAAC,KAAK,OAAO;IAEjB,MAAM,iBAAiB,CAAC;QACtB,IAAI,CAAC,kBAAkB,IAAI,IAAI;YAC7B,MAAM;YACN;QACF;QACA,UAAU;IACZ;IAEA,MAAM,oBAAoB,CAAC;QACzB,qBAAqB,CAAA,GAAA,wIAAA,CAAA,iBAAc,AAAD,EAAE;IACtC;IAEA,MAAM,gBAAgB,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAC9B,CAAC;QACC,IAAI,EAAE,GAAG,KAAK,YAAY,CAAC,WAAW;YACpC,EAAE,eAAe;YACjB;QACF;IACF,GACA;QAAC;QAAW;KAAQ;IAGtB,MAAM,qBAAqB,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EACnC,CAAC;QACC,IAAI,EAAE,aAAa,KAAK,EAAE,MAAM,IAAI,CAAC,WAAW;IAClD,GACA;QAAC;QAAW;KAAQ;IAGtB,oCAAoC;IACpC,MAAM,eAAe,CAAA,GAAA,wIAAA,CAAA,iBAAc,AAAD,EAAE,IAAI,QAAQ,IAAI;IACpD,MAAM,cAAc,SAAS,IAAI,OAAO,IAAI;IAC5C,MAAM,eAAe,CAAA,GAAA,wIAAA,CAAA,iBAAc,AAAD,EAAE,IAAI,QAAQ,IAAI;IAEpD,8FAA8F;IAC9F,MAAM,YACJ,IAAI,MAAM,KAAK,UACX,IAAI,YAAY,IAAI,mBACpB,OAAO,IAAI,MAAM,KAAK,WACtB,IAAI,MAAM,GACV;IACN,MAAM,oBAAoB,SAAS;IAEnC,0CAA0C;IAC1C,MAAM,eAAyB,MAAM,OAAO,CAAC,IAAI,cAAc,IAC3D,IAAI,cAAc,CAAC,MAAM,CAAC,CAAC,IAAmB,OAAO,MAAM,YAC3D,EAAE;IACN,MAAM,cAAc,aAAa,MAAM,GAAG;IAE1C,qBACE,8OAAC;QACC,WAAU;QACV,MAAK;QACL,cAAW;QACX,mBAAgB;QAChB,WAAW;QACX,aAAa;kBAEb,cAAA,8OAAC;YACC,WAAU;YACV,aAAa,CAAC,IAAM,EAAE,eAAe;;8BAErC,8OAAC;oBAAG,IAAG;oBAAsB,WAAU;;sCACrC,8OAAC,wNAAA,CAAA,gBAAa;4BAAC,WAAU;;;;;;wBAAuB;sCAChC,8OAAC;4BAAK,WAAU;sCAAQ;;;;;;;;;;;;8BAI1C,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAG,WAAU;sCAAwC;;;;;;sCACtD,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;;sDACC,8OAAC;4CAAK,WAAU;sDAAgB;;;;;;sDAChC,8OAAC;4CAAI,WAAU;sDACb,cAAA,8OAAC,gJAAA,CAAA,uBAAoB;gDAAC,SAAS;gDAAmB,sBAAsB;;;;;;;;;;;;;;;;;8CAG5E,8OAAC;;sDACC,8OAAC;4CAAK,WAAU;sDAAgB;;;;;;sDAChC,8OAAC;4CAAI,WAAU;sDACb,cAAA,8OAAC,gJAAA,CAAA,uBAAoB;gDAAC,SAAS;gDAAa,sBAAsB;;;;;;;;;;;;;;;;;8CAGtE,8OAAC;;sDACC,8OAAC;4CAAK,WAAU;sDAAgB;;;;;;sDAChC,8OAAC;4CAAI,WAAU;sDACb,cAAA,8OAAC,gJAAA,CAAA,uBAAoB;gDAAC,SAAS;gDAAc,sBAAsB;;;;;;;;;;;;;;;;;8CAGvE,8OAAC;;sDACC,8OAAC;4CAAK,WAAU;sDAAgB;;;;;;sDAChC,8OAAC;4CAAI,WAAU;sDAAiB,SAAS,IAAI,SAAS;;;;;;;;;;;;;;;;;;wBAGzD,IAAI,KAAK,kBACR,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAK,WAAU;8CAAgB;;;;;;8CAChC,8OAAC,gJAAA,CAAA,uBAAoB;oCAAC,SAAS,IAAI,KAAK;oCAAE,WAAU;oCAAqB,sBAAsB;;;;;;;;;;;;;;;;;;8BAMrG,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAG,WAAU;8CAAwC;;;;;;gCACrD,6BACC,8OAAC;oCACC,SAAS,IAAM,eAAe;oCAC9B,WAAU;;sDAEV,8OAAC,gMAAA,CAAA,MAAG;4CAAC,MAAM;;;;;;wCAAM;wCACD,aAAa,MAAM;wCAAC;;;;;;;;;;;;;sCAK1C,8OAAC,gJAAA,CAAA,uBAAoB;4BACnB,SAAS,IAAI,UAAU,IAAI;4BAC3B,WAAU;4BACV,sBAAsB;4BACtB,WAAW;;;;;;sCAGb,8OAAC;4BAAI,WAAU;;gCAAwB;gCAAY,IAAI,UAAU,GAAG,SAAS,IAAI,UAAU,IAAI;;;;;;;;;;;;;8BAIjG,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC,uIAAA,CAAA,iBAAc;wBACb,OAAM;wBACN,OAAO;wBACP,UAAU;wBACV,aAAY;wBACZ,WAAW;wBACX,gBAAgB;wBAChB,QAAQ;wBACR,MAAM;wBACN,UAAU;wBACV,WAAW,wIAAA,CAAA,iBAAc;;;;;;;;;;;8BAK7B,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BACC,SAAS;4BACT,WAAU;4BACV,UAAU;sCACX;;;;;;sCAID,8OAAC;4BACC,SAAS,IAAM,eAAe;4BAC9B,WAAU;4BACV,UAAU;sCAET,0BACC,8OAAC;gCAAI,WAAU;;;;;qDAEf;;kDACE,8OAAC,4MAAA,CAAA,UAAO;wCAAC,MAAM;wCAAI,WAAU;;;;;;oCAAS;;;;;;;;sCAM5C,8OAAC;4BACC,SAAS,IAAM,eAAe;4BAC9B,WAAU;4BACV,UAAU;sCAET,0BACC,8OAAC;gCAAI,WAAU;;;;;qDAEf;;kDACE,8OAAC,wNAAA,CAAA,gBAAa;wCAAC,MAAM;wCAAI,WAAU;;;;;;oCAAS;;;;;;;;sCAMlD,8OAAC;4BACC,SAAS,IAAM,eAAe;4BAC9B,WAAU;4BACV,UAAU;sCAET,0BACC,8OAAC;gCAAI,WAAU;;;;;qDAEf;;kDACE,8OAAC,2NAAA,CAAA,cAAW;wCAAC,MAAM;wCAAI,WAAU;;;;;;oCAAS;;;;;;;;;;;;;;;;;;;;;;;;;AAS1D","debugId":null}},
    {"offset": {"line": 483, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/lucide-react/dist/esm/icons/circle-x.js","sources":["file:///C:/Users/gerom/OneDrive/Documents/pantypost/node_modules/lucide-react/src/icons/circle-x.ts"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['path', { d: 'm15 9-6 6', key: '1uzhvr' }],\n  ['path', { d: 'm9 9 6 6', key: 'z0biqf' }],\n];\n\n/**\n * @component @name CircleX\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8cGF0aCBkPSJtMTUgOS02IDYiIC8+CiAgPHBhdGggZD0ibTkgOSA2IDYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/circle-x\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst CircleX = createLucideIcon('circle-x', __iconNode);\n\nexport default CircleX;\n"],"names":[],"mappings":";;;;;;;;;;;AAGO,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,UAAuB,CAAA,CAAA,CAAA,CAAA;IAClC;QAAC,QAAU,CAAA;QAAA,CAAA;YAAE,EAAI,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;YAAM,CAAI,CAAA,CAAA,CAAA,IAAA,CAAM;YAAA,CAAG,EAAA,CAAA,CAAA,CAAA,CAAA,CAAA;YAAM,GAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QAAA,CAAU;KAAA,CAAA;IACzD;QAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAQ,CAAA;QAAA,CAAA;YAAE,GAAG,CAAa,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;YAAA,CAAA,CAAA,CAAA,CAAA,CAAK;QAAA,CAAU;KAAA,CAAA;IAC1C;QAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAQ,CAAA;QAAA,CAAA;YAAE,GAAG,CAAY,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;YAAA,CAAA,CAAA,CAAA,CAAA,CAAK;QAAA,CAAU;KAAA;CAC3C,CAAA;AAaM,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,OAAA,CAAU,CAAA,wKAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAiB,CAAjB,CAAA,AAAiB,CAAjB,AAAiB,CAAjB,AAAiB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAY,CAAU,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA","debugId":null}}]
}