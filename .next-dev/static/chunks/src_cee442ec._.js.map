{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/osr99/OneDrive/Documents/GitHub/pantypost/src/components/RequireAuth.tsx"],"sourcesContent":["// src/components/RequireAuth.tsx\r\n'use client';\r\n\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useEffect, useState } from 'react';\r\nimport { z } from 'zod';\r\n\r\nconst VALID_ROLES = ['buyer', 'seller', 'admin'] as const;\r\ntype ValidRole = (typeof VALID_ROLES)[number];\r\n\r\nconst RoleSchema = z.enum(VALID_ROLES);\r\n\r\nexport default function RequireAuth({\r\n  role,\r\n  children,\r\n}: {\r\n  role: ValidRole;\r\n  children: React.ReactNode;\r\n}) {\r\n  const { user, isAuthReady } = useAuth();\r\n  const router = useRouter();\r\n  const [authorized, setAuthorized] = useState(false);\r\n  const [hasChecked, setHasChecked] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!isAuthReady || hasChecked) return;\r\n\r\n    // Runtime validation of `role` prop (dev-only noise)\r\n    const parsed = RoleSchema.safeParse(role);\r\n    if (!parsed.success) {\r\n      if (process.env.NODE_ENV === 'development') {\r\n        console.warn('[RequireAuth] Invalid role prop supplied:', role);\r\n      }\r\n      router.push('/login');\r\n      setHasChecked(true);\r\n      return;\r\n    }\r\n\r\n    const userRole = user?.role as ValidRole | undefined;\r\n\r\n    // NEW: strict role matching — no admin override for buyer/seller routes\r\n    let hasAccess = false;\r\n    if (parsed.data === 'admin') {\r\n      hasAccess = userRole === 'admin';\r\n    } else {\r\n      hasAccess = userRole === parsed.data; // admin can’t view buyer/seller pages\r\n    }\r\n\r\n    if (!user || !hasAccess) {\r\n      router.push('/login');\r\n    } else {\r\n      setAuthorized(true);\r\n    }\r\n\r\n    setHasChecked(true);\r\n  }, [isAuthReady, user, role, router, hasChecked]);\r\n\r\n  if (!isAuthReady || !hasChecked) {\r\n    return (\r\n      <div className=\"min-h-screen bg-black flex items-center justify-center\" role=\"status\" aria-label=\"Checking access\">\r\n        <div className=\"flex items-center space-x-2\">\r\n          <div className=\"w-4 h-4 bg-[#ff950e] rounded-full animate-pulse\" />\r\n          <div className=\"w-4 h-4 bg-[#ff950e] rounded-full animate-pulse\" style={{ animationDelay: '0.2s' }} />\r\n          <div className=\"w-4 h-4 bg-[#ff950e] rounded-full animate-pulse\" style={{ animationDelay: '0.4s' }} />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!authorized) return null;\r\n\r\n  return <>{children}</>;\r\n}\r\n"],"names":[],"mappings":"AAAA,iCAAiC;;;;AA+BvB;;AA5BV;AACA;AACA;AACA;;;AALA;;;;;AAOA,MAAM,cAAc;IAAC;IAAS;IAAU;CAAQ;AAGhD,MAAM,aAAa,qKAAA,CAAA,IAAC,CAAC,IAAI,CAAC;;AAEX,SAAS,YAAY,KAMnC;QANmC,EAClC,IAAI,EACJ,QAAQ,EAIT,GANmC;;IAOlC,MAAM,EAAE,IAAI,EAAE,WAAW,EAAE,GAAG,CAAA,GAAA,iIAAA,CAAA,UAAO,AAAD;IACpC,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC7C,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAE7C,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;iCAAE;YACR,IAAI,CAAC,eAAe,YAAY;YAEhC,qDAAqD;YACrD,MAAM,SAAS,WAAW,SAAS,CAAC;YACpC,IAAI,CAAC,OAAO,OAAO,EAAE;gBACnB,wCAA4C;oBAC1C,QAAQ,IAAI,CAAC,6CAA6C;gBAC5D;gBACA,OAAO,IAAI,CAAC;gBACZ,cAAc;gBACd;YACF;YAEA,MAAM,WAAW,iBAAA,2BAAA,KAAM,IAAI;YAE3B,wEAAwE;YACxE,IAAI,YAAY;YAChB,IAAI,OAAO,IAAI,KAAK,SAAS;gBAC3B,YAAY,aAAa;YAC3B,OAAO;gBACL,YAAY,aAAa,OAAO,IAAI,EAAE,sCAAsC;YAC9E;YAEA,IAAI,CAAC,QAAQ,CAAC,WAAW;gBACvB,OAAO,IAAI,CAAC;YACd,OAAO;gBACL,cAAc;YAChB;YAEA,cAAc;QAChB;gCAAG;QAAC;QAAa;QAAM;QAAM;QAAQ;KAAW;IAEhD,IAAI,CAAC,eAAe,CAAC,YAAY;QAC/B,qBACE,6LAAC;YAAI,WAAU;YAAyD,MAAK;YAAS,cAAW;sBAC/F,cAAA,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;;;;;kCACf,6LAAC;wBAAI,WAAU;wBAAkD,OAAO;4BAAE,gBAAgB;wBAAO;;;;;;kCACjG,6LAAC;wBAAI,WAAU;wBAAkD,OAAO;4BAAE,gBAAgB;wBAAO;;;;;;;;;;;;;;;;;IAIzG;IAEA,IAAI,CAAC,YAAY,OAAO;IAExB,qBAAO;kBAAG;;AACZ;GA5DwB;;QAOQ,iIAAA,CAAA,UAAO;QACtB,qIAAA,CAAA,YAAS;;;MARF","debugId":null}},
    {"offset": {"line": 144, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/osr99/OneDrive/Documents/GitHub/pantypost/src/utils/myListingsUtils.ts"],"sourcesContent":["// src/utils/myListingsUtils.ts\r\n\r\nimport { ListingFormState } from '@/types/myListings';\r\n\r\nexport const INITIAL_FORM_STATE: ListingFormState = {\r\n  title: '',\r\n  description: '',\r\n  price: '',\r\n  imageUrls: [],\r\n  isPremium: false,\r\n  tags: '',\r\n  hoursWorn: '',\r\n  isAuction: false,\r\n  startingPrice: '',\r\n  reservePrice: '',\r\n  auctionDuration: '3'\r\n};\r\n\r\n/**\r\n * Calculate auction end time based on duration\r\n * @param duration - Duration in days as string (can be fractional for minutes/hours)\r\n * @returns Date string for the auction end time\r\n */\r\nexport const calculateAuctionEndTime = (duration: string): string => {\r\n  const days = parseFloat(duration); // Use parseFloat instead of parseInt\r\n  const endTime = new Date();\r\n  \r\n  // Convert days to milliseconds and add to current time\r\n  const millisecondsToAdd = days * 24 * 60 * 60 * 1000;\r\n  endTime.setTime(endTime.getTime() + millisecondsToAdd);\r\n  \r\n  return endTime.toISOString();\r\n};\r\n\r\n/**\r\n * Format price for display\r\n * @param price - Price as number\r\n * @returns Formatted price string\r\n */\r\nexport const formatPrice = (price: number): string => {\r\n  return new Intl.NumberFormat('en-US', {\r\n    style: 'currency',\r\n    currency: 'USD',\r\n    minimumFractionDigits: 2,\r\n    maximumFractionDigits: 2,\r\n  }).format(price);\r\n};\r\n\r\n/**\r\n * Get time remaining for an auction\r\n * @param endTime - Auction end time as string\r\n * @returns Object with days, hours, minutes remaining\r\n */\r\nexport const getTimeRemaining = (endTime: string): { days: number; hours: number; minutes: number; ended: boolean } => {\r\n  const end = new Date(endTime);\r\n  const now = new Date();\r\n  const diff = end.getTime() - now.getTime();\r\n\r\n  if (diff <= 0) {\r\n    return { days: 0, hours: 0, minutes: 0, ended: true };\r\n  }\r\n\r\n  const days = Math.floor(diff / (1000 * 60 * 60 * 24));\r\n  const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));\r\n  const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));\r\n\r\n  return { days, hours, minutes, ended: false };\r\n};\r\n\r\n/**\r\n * Validate listing form data\r\n * @param formState - Current form state\r\n * @param isVerified - Whether user is verified\r\n * @returns Object with isValid and error message\r\n */\r\nexport const validateListingForm = (\r\n  formState: ListingFormState,\r\n  isVerified: boolean\r\n): { isValid: boolean; error?: string } => {\r\n  const { title, description, imageUrls, isAuction, startingPrice, price } = formState;\r\n\r\n  if (!title || !description || imageUrls.length === 0) {\r\n    return { isValid: false, error: 'Please fill in all required fields and add at least one image.' };\r\n  }\r\n\r\n  if (isAuction) {\r\n    if (!isVerified) {\r\n      return { isValid: false, error: 'You must be a verified seller to create auction listings.' };\r\n    }\r\n\r\n    const startingBid = parseFloat(startingPrice);\r\n    if (isNaN(startingBid) || startingBid <= 0) {\r\n      return { isValid: false, error: 'Please enter a valid starting bid for the auction.' };\r\n    }\r\n  } else {\r\n    const numericPrice = parseFloat(price);\r\n    if (isNaN(numericPrice) || numericPrice <= 0) {\r\n      return { isValid: false, error: 'Please enter a valid price.' };\r\n    }\r\n  }\r\n\r\n  return { isValid: true };\r\n};\r\n\r\n/**\r\n * Parse tags from comma-separated string\r\n * @param tagsString - Comma-separated tags\r\n * @returns Array of trimmed tag strings\r\n */\r\nexport const parseTags = (tagsString: string): string[] => {\r\n  return tagsString\r\n    .split(',')\r\n    .map(tag => tag.trim())\r\n    .filter(tag => tag.length > 0);\r\n};\r\n\r\n/**\r\n * Get listing type label\r\n * @param listing - Listing object\r\n * @returns Type label string\r\n */\r\nexport const getListingTypeLabel = (listing: any): string => {\r\n  if (listing.auction) return 'Auction';\r\n  if (listing.isPremium) return 'Premium';\r\n  return 'Standard';\r\n};\r\n\r\n/**\r\n * Get listing type color classes\r\n * @param listing - Listing object\r\n * @returns Color class string\r\n */\r\nexport const getListingTypeColor = (listing: any): string => {\r\n  if (listing.auction) return 'text-purple-500 border-purple-500';\r\n  if (listing.isPremium) return 'text-yellow-500 border-yellow-500';\r\n  return 'text-green-500 border-green-500';\r\n};\r\n\r\n/**\r\n * Get time since listing was created\r\n * @param createdAt - Creation date string\r\n * @returns Formatted time string\r\n */\r\nexport const timeSinceListed = (createdAt: string): string => {\r\n  const created = new Date(createdAt);\r\n  const now = new Date();\r\n  const diffMs = now.getTime() - created.getTime();\r\n  \r\n  const minutes = Math.floor(diffMs / (1000 * 60));\r\n  const hours = Math.floor(diffMs / (1000 * 60 * 60));\r\n  const days = Math.floor(diffMs / (1000 * 60 * 60 * 24));\r\n  \r\n  if (minutes < 60) {\r\n    return `${minutes} minute${minutes !== 1 ? 's' : ''} ago`;\r\n  } else if (hours < 24) {\r\n    return `${hours} hour${hours !== 1 ? 's' : ''} ago`;\r\n  } else {\r\n    return `${days} day${days !== 1 ? 's' : ''} ago`;\r\n  }\r\n};\r\n\r\n/**\r\n * Format time remaining for display\r\n * @param endTime - End time as string\r\n * @returns Formatted time remaining string\r\n */\r\nexport const formatTimeRemaining = (endTime: string): string => {\r\n  const { days, hours, minutes, ended } = getTimeRemaining(endTime);\r\n  \r\n  if (ended) {\r\n    return 'Ended';\r\n  }\r\n  \r\n  if (days > 0) {\r\n    return `${days}d ${hours}h`;\r\n  } else if (hours > 0) {\r\n    return `${hours}h ${minutes}m`;\r\n  } else {\r\n    return `${minutes}m`;\r\n  }\r\n};"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 293, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/osr99/OneDrive/Documents/GitHub/pantypost/src/components/myListings/ListingCard.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { Eye, Edit, Trash2, Gavel, Crown, Clock, Calendar, X } from 'lucide-react';\r\nimport { ListingCardProps } from '@/types/myListings';\r\nimport { timeSinceListed, formatTimeRemaining } from '@/utils/myListingsUtils';\r\nimport { SecureImage } from '@/components/ui/SecureMessageDisplay';\r\n\r\nexport default function ListingCard({\r\n  listing,\r\n  analytics,\r\n  onEdit,\r\n  onDelete,\r\n  onCancelAuction,\r\n}: ListingCardProps) {\r\n  const isAuctionListing = !!listing.auction;\r\n\r\n  const cover = listing.imageUrls?.[0] ?? '';\r\n\r\n  const currentBid = (() => {\r\n    if (!isAuctionListing || !listing.auction) return null;\r\n    const bid =\r\n      typeof listing.auction.highestBid === 'number' && listing.auction.highestBid > 0\r\n        ? listing.auction.highestBid\r\n        : listing.auction.startingPrice;\r\n    return `$${Number(bid).toFixed(2)}`;\r\n  })();\r\n\r\n  return (\r\n    <div\r\n      className={`border rounded-xl overflow-hidden shadow-lg hover:shadow-xl transition relative flex flex-col h-full ${\r\n        isAuctionListing ? 'border-purple-700 bg-black' : listing.isPremium ? 'border-[#ff950e] bg-black' : 'border-gray-700 bg-black'\r\n      }`}\r\n    >\r\n      {isAuctionListing && (\r\n        <div className=\"absolute top-4 right-4 z-10\">\r\n          <span className=\"bg-purple-600 text-white text-xs px-3 py-1.5 rounded-full font-bold flex items-center shadow\">\r\n            <Gavel className=\"w-4 h-4 mr-1\" /> Auction\r\n          </span>\r\n        </div>\r\n      )}\r\n\r\n      {!isAuctionListing && listing.isPremium && (\r\n        <div className=\"absolute top-4 right-4 z-10\">\r\n          <span className=\"bg-[#ff950e] text-black text-xs px-3 py-1.5 rounded-full font-bold flex items-center shadow\">\r\n            <Crown className=\"w-4 h-4 mr-1\" /> Premium\r\n          </span>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"relative w-full h-48 sm:h-56 overflow-hidden\">\r\n        {cover ? (\r\n          <SecureImage src={cover} alt={listing.title} className=\"w-full h-full object-cover\" />\r\n        ) : (\r\n          <div className=\"w-full h-full bg-gray-800\" />\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"p-5 flex flex-col flex-grow\">\r\n        <h3 className=\"text-xl font-bold text-white mb-2\">{listing.title}</h3>\r\n        <p className=\"text-gray-400 text-sm mb-3 line-clamp-2 flex-grow\">{listing.description}</p>\r\n\r\n        {listing.tags && listing.tags.length > 0 && (\r\n          <div className=\"flex flex-wrap gap-2 mt-auto mb-3\">\r\n            {listing.tags.map((tag, idx) => (\r\n              <span key={idx} className=\"bg-gray-700 text-gray-300 text-xs px-2.5 py-1 rounded-full\">\r\n                {tag}\r\n              </span>\r\n            ))}\r\n          </div>\r\n        )}\r\n\r\n        {isAuctionListing && listing.auction && (\r\n          <div className=\"bg-purple-900/20 rounded-lg p-3 mb-3 border border-purple-800\">\r\n            <div className=\"flex justify-between items-center mb-1\">\r\n              <span className=\"text-sm text-purple-300 flex items-center gap-1\">\r\n                <Gavel className=\"w-3 h-3\" /> Current Bid:\r\n              </span>\r\n              <span className=\"font-bold text-white\">{currentBid}</span>\r\n            </div>\r\n            <div className=\"flex justify-between items-center\">\r\n              <span className=\"text-sm text-purple-300 flex items-center gap-1\">\r\n                <Calendar className=\"w-3 h-3\" /> Ends:\r\n              </span>\r\n              <span className=\"text-sm text-white\">{formatTimeRemaining(listing.auction.endTime)}</span>\r\n            </div>\r\n            <div className=\"text-xs text-gray-400 mt-1\">\r\n              {(listing.auction.bids?.length ?? 0)} {listing.auction.bids?.length === 1 ? 'bid' : 'bids'} placed\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"flex items-center justify-between text-sm text-gray-400 bg-gray-800 rounded-lg p-3 mt-auto\">\r\n          <span className=\"flex items-center gap-1\">\r\n            <Eye className=\"w-4 h-4 text-[#ff950e]\" /> {analytics.views} views\r\n          </span>\r\n          <span className=\"flex items-center gap-1\">\r\n            <Clock className=\"w-4 h-4 text-gray-500\" /> {timeSinceListed(listing.date)}\r\n          </span>\r\n        </div>\r\n\r\n        <div className=\"flex justify-between items-center mt-4 pt-4 border-t border-gray-700\">\r\n          <p className={`font-bold text-xl ${isAuctionListing ? 'text-purple-400' : 'text-[#ff950e]'}`}>\r\n            {isAuctionListing && listing.auction\r\n              ? `$${Number(listing.auction.startingPrice).toFixed(2)} start`\r\n              : `$${Number(listing.price).toFixed(2)}`}\r\n          </p>\r\n          <div className=\"flex gap-2\">\r\n            {isAuctionListing && listing.auction?.status === 'active' && (\r\n              <button\r\n                onClick={() => onCancelAuction(listing.id)}\r\n                className=\"text-red-400 p-2 rounded-full hover:bg-gray-800 transition\"\r\n                aria-label=\"Cancel auction\"\r\n                title=\"Cancel auction\"\r\n              >\r\n                <X className=\"w-5 h-5\" />\r\n              </button>\r\n            )}\r\n            {(!isAuctionListing || (listing.auction && listing.auction.status !== 'active')) && (\r\n              <button\r\n                onClick={() => onEdit(listing)}\r\n                className=\"text-blue-400 p-2 rounded-full hover:bg-gray-800 transition\"\r\n                aria-label=\"Edit listing\"\r\n                title=\"Edit listing\"\r\n              >\r\n                <Edit className=\"w-5 h-5\" />\r\n              </button>\r\n            )}\r\n            <button\r\n              onClick={() => {\r\n                if (confirm('Are you sure you want to delete this listing?')) onDelete(listing.id);\r\n              }}\r\n              className=\"text-red-500 p-2 rounded-full hover:bg-gray-800 transition\"\r\n              aria-label=\"Delete listing\"\r\n              title=\"Delete listing\"\r\n            >\r\n              <Trash2 className=\"w-5 h-5\" />\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 671, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/osr99/OneDrive/Documents/GitHub/pantypost/src/components/ui/SecureForm.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { FormEvent, useState, useEffect } from 'react';\r\nimport { AlertCircle, ShieldCheck, Loader2 } from 'lucide-react';\r\nimport { getRateLimiter, getRateLimitMessage } from '@/utils/security/rate-limiter';\r\n\r\ninterface SecureFormProps {\r\n  children: React.ReactNode;\r\n  onSubmit: (e: FormEvent) => Promise<void> | void;\r\n  className?: string;\r\n  rateLimitKey?: string;\r\n  rateLimitConfig?: { maxAttempts: number; windowMs: number };\r\n  showSecurityBadge?: boolean;\r\n  csrfProtection?: boolean;\r\n  isRateLimited?: boolean;\r\n  rateLimitWaitTime?: number;\r\n}\r\n\r\n/**\r\n * Secure form wrapper with CSRF protection and rate limiting\r\n */\r\nexport const SecureForm: React.FC<SecureFormProps> = ({\r\n  children,\r\n  onSubmit,\r\n  className = '',\r\n  rateLimitKey,\r\n  rateLimitConfig,\r\n  showSecurityBadge = false,\r\n  csrfProtection = true,\r\n  isRateLimited = false,\r\n  rateLimitWaitTime = 0,\r\n}) => {\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [rateLimitError, setRateLimitError] = useState<string | null>(null);\r\n  const [csrfToken, setCsrfToken] = useState<string>('');\r\n\r\n  // Initialize CSRF token\r\n  useEffect(() => {\r\n    if (csrfProtection && typeof window !== 'undefined') {\r\n      const tokenManager = new CSRFTokenManager();\r\n      const token = tokenManager.generateToken();\r\n      setCsrfToken(token);\r\n    }\r\n  }, [csrfProtection]);\r\n\r\n  // Update rate limit error when props change\r\n  useEffect(() => {\r\n    if (isRateLimited && rateLimitWaitTime > 0) {\r\n      setRateLimitError(\r\n        `Too many attempts. Please wait ${rateLimitWaitTime} seconds before trying again.`\r\n      );\r\n    } else {\r\n      setRateLimitError(null);\r\n    }\r\n  }, [isRateLimited, rateLimitWaitTime]);\r\n\r\n  const handleSubmit = async (e: FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    // Don't submit if externally rate limited\r\n    if (isRateLimited) {\r\n      return;\r\n    }\r\n\r\n    // Clear previous errors\r\n    setRateLimitError(null);\r\n\r\n    // Check rate limit if configured and not already checked externally\r\n    if (rateLimitKey && rateLimitConfig && !isRateLimited) {\r\n      const limiter = getRateLimiter();\r\n      const result = limiter.check(rateLimitKey, rateLimitConfig);\r\n\r\n      if (!result.allowed) {\r\n        setRateLimitError(getRateLimitMessage(result));\r\n        return;\r\n      }\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n\r\n    try {\r\n      await onSubmit(e);\r\n    } catch (error) {\r\n      console.error('Form submission error:', error);\r\n\r\n      // If it's a rate limit error, reset the attempt\r\n      if (rateLimitKey && error instanceof Error && error.message.includes('Rate limit')) {\r\n        const limiter = getRateLimiter();\r\n        limiter.reset(rateLimitKey);\r\n      }\r\n\r\n      throw error;\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className={className} noValidate>\r\n      {/* CSRF Token (hidden) */}\r\n      {csrfProtection && csrfToken && <input type=\"hidden\" name=\"_csrf\" value={csrfToken} />}\r\n\r\n      {/* Security Badge */}\r\n      {showSecurityBadge && (\r\n        <div className=\"mb-4 flex items-center gap-2 text-xs text-gray-500\">\r\n          <ShieldCheck className=\"w-4 h-4\" />\r\n          <span>Secure form with protection against attacks</span>\r\n        </div>\r\n      )}\r\n\r\n      {/* Rate Limit Error - only show if not handled externally */}\r\n      {rateLimitError && !isRateLimited && (\r\n        <div className=\"mb-4 p-3 bg-red-500/10 border border-red-500/20 rounded-lg\">\r\n          <div className=\"flex items-center gap-2 text-sm text-red-400\">\r\n            <AlertCircle className=\"w-4 h-4 flex-shrink-0\" />\r\n            <span>{rateLimitError}</span>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Form Content */}\r\n      {children}\r\n    </form>\r\n  );\r\n};\r\n\r\n/**\r\n * Field wrapper for consistent styling and error handling\r\n */\r\ninterface SecureFieldWrapperProps {\r\n  children: React.ReactNode;\r\n  error?: string;\r\n  touched?: boolean;\r\n  className?: string;\r\n}\r\n\r\nexport const SecureFieldWrapper: React.FC<SecureFieldWrapperProps> = ({\r\n  children,\r\n  error,\r\n  touched,\r\n  className = '',\r\n}) => (\r\n  <div className={className}>\r\n    {children}\r\n    {touched && error && (\r\n      <div className=\"mt-1 flex items-center gap-1 text-xs text-red-400\">\r\n        <AlertCircle className=\"w-3 h-3 flex-shrink-0\" />\r\n        <span>{error}</span>\r\n      </div>\r\n    )}\r\n  </div>\r\n);\r\n\r\n/**\r\n * Secure submit button with loading state\r\n */\r\ninterface SecureSubmitButtonProps {\r\n  children: React.ReactNode;\r\n  isLoading?: boolean;\r\n  isDisabled?: boolean;\r\n  className?: string;\r\n  loadingText?: string;\r\n  type?: 'submit' | 'button';\r\n  disabled?: boolean;\r\n}\r\n\r\nexport const SecureSubmitButton: React.FC<SecureSubmitButtonProps> = ({\r\n  children,\r\n  isLoading = false,\r\n  isDisabled = false,\r\n  disabled = false,\r\n  className = '',\r\n  loadingText = 'Processing...',\r\n  type = 'submit',\r\n}) => (\r\n  <button\r\n    type={type}\r\n    disabled={isLoading || isDisabled || disabled}\r\n    className={`relative ${className} ${\r\n      isLoading || isDisabled || disabled ? 'opacity-50 cursor-not-allowed' : ''\r\n    }`}\r\n  >\r\n    {isLoading ? (\r\n      <span className=\"flex items-center justify-center gap-2\">\r\n        <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n        {loadingText}\r\n      </span>\r\n    ) : (\r\n      children\r\n    )}\r\n  </button>\r\n);\r\n\r\n/**\r\n * CSRF Token Manager for form protection\r\n */\r\nclass CSRFTokenManager {\r\n  private tokenKey = 'csrf_token';\r\n  private tokenExpiry = 60 * 60 * 1000; // 1 hour\r\n\r\n  generateToken(): string {\r\n    const token = this.createSecureToken();\r\n    const expiry = Date.now() + this.tokenExpiry;\r\n\r\n    if (typeof window !== 'undefined') {\r\n      sessionStorage.setItem(this.tokenKey, JSON.stringify({ token, expiry }));\r\n    }\r\n\r\n    return token;\r\n  }\r\n\r\n  validateToken(token: string): boolean {\r\n    if (typeof window === 'undefined') return false;\r\n\r\n    try {\r\n      const stored = sessionStorage.getItem(this.tokenKey);\r\n      if (!stored) return false;\r\n\r\n      const { token: storedToken, expiry } = JSON.parse(stored);\r\n\r\n      if (Date.now() > expiry) {\r\n        sessionStorage.removeItem(this.tokenKey);\r\n        return false;\r\n      }\r\n\r\n      return token === storedToken;\r\n    } catch {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  private createSecureToken(): string {\r\n    const array = new Uint8Array(32);\r\n    crypto.getRandomValues(array);\r\n    return Array.from(array, (byte) => byte.toString(16).padStart(2, '0')).join('');\r\n  }\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 950, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/osr99/OneDrive/Documents/GitHub/pantypost/src/components/myListings/ListingForm.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { ListingFormProps } from '@/types/myListings';\r\nimport {\r\n  Sparkles,\r\n  Gavel,\r\n  Lock as LockIcon,\r\n  ImagePlus as ImageIcon,\r\n  Upload,\r\n  X,\r\n  MoveVertical,\r\n  Edit,\r\n  AlertCircle,\r\n  Crown,\r\n  CheckCircle,\r\n} from 'lucide-react';\r\nimport Link from 'next/link';\r\nimport { SecureInput, SecureTextarea } from '@/components/ui/SecureInput';\r\nimport { SecureForm } from '@/components/ui/SecureForm';\r\nimport { SecureImage } from '@/components/ui/SecureMessageDisplay';\r\nimport { useState, useCallback, useMemo } from 'react';\r\nimport { sanitizeStrict, sanitizeNumber, sanitizeCurrency } from '@/utils/security/sanitization';\r\nimport { securityService } from '@/services/security.service';\r\nimport { listingSchemas } from '@/utils/validation/schemas';\r\nimport { validateSchema } from '@/utils/validation/schemas';\r\n\r\n// Character requirements from schemas\r\nconst VALIDATION_REQUIREMENTS = {\r\n  title: { min: 5, max: 100 },\r\n  description: { min: 20, max: 2000 },\r\n  price: { min: 0.01, max: 10000 },\r\n  tags: { max: 200 },\r\n  hoursWorn: { min: 0, max: 999 }\r\n};\r\n\r\ninterface ValidationState {\r\n  title: { isValid: boolean; message: string; count: number };\r\n  description: { isValid: boolean; message: string; count: number };\r\n  price: { isValid: boolean; message: string };\r\n  startingPrice: { isValid: boolean; message: string };\r\n  reservePrice: { isValid: boolean; message: string };\r\n  images: { isValid: boolean; message: string };\r\n  tags: { isValid: boolean; message: string; count: number };\r\n}\r\n\r\nexport default function ListingForm({\r\n  formState,\r\n  isEditing,\r\n  isVerified,\r\n  selectedFiles,\r\n  isUploading,\r\n  uploadProgress = 0,\r\n  onFormChange,\r\n  onFileSelect,\r\n  onRemoveFile,\r\n  onUploadFiles,\r\n  onRemoveImage,\r\n  onImageReorder,\r\n  onSave,\r\n  onCancel\r\n}: ListingFormProps) {\r\n  const [errors, setErrors] = useState<Record<string, string>>({});\r\n  const [touched, setTouched] = useState<Record<string, boolean>>({});\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  // Real-time validation\r\n  const validation = useMemo((): ValidationState => {\r\n    const titleLength = formState.title.length;\r\n    const descriptionLength = formState.description.length;\r\n    const tagsLength = formState.tags.length;\r\n    const totalImages = formState.imageUrls.length + selectedFiles.length;\r\n\r\n    return {\r\n      title: {\r\n        count: titleLength,\r\n        isValid: titleLength >= VALIDATION_REQUIREMENTS.title.min && titleLength <= VALIDATION_REQUIREMENTS.title.max,\r\n        message: titleLength < VALIDATION_REQUIREMENTS.title.min \r\n          ? `Title needs at least ${VALIDATION_REQUIREMENTS.title.min} characters`\r\n          : titleLength > VALIDATION_REQUIREMENTS.title.max \r\n          ? `Title exceeds ${VALIDATION_REQUIREMENTS.title.max} characters`\r\n          : 'Perfect title length!'\r\n      },\r\n      description: {\r\n        count: descriptionLength,\r\n        isValid: descriptionLength >= VALIDATION_REQUIREMENTS.description.min && descriptionLength <= VALIDATION_REQUIREMENTS.description.max,\r\n        message: descriptionLength < VALIDATION_REQUIREMENTS.description.min \r\n          ? `Description needs at least ${VALIDATION_REQUIREMENTS.description.min} characters`\r\n          : descriptionLength > VALIDATION_REQUIREMENTS.description.max \r\n          ? `Description exceeds ${VALIDATION_REQUIREMENTS.description.max} characters`\r\n          : 'Great description length!'\r\n      },\r\n      price: {\r\n        isValid: formState.isAuction ? true : (parseFloat(formState.price) >= VALIDATION_REQUIREMENTS.price.min && parseFloat(formState.price) <= VALIDATION_REQUIREMENTS.price.max),\r\n        message: !formState.isAuction && (isNaN(parseFloat(formState.price)) || parseFloat(formState.price) < VALIDATION_REQUIREMENTS.price.min) \r\n          ? `Price must be at least $${VALIDATION_REQUIREMENTS.price.min}`\r\n          : !formState.isAuction && parseFloat(formState.price) > VALIDATION_REQUIREMENTS.price.max \r\n          ? `Price cannot exceed $${VALIDATION_REQUIREMENTS.price.max.toLocaleString()}`\r\n          : 'Valid price'\r\n      },\r\n      startingPrice: {\r\n        isValid: !formState.isAuction || (parseFloat(formState.startingPrice) >= VALIDATION_REQUIREMENTS.price.min && parseFloat(formState.startingPrice) <= VALIDATION_REQUIREMENTS.price.max),\r\n        message: formState.isAuction && (isNaN(parseFloat(formState.startingPrice)) || parseFloat(formState.startingPrice) < VALIDATION_REQUIREMENTS.price.min) \r\n          ? `Starting bid must be at least $${VALIDATION_REQUIREMENTS.price.min}`\r\n          : formState.isAuction && parseFloat(formState.startingPrice) > VALIDATION_REQUIREMENTS.price.max \r\n          ? `Starting bid cannot exceed $${VALIDATION_REQUIREMENTS.price.max.toLocaleString()}`\r\n          : 'Valid starting bid'\r\n      },\r\n      reservePrice: {\r\n        isValid: !formState.isAuction || !formState.reservePrice || parseFloat(formState.reservePrice) >= parseFloat(formState.startingPrice),\r\n        message: formState.isAuction && formState.reservePrice && parseFloat(formState.reservePrice) < parseFloat(formState.startingPrice)\r\n          ? 'Reserve price must be at least the starting bid'\r\n          : 'Valid reserve price'\r\n      },\r\n      images: {\r\n        isValid: totalImages > 0,\r\n        message: totalImages === 0 ? 'At least one image is required' : `${totalImages} image${totalImages === 1 ? '' : 's'} selected`\r\n      },\r\n      tags: {\r\n        count: tagsLength,\r\n        isValid: tagsLength <= VALIDATION_REQUIREMENTS.tags.max,\r\n        message: tagsLength > VALIDATION_REQUIREMENTS.tags.max \r\n          ? `Tags exceed ${VALIDATION_REQUIREMENTS.tags.max} characters`\r\n          : 'Valid tags'\r\n      }\r\n    };\r\n  }, [formState, selectedFiles.length]);\r\n\r\n  // Check if form is valid overall\r\n  const isFormValid = useMemo(() => {\r\n    return validation.title.isValid && \r\n           validation.description.isValid && \r\n           validation.price.isValid &&\r\n           validation.startingPrice.isValid &&\r\n           validation.reservePrice.isValid &&\r\n           validation.images.isValid &&\r\n           validation.tags.isValid;\r\n  }, [validation]);\r\n\r\n  // Handle file selection with validation\r\n  const handleSecureFileSelect = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const files = Array.from(e.target.files || []);\r\n    const validFiles: File[] = [];\r\n    let fileErrors: string[] = [];\r\n    \r\n    files.forEach(file => {\r\n      const validation = securityService.validateFileUpload(file, {\r\n        maxSize: 5 * 1024 * 1024, // 5MB\r\n        allowedTypes: ['image/jpeg', 'image/jpg', 'image/png', 'image/webp'],\r\n        allowedExtensions: ['jpg', 'jpeg', 'png', 'webp']\r\n      });\r\n      \r\n      if (validation.valid) {\r\n        validFiles.push(file);\r\n      } else {\r\n        fileErrors.push(validation.error || 'Invalid file');\r\n      }\r\n    });\r\n    \r\n    if (validFiles.length > 0) {\r\n      onFileSelect({ target: { files: validFiles } } as any);\r\n    }\r\n    \r\n    if (fileErrors.length > 0) {\r\n      setErrors(prev => ({ ...prev, files: fileErrors.join(', ') }));\r\n    } else {\r\n      setErrors(prev => {\r\n        const { files, ...rest } = prev;\r\n        return rest;\r\n      });\r\n    }\r\n  }, [onFileSelect]);\r\n\r\n  // Comprehensive form validation before submission\r\n  const validateForm = useCallback((): { isValid: boolean; errors: Record<string, string> } => {\r\n    const newErrors: Record<string, string> = {};\r\n\r\n    // Title validation\r\n    if (!validation.title.isValid) {\r\n      newErrors.title = validation.title.message;\r\n    }\r\n\r\n    // Description validation\r\n    if (!validation.description.isValid) {\r\n      newErrors.description = validation.description.message;\r\n    }\r\n\r\n    // Price validation\r\n    if (formState.isAuction) {\r\n      if (!validation.startingPrice.isValid) {\r\n        newErrors.startingPrice = validation.startingPrice.message;\r\n      }\r\n      if (!validation.reservePrice.isValid) {\r\n        newErrors.reservePrice = validation.reservePrice.message;\r\n      }\r\n    } else {\r\n      if (!validation.price.isValid) {\r\n        newErrors.price = validation.price.message;\r\n      }\r\n    }\r\n\r\n    // Images validation\r\n    if (!validation.images.isValid) {\r\n      newErrors.images = validation.images.message;\r\n    }\r\n\r\n    // Tags validation\r\n    if (!validation.tags.isValid) {\r\n      newErrors.tags = validation.tags.message;\r\n    }\r\n\r\n    return {\r\n      isValid: Object.keys(newErrors).length === 0,\r\n      errors: newErrors\r\n    };\r\n  }, [validation, formState.isAuction]);\r\n\r\n  // Handle secure form submission\r\n  const handleSecureSave = useCallback(async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (isSubmitting) return;\r\n    \r\n    setIsSubmitting(true);\r\n    setErrors({});\r\n    \r\n    try {\r\n      // Validate form\r\n      const formValidation = validateForm();\r\n      \r\n      if (!formValidation.isValid) {\r\n        setErrors(formValidation.errors);\r\n        // Mark all invalid fields as touched\r\n        const touchedFields = Object.keys(formValidation.errors).reduce(\r\n          (acc, key) => ({ ...acc, [key]: true }), \r\n          {}\r\n        );\r\n        setTouched(prev => ({ ...prev, ...touchedFields }));\r\n        return;\r\n      }\r\n\r\n      // Additional schema validation for extra safety\r\n      if (!formState.isAuction) {\r\n        const listingData = {\r\n          title: formState.title,\r\n          description: formState.description,\r\n          price: parseFloat(formState.price),\r\n          images: [...formState.imageUrls], // Convert to array for validation\r\n          category: 'panties' as const, // Default category\r\n          condition: 'worn_once' as const, // Default condition\r\n          size: 'm' as const, // Default size\r\n          tags: formState.tags.split(',').map(tag => tag.trim()).filter(tag => tag),\r\n          wearDuration: formState.hoursWorn ? parseInt(formState.hoursWorn.toString()) : undefined,\r\n          listingType: 'regular' as const\r\n        };\r\n\r\n        const schemaValidation = validateSchema(listingSchemas.createListingSchema, listingData);\r\n        \r\n        if (!schemaValidation.success && schemaValidation.errors) {\r\n          console.error('Schema validation failed:', schemaValidation.errors);\r\n          setErrors(schemaValidation.errors);\r\n          return;\r\n        }\r\n      }\r\n\r\n      // If all validations pass, submit the form\r\n      await onSave();\r\n      \r\n    } catch (error) {\r\n      console.error('Form submission error:', error);\r\n      setErrors({ submit: 'An error occurred while saving. Please try again.' });\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  }, [formState, isSubmitting, validateForm, onSave]);\r\n\r\n  // Handle field blur\r\n  const handleFieldBlur = useCallback((fieldName: string) => {\r\n    setTouched(prev => ({ ...prev, [fieldName]: true }));\r\n  }, []);\r\n\r\n  return (\r\n    <SecureForm \r\n      onSubmit={handleSecureSave}\r\n      rateLimitKey=\"listing_create\"\r\n      rateLimitConfig={{ maxAttempts: 10, windowMs: 60 * 60 * 1000 }}\r\n    >\r\n      <h2 className=\"text-2xl font-bold mb-6 text-white\">\r\n        {isEditing ? 'Edit Listing' : 'Create New Listing'}\r\n      </h2>\r\n\r\n      {/* Form validation summary */}\r\n      {!isFormValid && Object.keys(touched).length > 0 && (\r\n        <div className=\"mb-6 p-4 bg-red-900 bg-opacity-30 border border-red-700 rounded-lg\">\r\n          <div className=\"flex items-center gap-2 mb-2\">\r\n            <AlertCircle className=\"w-5 h-5 text-red-400\" />\r\n            <h3 className=\"font-semibold text-red-300\">Please fix the following issues:</h3>\r\n          </div>\r\n          <ul className=\"text-sm text-red-200 space-y-1\">\r\n            {!validation.title.isValid && <li>• {validation.title.message}</li>}\r\n            {!validation.description.isValid && <li>• {validation.description.message}</li>}\r\n            {!validation.price.isValid && <li>• {validation.price.message}</li>}\r\n            {!validation.startingPrice.isValid && <li>• {validation.startingPrice.message}</li>}\r\n            {!validation.reservePrice.isValid && <li>• {validation.reservePrice.message}</li>}\r\n            {!validation.images.isValid && <li>• {validation.images.message}</li>}\r\n            {!validation.tags.isValid && <li>• {validation.tags.message}</li>}\r\n          </ul>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"space-y-5\">\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-300 mb-1\">\r\n            Title *\r\n            <div className=\"flex items-center justify-between mt-1\">\r\n              <span className={`text-xs ${\r\n                validation.title.isValid ? 'text-green-400' : 'text-red-400'\r\n              }`}>\r\n                {validation.title.message}\r\n              </span>\r\n              <span className={`text-xs ${\r\n                validation.title.count < VALIDATION_REQUIREMENTS.title.min ? 'text-red-400' : \r\n                validation.title.count > VALIDATION_REQUIREMENTS.title.max ? 'text-red-400' : \r\n                'text-green-400'\r\n              }`}>\r\n                {validation.title.count}/{VALIDATION_REQUIREMENTS.title.max}\r\n              </span>\r\n            </div>\r\n          </label>\r\n          <div className=\"relative\">\r\n            <SecureInput\r\n              type=\"text\"\r\n              placeholder=\"e.g. 'Black Lace Panties Worn 24 Hours'\"\r\n              value={formState.title}\r\n              onChange={(value) => onFormChange({ title: value })}\r\n              onBlur={() => handleFieldBlur('title')}\r\n              maxLength={VALIDATION_REQUIREMENTS.title.max}\r\n              className={`w-full p-3 border rounded-lg bg-black text-white placeholder-gray-500 focus:outline-none focus:ring-2 transition ${\r\n                validation.title.isValid ? 'border-green-600 focus:ring-green-500' : 'border-red-600 focus:ring-red-500'\r\n              }`}\r\n            />\r\n            {validation.title.isValid && (\r\n              <CheckCircle className=\"absolute right-3 top-3 w-5 h-5 text-green-400\" />\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-300 mb-1\">\r\n            Description *\r\n            <div className=\"flex items-center justify-between mt-1\">\r\n              <span className={`text-xs ${\r\n                validation.description.isValid ? 'text-green-400' : 'text-red-400'\r\n              }`}>\r\n                {validation.description.message}\r\n              </span>\r\n              <span className={`text-xs ${\r\n                validation.description.count < VALIDATION_REQUIREMENTS.description.min ? 'text-red-400' : \r\n                validation.description.count > VALIDATION_REQUIREMENTS.description.max ? 'text-red-400' : \r\n                'text-green-400'\r\n              }`}>\r\n                {validation.description.count}/{VALIDATION_REQUIREMENTS.description.max}\r\n              </span>\r\n            </div>\r\n          </label>\r\n          <div className=\"relative\">\r\n            <SecureTextarea\r\n              placeholder=\"Describe your item in detail to attract buyers. Include material, color, how long worn, special features, etc.\"\r\n              value={formState.description}\r\n              onChange={(value) => onFormChange({ description: value })}\r\n              onBlur={() => handleFieldBlur('description')}\r\n              maxLength={VALIDATION_REQUIREMENTS.description.max}\r\n              className={`w-full p-3 border rounded-lg bg-black text-white placeholder-gray-500 focus:outline-none focus:ring-2 h-32 transition ${\r\n                validation.description.isValid ? 'border-green-600 focus:ring-green-500' : 'border-red-600 focus:ring-red-500'\r\n              }`}\r\n            />\r\n            {validation.description.isValid && (\r\n              <CheckCircle className=\"absolute right-3 top-3 w-5 h-5 text-green-400\" />\r\n            )}\r\n          </div>\r\n        </div>\r\n        \r\n        {/* Listing Type Selection */}\r\n        <div className=\"bg-[#121212] p-4 rounded-lg border border-gray-700\">\r\n          <h3 className=\"text-lg font-medium mb-3 text-white\">Listing Type</h3>\r\n          <div className=\"flex flex-col sm:flex-row gap-4\">\r\n            <label className={`flex items-center gap-3 py-3 px-4 rounded-lg cursor-pointer border-2 transition flex-1 ${!formState.isAuction ? 'border-[#ff950e] bg-[#ff950e] bg-opacity-10' : 'border-gray-700 bg-black'}`}>\r\n              <input\r\n                type=\"radio\"\r\n                checked={!formState.isAuction}\r\n                onChange={() => onFormChange({ isAuction: false })}\r\n                className=\"sr-only\"\r\n              />\r\n              <Sparkles className={`w-5 h-5 ${!formState.isAuction ? 'text-[#ff950e]' : 'text-gray-500'}`} />\r\n              <div>\r\n                <span className=\"font-medium\">Standard Listing</span>\r\n                <p className=\"text-xs text-gray-400 mt-1\">Fixed price, first come first served</p>\r\n              </div>\r\n            </label>\r\n            \r\n            <div className=\"relative flex-1\">\r\n              <label \r\n                className={`flex items-center gap-3 py-3 px-4 rounded-lg cursor-pointer border-2 transition ${\r\n                  formState.isAuction \r\n                    ? 'border-purple-600 bg-purple-600 bg-opacity-10' \r\n                    : 'border-gray-700 bg-black'\r\n                } ${\r\n                  !isVerified \r\n                    ? 'opacity-50 cursor-not-allowed'\r\n                    : 'hover:border-purple-500'\r\n                }`}\r\n              >\r\n                <input\r\n                  type=\"radio\"\r\n                  checked={formState.isAuction}\r\n                  onChange={() => {\r\n                    if (isVerified) {\r\n                      onFormChange({ isAuction: true });\r\n                    }\r\n                  }}\r\n                  disabled={!isVerified}\r\n                  className=\"sr-only\"\r\n                />\r\n                <Gavel className={`w-5 h-5 ${formState.isAuction ? 'text-purple-500' : 'text-gray-500'}`} />\r\n                <div>\r\n                  <span className=\"font-medium\">Auction</span>\r\n                  <p className=\"text-xs text-gray-400 mt-1\">Let buyers bid, highest wins</p>\r\n                </div>\r\n              </label>\r\n              \r\n              {/* Lock overlay for unverified sellers */}\r\n              {!isVerified && (\r\n                <div className=\"absolute inset-0 flex flex-col items-center justify-center bg-black bg-opacity-70 rounded-lg px-3 py-2\">\r\n                  <LockIcon className=\"w-6 h-6 text-yellow-500 mb-1\" />\r\n                  <span className=\"text-xs text-yellow-400 font-medium text-center\">Verify your account to unlock auctions</span>\r\n                  <Link \r\n                    href=\"/sellers/verify\" \r\n                    className=\"mt-1 text-xs text-white bg-yellow-600 hover:bg-yellow-500 px-3 py-1 rounded-full font-medium transition\"\r\n                  >\r\n                    Get Verified\r\n                  </Link>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        {/* Show different price fields based on listing type */}\r\n        {formState.isAuction ? (\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-5\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-300 mb-1\">\r\n                Starting Bid ($) *\r\n                {!validation.startingPrice.isValid && (\r\n                  <span className=\"text-xs text-red-400 ml-2\">{validation.startingPrice.message}</span>\r\n                )}\r\n              </label>\r\n              <div className=\"relative\">\r\n                <SecureInput\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  placeholder=\"e.g. 9.99\"\r\n                  value={formState.startingPrice}\r\n                  onChange={(value) => {\r\n                    const sanitized = sanitizeCurrency(value);\r\n                    onFormChange({ startingPrice: sanitized.toString() });\r\n                  }}\r\n                  onBlur={() => handleFieldBlur('startingPrice')}\r\n                  min=\"0.01\"\r\n                  max=\"9999.99\"\r\n                  className={`w-full p-3 border rounded-lg bg-black text-white placeholder-gray-500 focus:outline-none focus:ring-2 transition ${\r\n                    validation.startingPrice.isValid ? 'border-green-600 focus:ring-green-500' : 'border-red-600 focus:ring-red-500'\r\n                  }`}\r\n                />\r\n                {validation.startingPrice.isValid && (\r\n                  <CheckCircle className=\"absolute right-3 top-3 w-5 h-5 text-green-400\" />\r\n                )}\r\n              </div>\r\n              <p className=\"text-xs text-gray-500 mt-1\">Minimum price to start bidding</p>\r\n            </div>\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-300 mb-1\">\r\n                Reserve Price ($)\r\n                {!validation.reservePrice.isValid && (\r\n                  <span className=\"text-xs text-red-400 ml-2\">{validation.reservePrice.message}</span>\r\n                )}\r\n              </label>\r\n              <div className=\"relative\">\r\n                <SecureInput\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  placeholder=\"e.g. 19.99\"\r\n                  value={formState.reservePrice}\r\n                  onChange={(value) => {\r\n                    const sanitized = sanitizeCurrency(value);\r\n                    onFormChange({ reservePrice: sanitized.toString() });\r\n                  }}\r\n                  onBlur={() => handleFieldBlur('reservePrice')}\r\n                  min=\"0\"\r\n                  max=\"9999.99\"\r\n                  className={`w-full p-3 border rounded-lg bg-black text-white placeholder-gray-500 focus:outline-none focus:ring-2 transition ${\r\n                    validation.reservePrice.isValid ? 'border-gray-700 focus:ring-purple-600' : 'border-red-600 focus:ring-red-500'\r\n                  }`}\r\n                />\r\n                {validation.reservePrice.isValid && formState.reservePrice && (\r\n                  <CheckCircle className=\"absolute right-3 top-3 w-5 h-5 text-green-400\" />\r\n                )}\r\n              </div>\r\n              <p className=\"text-xs text-gray-500 mt-1\">Minimum winning bid price (hidden from buyers)</p>\r\n            </div>\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-300 mb-1\">Auction Duration</label>\r\n              <select\r\n                value={formState.auctionDuration}\r\n                onChange={(e) => onFormChange({ auctionDuration: e.target.value })}\r\n                className=\"w-full p-3 border border-gray-700 rounded-lg bg-black text-white focus:outline-none focus:ring-2 focus:ring-purple-600\"\r\n              >\r\n                <option value=\"0.000694\">1 Minute (Testing)</option>\r\n                <option value=\"1\">1 Day</option>\r\n                <option value=\"3\">3 Days</option>\r\n                <option value=\"5\">5 Days</option>\r\n                <option value=\"7\">7 Days</option>\r\n              </select>\r\n              <p className=\"text-xs text-gray-500 mt-1\">How long the auction will last</p>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-5\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-300 mb-1\">\r\n                Price ($) *\r\n                {!validation.price.isValid && (\r\n                  <span className=\"text-xs text-red-400 ml-2\">{validation.price.message}</span>\r\n                )}\r\n              </label>\r\n              <div className=\"relative\">\r\n                <SecureInput\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  placeholder=\"e.g. 29.99\"\r\n                  value={formState.price}\r\n                  onChange={(value) => {\r\n                    const sanitized = sanitizeCurrency(value);\r\n                    onFormChange({ price: sanitized.toString() });\r\n                  }}\r\n                  onBlur={() => handleFieldBlur('price')}\r\n                  min=\"0.01\"\r\n                  max=\"9999.99\"\r\n                  className={`w-full p-3 border rounded-lg bg-black text-white placeholder-gray-500 focus:outline-none focus:ring-2 transition ${\r\n                    validation.price.isValid ? 'border-green-600 focus:ring-green-500' : 'border-red-600 focus:ring-red-500'\r\n                  }`}\r\n                />\r\n                {validation.price.isValid && (\r\n                  <CheckCircle className=\"absolute right-3 top-3 w-5 h-5 text-green-400\" />\r\n                )}\r\n              </div>\r\n            </div>\r\n            {/* Image Upload Section */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-300 mb-1\">\r\n                Add Images *\r\n                <span className={`text-xs ml-2 ${\r\n                  validation.images.isValid ? 'text-green-400' : 'text-red-400'\r\n                }`}>\r\n                  {validation.images.message}\r\n                </span>\r\n              </label>\r\n              <label className={`flex items-center justify-center gap-2 p-3 border-2 border-dashed rounded-lg bg-black hover:border-[#ff950e] transition cursor-pointer ${\r\n                validation.images.isValid ? 'border-green-600' : 'border-gray-700'\r\n              }`}>\r\n                <input\r\n                  type=\"file\"\r\n                  accept=\"image/*\"\r\n                  multiple\r\n                  onChange={handleSecureFileSelect}\r\n                  className=\"hidden\"\r\n                />\r\n                <ImageIcon className={`w-5 h-5 ${validation.images.isValid ? 'text-green-400' : 'text-[#ff950e]'}`} />\r\n                <span className=\"text-gray-300\">Select images from your computer</span>\r\n              </label>\r\n              {errors.files && (\r\n                <p className=\"mt-1 text-xs text-red-400 flex items-center gap-1\">\r\n                  <AlertCircle className=\"w-3 h-3\" />\r\n                  {errors.files}\r\n                </p>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n        \r\n        {/* Image upload section for auction type */}\r\n        {formState.isAuction && (\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-300 mb-1\">\r\n              Add Images *\r\n              <span className={`text-xs ml-2 ${\r\n                validation.images.isValid ? 'text-green-400' : 'text-red-400'\r\n              }`}>\r\n                {validation.images.message}\r\n              </span>\r\n            </label>\r\n            <label className={`flex items-center justify-center gap-2 p-3 border-2 border-dashed rounded-lg bg-black hover:border-purple-600 transition cursor-pointer ${\r\n              validation.images.isValid ? 'border-green-600' : 'border-gray-700'\r\n            }`}>\r\n              <input\r\n                type=\"file\"\r\n                accept=\"image/*\"\r\n                multiple\r\n                onChange={handleSecureFileSelect}\r\n                className=\"hidden\"\r\n              />\r\n              <ImageIcon className={`w-5 h-5 ${validation.images.isValid ? 'text-green-400' : 'text-purple-500'}`} />\r\n              <span className=\"text-gray-300\">Select images from your computer</span>\r\n            </label>\r\n            {errors.files && (\r\n              <p className=\"mt-1 text-xs text-red-400 flex items-center gap-1\">\r\n                <AlertCircle className=\"w-3 h-3\" />\r\n                {errors.files}\r\n              </p>\r\n            )}\r\n          </div>\r\n        )}\r\n        \r\n        {/* Selected Files Preview */}\r\n        {selectedFiles.length > 0 && (\r\n          <div className=\"mt-3\">\r\n            <div className=\"flex justify-between items-center mb-2\">\r\n              <span className=\"text-sm text-gray-300\">{selectedFiles.length} file(s) selected</span>\r\n              <button\r\n                type=\"button\"\r\n                onClick={onUploadFiles}\r\n                disabled={isUploading}\r\n                className={`text-black px-4 py-2 rounded-lg font-medium text-sm disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 ${formState.isAuction ? 'bg-purple-500 hover:bg-purple-600' : 'bg-[#ff950e] hover:bg-[#e0850d]'}`}\r\n              >\r\n                {isUploading ? (\r\n                  <>Uploading...</>\r\n                ) : (\r\n                  <>\r\n                    <Upload className=\"w-4 h-4\" />\r\n                    Add to Listing\r\n                  </>\r\n                )}\r\n              </button>\r\n            </div>\r\n\r\n            {/* Upload Progress Bar */}\r\n            {isUploading && (\r\n              <div className=\"mb-3\">\r\n                <div className=\"flex justify-between text-xs text-gray-400 mb-1\">\r\n                  <span>Uploading images...</span>\r\n                  <span>{sanitizeNumber(uploadProgress, 0, 100)}%</span>\r\n                </div>\r\n                <div className=\"w-full bg-gray-800 rounded-full h-2 overflow-hidden\">\r\n                  <div \r\n                    className={`h-full transition-all duration-300 ${\r\n                      formState.isAuction ? 'bg-purple-500' : 'bg-[#ff950e]'\r\n                    }`}\r\n                    style={{ width: `${sanitizeNumber(uploadProgress, 0, 100)}%` }}\r\n                  />\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4\">\r\n              {selectedFiles.map((file, index) => (\r\n                <div key={index} className=\"relative border border-gray-700 rounded-lg overflow-hidden group\">\r\n                  <SecureImage\r\n                    src={URL.createObjectURL(file)}\r\n                    alt={`Selected ${index + 1}`}\r\n                    className=\"w-full h-24 object-cover\"\r\n                  />\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => onRemoveFile(index)}\r\n                    className=\"absolute top-1 right-1 bg-red-600 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition\"\r\n                  >\r\n                    <X className=\"w-4 h-4\" />\r\n                  </button>\r\n                  <div className=\"absolute bottom-0 left-0 right-0 bg-black bg-opacity-70 py-1 px-2\">\r\n                    <p className=\"text-xs text-white truncate\">{sanitizeStrict(file.name)}</p>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Image Preview and Reordering */}\r\n        {formState.imageUrls.length > 0 && (\r\n          <div className=\"mt-4\">\r\n            <label className=\"block text-sm font-medium text-gray-300 mb-2\">Images (Drag to reorder)</label>\r\n            <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4\">\r\n              {formState.imageUrls.map((url, index) => (\r\n                <div\r\n                  key={index}\r\n                  draggable\r\n                  onDragStart={() => onImageReorder(index, index)}\r\n                  onDragEnter={() => onImageReorder(index, index)}\r\n                  onDragEnd={() => onImageReorder(index, index)}\r\n                  onDragOver={(e) => e.preventDefault()}\r\n                  className={`relative border rounded-lg overflow-hidden cursor-grab active:cursor-grabbing group ${index === 0 ? 'border-2 border-[#ff950e] shadow-md' : 'border-gray-700'}`}\r\n                >\r\n                  <SecureImage\r\n                    src={url}\r\n                    alt={`Listing Image ${index + 1}`}\r\n                    className={`w-full object-cover ${index === 0 ? 'h-32 sm:h-40' : 'h-24 sm:h-32'}`}\r\n                  />\r\n                  {index === 0 && (\r\n                    <span className=\"absolute top-2 left-2 bg-[#ff950e] text-black text-xs px-2 py-0.5 rounded-full font-bold\">\r\n                      Main\r\n                    </span>\r\n                  )}\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => onRemoveImage(url)}\r\n                    className=\"absolute top-2 right-2 bg-red-600 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition\"\r\n                    aria-label=\"Remove image\"\r\n                  >\r\n                    <X className=\"w-4 h-4\" />\r\n                  </button>\r\n                  <div className=\"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition bg-black bg-opacity-20\">\r\n                    <MoveVertical className=\"w-6 h-6 text-white\" />\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-300 mb-1\">\r\n            Tags (comma separated)\r\n            <span className={`text-xs ml-2 ${\r\n              validation.tags.isValid ? 'text-green-400' : 'text-red-400'\r\n            }`}>\r\n              {validation.tags.count}/{VALIDATION_REQUIREMENTS.tags.max}\r\n            </span>\r\n          </label>\r\n          <SecureInput\r\n            type=\"text\"\r\n            placeholder=\"e.g. thong, black, lace, cotton, gym\"\r\n            value={formState.tags}\r\n            onChange={(value) => onFormChange({ tags: value })}\r\n            onBlur={() => handleFieldBlur('tags')}\r\n            maxLength={VALIDATION_REQUIREMENTS.tags.max}\r\n            className={`w-full p-3 border rounded-lg bg-black text-white placeholder-gray-500 focus:outline-none focus:ring-2 transition ${\r\n              validation.tags.isValid ? 'border-gray-700 focus:ring-[#ff950e]' : 'border-red-600 focus:ring-red-500'\r\n            }`}\r\n          />\r\n          <p className=\"text-xs text-gray-500 mt-1\">Help buyers find your items with relevant tags</p>\r\n        </div>\r\n\r\n        <div>\r\n          <SecureInput\r\n            label=\"Hours Worn (optional)\"\r\n            type=\"number\"\r\n            placeholder=\"e.g. 24\"\r\n            value={formState.hoursWorn?.toString() || ''}\r\n            onChange={(value) => {\r\n              const num = value === '' ? '' : sanitizeNumber(value, 0, 999);\r\n              onFormChange({ hoursWorn: num });\r\n            }}\r\n            min=\"0\"\r\n            max=\"999\"\r\n          />\r\n        </div>\r\n        \r\n        {/* Only show premium option for standard listings */}\r\n        {!formState.isAuction && (\r\n          <div className=\"mt-4\">\r\n            <label className={`flex items-center gap-3 py-4 px-5 border-2 rounded-lg cursor-pointer transition ${formState.isPremium ? 'border-[#ff950e] bg-[#ff950e] bg-opacity-10' : 'border-gray-700 bg-black'}`}>\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={formState.isPremium}\r\n                onChange={() => onFormChange({ isPremium: !formState.isPremium })}\r\n                className=\"h-5 w-5 text-[#ff950e] focus:ring-[#ff950e] rounded border-gray-600 bg-black checked:bg-[#ff950e]\"\r\n              />\r\n              <Crown className={`w-6 h-6 ${formState.isPremium ? 'text-[#ff950e]' : 'text-gray-500'}`} />\r\n              <div>\r\n                <span className={`font-semibold text-lg ${formState.isPremium ? 'text-white' : 'text-gray-300'}`}>Make Premium Listing</span>\r\n                <p className={`text-sm mt-0.5 ${formState.isPremium ? 'text-gray-200' : 'text-gray-400'}`}>Only available to your subscribers</p>\r\n              </div>\r\n            </label>\r\n          </div>\r\n        )}\r\n        \r\n        {/* Auction information notice */}\r\n        {formState.isAuction && (\r\n          <div className=\"bg-purple-900 bg-opacity-30 border border-purple-700 rounded-lg p-4 mt-4\">\r\n            <div className=\"flex gap-3\">\r\n              <AlertCircle className=\"w-6 h-6 text-purple-400 flex-shrink-0 mt-0.5\" />\r\n              <div>\r\n                <h4 className=\"font-medium text-purple-300 mb-1\">Auction Information</h4>\r\n                <ul className=\"text-sm text-gray-300 space-y-1\">\r\n                  <li>\r\n                    • Auctions run for {formState.auctionDuration === '0.000694' ? '1 minute' : `${formState.auctionDuration} day${parseInt(formState.auctionDuration) !== 1 ? 's' : ''}`} from the time you create the listing\r\n                  </li>\r\n                  <li>• Bidders must have sufficient funds in their wallet to place a bid</li>\r\n                  <li>• If the reserve price is met, the highest bidder automatically purchases the item when the auction ends</li>\r\n                  <li>• You can cancel an auction at any time before it ends</li>\r\n                </ul>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Submit errors */}\r\n        {errors.submit && (\r\n          <div className=\"text-red-400 text-sm flex items-center gap-2\">\r\n            <AlertCircle className=\"w-4 h-4\" />\r\n            {errors.submit}\r\n          </div>\r\n        )}\r\n        \r\n        <div className=\"flex flex-col sm:flex-row gap-4 mt-6\">\r\n          <button\r\n            type=\"submit\"\r\n            disabled={!isFormValid || isSubmitting}\r\n            className={`w-full sm:flex-1 text-black px-6 py-3 rounded-lg font-bold text-lg transition flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed ${\r\n              formState.isAuction ? 'bg-purple-500 hover:bg-purple-600' : 'bg-[#ff950e] hover:bg-[#e0850d]'\r\n            }`}\r\n          >\r\n            {isSubmitting ? (\r\n              <>\r\n                <div className=\"w-5 h-5 border-2 border-black border-t-transparent rounded-full animate-spin\" />\r\n                Saving...\r\n              </>\r\n            ) : isEditing ? (\r\n              <>\r\n                <Edit className=\"w-5 h-5\" />\r\n                Save Changes\r\n              </>\r\n            ) : formState.isAuction ? (\r\n              <>\r\n                <Gavel className=\"w-5 h-5\" />\r\n                Create Auction\r\n              </>\r\n            ) : (\r\n              <>\r\n                <Sparkles className=\"w-5 h-5\" />\r\n                Create Listing\r\n              </>\r\n            )}\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            onClick={onCancel}\r\n            disabled={isSubmitting}\r\n            className=\"w-full sm:flex-1 bg-gray-700 text-white px-6 py-3 rounded-lg hover:bg-gray-600 font-medium text-lg transition flex items-center justify-center gap-2 disabled:opacity-50\"\r\n          >\r\n            Cancel\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </SecureForm>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2744, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/osr99/OneDrive/Documents/GitHub/pantypost/src/components/myListings/RecentSales.tsx"],"sourcesContent":["// src/components/myListings/RecentSales.tsx\r\n'use client';\r\n\r\nimport { RecentSalesProps } from '@/types/myListings';\r\nimport { sanitizeStrict } from '@/utils/security/sanitization';\r\n\r\nexport default function RecentSales({ orders }: RecentSalesProps) {\r\n  return (\r\n    <div className=\"bg-[#1a1a1a] p-6 sm:p-8 rounded-xl shadow-lg border border-gray-800\">\r\n      <h2 className=\"text-2xl font-bold mb-6 text-white\">Recent Sales</h2>\r\n      <div className=\"space-y-5\">\r\n        {orders.length === 0 ? (\r\n          <div className=\"text-center py-8 bg-black rounded-lg border border-dashed border-gray-700 text-gray-400 italic\">\r\n            <p>No sales yet. Keep promoting your listings!</p>\r\n          </div>\r\n        ) : (\r\n          orders.map((order, index) => (\r\n            <div\r\n              key={`order-${order.id}-${index}`}\r\n              className=\"border border-gray-700 p-4 rounded-lg text-sm bg-black hover:border-[#ff950e] transition\"\r\n            >\r\n              <div className=\"flex items-center gap-4\">\r\n                {order.imageUrl && (\r\n                  <img\r\n                    src={order.imageUrl}\r\n                    alt={sanitizeStrict(order.title)}\r\n                    className=\"w-16 h-16 object-cover rounded-md border border-gray-600\"\r\n                  />\r\n                )}\r\n                <div className=\"flex-1\">\r\n                  <h3 className=\"font-semibold text-white text-base\">{sanitizeStrict(order.title)}</h3>\r\n                  <p className=\"text-[#ff950e] font-bold text-lg mt-1\">\r\n                    ${order.markedUpPrice.toFixed(2)}\r\n                  </p>\r\n                  <p className=\"text-xs text-gray-500 mt-1\">\r\n                    Sold on {new Date(order.date).toLocaleDateString()}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,4CAA4C;;;;;AAI5C;AAHA;;;AAKe,SAAS,YAAY,KAA4B;QAA5B,EAAE,MAAM,EAAoB,GAA5B;IAClC,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;0BAAqC;;;;;;0BACnD,6LAAC;gBAAI,WAAU;0BACZ,OAAO,MAAM,KAAK,kBACjB,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;kCAAE;;;;;;;;;;2BAGL,OAAO,GAAG,CAAC,CAAC,OAAO,sBACjB,6LAAC;wBAEC,WAAU;kCAEV,cAAA,6LAAC;4BAAI,WAAU;;gCACZ,MAAM,QAAQ,kBACb,6LAAC;oCACC,KAAK,MAAM,QAAQ;oCACnB,KAAK,CAAA,GAAA,2IAAA,CAAA,iBAAc,AAAD,EAAE,MAAM,KAAK;oCAC/B,WAAU;;;;;;8CAGd,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAG,WAAU;sDAAsC,CAAA,GAAA,2IAAA,CAAA,iBAAc,AAAD,EAAE,MAAM,KAAK;;;;;;sDAC9E,6LAAC;4CAAE,WAAU;;gDAAwC;gDACjD,MAAM,aAAa,CAAC,OAAO,CAAC;;;;;;;sDAEhC,6LAAC;4CAAE,WAAU;;gDAA6B;gDAC/B,IAAI,KAAK,MAAM,IAAI,EAAE,kBAAkB;;;;;;;;;;;;;;;;;;;uBAjBjD,AAAC,SAAoB,OAAZ,MAAM,EAAE,EAAC,KAAS,OAAN;;;;;;;;;;;;;;;;AA2BxC;KAvCwB","debugId":null}},
    {"offset": {"line": 2869, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/osr99/OneDrive/Documents/GitHub/pantypost/src/utils/cloudinary.ts"],"sourcesContent":["// src/utils/cloudinary.ts\r\n\r\n// Cloudinary configuration\r\nconst CLOUD_NAME = process.env.NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME || '';\r\nconst UPLOAD_PRESET = process.env.NEXT_PUBLIC_CLOUDINARY_UPLOAD_PRESET || '';\r\n\r\n// Check if Cloudinary is properly configured\r\nconst isCloudinaryConfigured = () => {\r\n  return CLOUD_NAME && \r\n         UPLOAD_PRESET && \r\n         CLOUD_NAME !== 'your_cloud_name' && \r\n         UPLOAD_PRESET !== 'your_upload_preset';\r\n};\r\n\r\n// Mock image URLs for development\r\nconst MOCK_IMAGE_URLS = [\r\n  'https://picsum.photos/400/600?random=1',\r\n  'https://picsum.photos/400/600?random=2',\r\n  'https://picsum.photos/400/600?random=3',\r\n  'https://picsum.photos/400/600?random=4',\r\n  'https://picsum.photos/400/600?random=5',\r\n  'https://picsum.photos/400/600?random=6',\r\n  'https://picsum.photos/400/600?random=7',\r\n  'https://picsum.photos/400/600?random=8',\r\n  'https://picsum.photos/400/600?random=9',\r\n  'https://picsum.photos/400/600?random=10',\r\n];\r\n\r\n// Types\r\nexport interface CloudinaryUploadResult {\r\n  url: string;\r\n  publicId: string;\r\n  format: string;\r\n  width: number;\r\n  height: number;\r\n  bytes: number;\r\n  createdAt: string;\r\n}\r\n\r\nexport interface CloudinaryDeleteResult {\r\n  result: 'ok' | 'not found' | 'error';\r\n  publicId: string;\r\n}\r\n\r\nexport interface BatchDeleteResult {\r\n  successful: string[];\r\n  failed: Array<{\r\n    publicId: string;\r\n    error: string;\r\n  }>;\r\n}\r\n\r\n/**\r\n * Convert File to base64 data URL\r\n */\r\nconst fileToDataURL = (file: File): Promise<string> => {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.onload = (e) => {\r\n      if (e.target?.result) {\r\n        resolve(e.target.result as string);\r\n      } else {\r\n        reject(new Error('Failed to read file'));\r\n      }\r\n    };\r\n    reader.onerror = () => reject(new Error('Failed to read file'));\r\n    reader.readAsDataURL(file);\r\n  });\r\n};\r\n\r\n/**\r\n * Generate a mock upload result for development using actual uploaded file\r\n */\r\nconst generateMockUploadResult = async (file: File, index: number): Promise<CloudinaryUploadResult> => {\r\n  const randomId = `mock_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\r\n  \r\n  // Convert the actual file to a data URL\r\n  const dataUrl = await fileToDataURL(file);\r\n  \r\n  return {\r\n    url: dataUrl,\r\n    publicId: randomId,\r\n    format: file.type.split('/')[1] || 'jpeg',\r\n    width: 400, // We could calculate actual dimensions if needed\r\n    height: 600,\r\n    bytes: file.size,\r\n    createdAt: new Date().toISOString(),\r\n  };\r\n};\r\n\r\n/**\r\n * Upload a single file to Cloudinary\r\n * @param file - The file to upload\r\n * @returns Promise with upload result\r\n */\r\nexport const uploadToCloudinary = async (\r\n  file: File\r\n): Promise<CloudinaryUploadResult> => {\r\n  // Validate file before upload\r\n  if (!isValidImageFile(file)) {\r\n    throw new Error(`Invalid file: ${file.name}. Must be JPEG, PNG, WebP, or GIF under 10MB.`);\r\n  }\r\n  \r\n  // Check if we should use mock data\r\n  if (!isCloudinaryConfigured()) {\r\n    console.warn('Cloudinary not configured. Using local image data for development.');\r\n    // Simulate upload delay\r\n    await new Promise(resolve => setTimeout(resolve, 500 + Math.random() * 1000));\r\n    return await generateMockUploadResult(file, 0);\r\n  }\r\n  \r\n  const formData = new FormData();\r\n  formData.append('file', file);\r\n  formData.append('upload_preset', UPLOAD_PRESET);\r\n  \r\n  try {\r\n    const response = await fetch(\r\n      `https://api.cloudinary.com/v1_1/${CLOUD_NAME}/image/upload`,\r\n      {\r\n        method: 'POST',\r\n        body: formData,\r\n      }\r\n    );\r\n    \r\n    if (!response.ok) {\r\n      const error = await response.text();\r\n      throw new Error(`Upload failed: ${response.statusText || error}`);\r\n    }\r\n    \r\n    const data = await response.json();\r\n    \r\n    return {\r\n      url: data.secure_url,\r\n      publicId: data.public_id,\r\n      format: data.format,\r\n      width: data.width,\r\n      height: data.height,\r\n      bytes: data.bytes,\r\n      createdAt: data.created_at,\r\n    };\r\n  } catch (error) {\r\n    console.error('Cloudinary upload error:', error);\r\n    throw error instanceof Error ? error : new Error('Upload failed');\r\n  }\r\n};\r\n\r\n/**\r\n * Upload multiple files to Cloudinary with progress tracking\r\n * @param files - Array of files to upload\r\n * @param onProgress - Progress callback\r\n * @returns Promise with array of upload results\r\n */\r\nexport const uploadMultipleToCloudinary = async (\r\n  files: File[],\r\n  onProgress?: (progress: number) => void\r\n): Promise<CloudinaryUploadResult[]> => {\r\n  // Validate all files first\r\n  const invalidFiles = files.filter(file => !isValidImageFile(file));\r\n  if (invalidFiles.length > 0) {\r\n    const invalidFileNames = invalidFiles.map(f => f.name).join(', ');\r\n    throw new Error(\r\n      `Invalid files detected: ${invalidFileNames}. ` +\r\n      `All files must be JPEG, PNG, WebP, or GIF under 10MB each.`\r\n    );\r\n  }\r\n  \r\n  // Check if we should use mock data\r\n  if (!isCloudinaryConfigured()) {\r\n    console.warn('Cloudinary not configured. Using local image data for development.');\r\n    const results: CloudinaryUploadResult[] = [];\r\n    \r\n    for (let i = 0; i < files.length; i++) {\r\n      // Simulate upload delay\r\n      await new Promise(resolve => setTimeout(resolve, 300 + Math.random() * 700));\r\n      results.push(await generateMockUploadResult(files[i], i));\r\n      \r\n      if (onProgress) {\r\n        const progress = ((i + 1) / files.length) * 100;\r\n        onProgress(progress);\r\n      }\r\n    }\r\n    \r\n    return results;\r\n  }\r\n  \r\n  const results: CloudinaryUploadResult[] = [];\r\n  const totalFiles = files.length;\r\n  \r\n  for (let i = 0; i < files.length; i++) {\r\n    try {\r\n      const result = await uploadToCloudinary(files[i]);\r\n      results.push(result);\r\n      \r\n      if (onProgress) {\r\n        const progress = ((i + 1) / totalFiles) * 100;\r\n        onProgress(progress);\r\n      }\r\n    } catch (error) {\r\n      console.error(`Failed to upload file ${i + 1}:`, error);\r\n      // Clean up any successful uploads if one fails\r\n      if (results.length > 0 && isCloudinaryConfigured()) {\r\n        console.log('Rolling back successful uploads:', results.map(r => r.publicId));\r\n        // Attempt to delete successfully uploaded images\r\n        await batchDeleteFromCloudinary(results.map(r => r.publicId));\r\n      }\r\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error';\r\n      throw new Error(`Failed to upload file ${files[i].name}: ${errorMessage}`);\r\n    }\r\n  }\r\n  \r\n  return results;\r\n};\r\n\r\n/**\r\n * Delete an image from Cloudinary\r\n * @param publicId - The public ID of the image to delete\r\n * @returns Promise indicating success\r\n */\r\nexport const deleteFromCloudinary = async (publicId: string): Promise<CloudinaryDeleteResult> => {\r\n  // If using mock data, just return success\r\n  if (!isCloudinaryConfigured() || publicId.startsWith('mock_')) {\r\n    console.log('Mock mode: Simulating image deletion for', publicId);\r\n    return {\r\n      result: 'ok',\r\n      publicId: publicId,\r\n    };\r\n  }\r\n  \r\n  try {\r\n    // For now, make a request to the mock API endpoint\r\n    const response = await fetch('/api/cloudinary/delete', {\r\n      method: 'DELETE',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({ publicId }),\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const error = await response.json().catch(() => ({ message: 'Delete failed' }));\r\n      throw new Error(error.message || `Delete failed: ${response.statusText}`);\r\n    }\r\n\r\n    const result = await response.json();\r\n    return result;\r\n  } catch (error) {\r\n    console.error('Delete from Cloudinary error:', error);\r\n    throw error instanceof Error ? error : new Error('Delete failed');\r\n  }\r\n};\r\n\r\n/**\r\n * Batch delete multiple images from Cloudinary\r\n * @param publicIds - Array of public IDs to delete\r\n * @returns Promise with batch delete results\r\n */\r\nexport const batchDeleteFromCloudinary = async (\r\n  publicIds: string[]\r\n): Promise<BatchDeleteResult> => {\r\n  const results: BatchDeleteResult = {\r\n    successful: [],\r\n    failed: [],\r\n  };\r\n\r\n  // Process deletions in parallel with error handling for each\r\n  const deletePromises = publicIds.map(async (publicId) => {\r\n    try {\r\n      const result = await deleteFromCloudinary(publicId);\r\n      if (result.result === 'ok') {\r\n        results.successful.push(publicId);\r\n      } else {\r\n        results.failed.push({\r\n          publicId,\r\n          error: result.result === 'not found' ? 'Image not found' : 'Delete failed',\r\n        });\r\n      }\r\n    } catch (error) {\r\n      results.failed.push({\r\n        publicId,\r\n        error: error instanceof Error ? error.message : 'Unknown error',\r\n      });\r\n    }\r\n  });\r\n\r\n  await Promise.allSettled(deletePromises);\r\n  return results;\r\n};\r\n\r\n/**\r\n * Delete image by URL (extracts public ID and deletes)\r\n * @param url - Cloudinary URL\r\n * @returns Promise indicating success\r\n */\r\nexport const deleteImageByUrl = async (url: string): Promise<CloudinaryDeleteResult> => {\r\n  // Handle data URLs (local images)\r\n  if (url.includes('data:image')) {\r\n    return {\r\n      result: 'ok',\r\n      publicId: 'local_image',\r\n    };\r\n  }\r\n  \r\n  // Handle mock URLs\r\n  if (url.includes('picsum.photos')) {\r\n    const mockId = url.match(/id=(mock_[a-zA-Z0-9_]+)/)?.[1] || 'mock_unknown';\r\n    return deleteFromCloudinary(mockId);\r\n  }\r\n  \r\n  const publicId = extractPublicId(url);\r\n  if (!publicId) {\r\n    throw new Error('Invalid Cloudinary URL: Unable to extract public ID');\r\n  }\r\n  \r\n  return deleteFromCloudinary(publicId);\r\n};\r\n\r\n/**\r\n * Generate a thumbnail URL for a Cloudinary image\r\n * @param url - The original Cloudinary URL\r\n * @param width - Thumbnail width\r\n * @param height - Thumbnail height\r\n * @returns Thumbnail URL\r\n */\r\nexport const generateThumbnailUrl = (\r\n  url: string,\r\n  width: number = 300,\r\n  height: number = 300\r\n): string => {\r\n  // Handle mock URLs (data URLs)\r\n  if (url.includes('data:image')) {\r\n    return url; // Data URLs can't be resized via URL manipulation\r\n  }\r\n  \r\n  // Handle picsum photos\r\n  if (url.includes('picsum.photos')) {\r\n    return url.replace(/\\/\\d+\\/\\d+/, `/${width}/${height}`);\r\n  }\r\n  \r\n  return url.replace('/upload/', `/upload/w_${width},h_${height},c_fill,q_auto/`);\r\n};\r\n\r\n/**\r\n * Generate an optimized URL for a Cloudinary image\r\n * @param url - The original Cloudinary URL\r\n * @param options - Optimization options\r\n * @returns Optimized URL\r\n */\r\nexport const generateOptimizedUrl = (\r\n  url: string,\r\n  options: {\r\n    width?: number;\r\n    height?: number;\r\n    quality?: number | 'auto';\r\n    format?: string;\r\n    blur?: number;\r\n  } = {}\r\n): string => {\r\n  // Handle mock URLs (data URLs and picsum)\r\n  if (url.includes('data:image')) {\r\n    return url; // Data URLs can't be transformed via URL manipulation\r\n  }\r\n  \r\n  if (url.includes('picsum.photos')) {\r\n    const { width = 400, height = 600, blur } = options;\r\n    let mockUrl = url.replace(/\\/\\d+\\/\\d+/, `/${width}/${height}`);\r\n    if (blur) {\r\n      mockUrl += `${mockUrl.includes('?') ? '&' : '?'}blur=${Math.min(10, blur / 100)}`;\r\n    }\r\n    return mockUrl;\r\n  }\r\n  \r\n  const { width, height, quality = 'auto', format = 'auto', blur } = options;\r\n  \r\n  let transformations = [`q_${quality}`, `f_${format}`];\r\n  \r\n  if (width) transformations.push(`w_${width}`);\r\n  if (height) transformations.push(`h_${height}`);\r\n  if (blur) transformations.push(`e_blur:${blur}`);\r\n  \r\n  const transformString = transformations.join(',');\r\n  return url.replace('/upload/', `/upload/${transformString}/`);\r\n};\r\n\r\n/**\r\n * Generate a blurred preview URL (useful for premium content)\r\n * @param url - The original Cloudinary URL\r\n * @param blurLevel - Blur intensity (100-2000, higher = more blur)\r\n * @returns Blurred URL\r\n */\r\nexport const generateBlurredUrl = (url: string, blurLevel: number = 1000): string => {\r\n  return generateOptimizedUrl(url, { blur: blurLevel, quality: 70 });\r\n};\r\n\r\n/**\r\n * Validate if a file is an acceptable image type\r\n * @param file - The file to validate\r\n * @returns Boolean indicating if file is valid\r\n */\r\nexport const isValidImageFile = (file: File): boolean => {\r\n  const acceptedTypes = ['image/jpeg', 'image/png', 'image/webp', 'image/gif'];\r\n  const maxSize = 10 * 1024 * 1024; // 10MB\r\n  \r\n  if (!acceptedTypes.includes(file.type)) {\r\n    console.warn(`Invalid file type: ${file.type} for file: ${file.name}`);\r\n    return false;\r\n  }\r\n  \r\n  if (file.size > maxSize) {\r\n    console.warn(`File too large: ${file.size} bytes for file: ${file.name}`);\r\n    return false;\r\n  }\r\n  \r\n  return true;\r\n};\r\n\r\n/**\r\n * Get human-readable file size\r\n * @param bytes - File size in bytes\r\n * @returns Formatted string\r\n */\r\nexport const formatFileSize = (bytes: number): string => {\r\n  if (bytes === 0) return '0 Bytes';\r\n  \r\n  const k = 1024;\r\n  const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n  \r\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\r\n};\r\n\r\n/**\r\n * Convert a base64 string to a File object for Cloudinary upload\r\n * @param base64 - The base64 string\r\n * @param filename - The filename to use\r\n * @returns File object\r\n */\r\nexport const base64ToFile = (base64: string, filename: string): File => {\r\n  // Handle data URL format\r\n  const arr = base64.split(',');\r\n  const mime = arr[0].match(/:(.*?);/)?.[1] || 'image/jpeg';\r\n  const bstr = atob(arr[1]);\r\n  let n = bstr.length;\r\n  const u8arr = new Uint8Array(n);\r\n  \r\n  while (n--) {\r\n    u8arr[n] = bstr.charCodeAt(n);\r\n  }\r\n  \r\n  return new File([u8arr], filename, { type: mime });\r\n};\r\n\r\n/**\r\n * Extract Cloudinary public ID from URL\r\n * @param url - Cloudinary URL\r\n * @returns Public ID or null if not a valid Cloudinary URL\r\n */\r\nexport const extractPublicId = (url: string): string | null => {\r\n  try {\r\n    const regex = /\\/v\\d+\\/(.+)\\.[a-zA-Z]+$/;\r\n    const match = url.match(regex);\r\n    return match ? match[1] : null;\r\n  } catch {\r\n    return null;\r\n  }\r\n};\r\n\r\n/**\r\n * Check if a URL is a Cloudinary URL\r\n * @param url - URL to check\r\n * @returns Boolean\r\n */\r\nexport const isCloudinaryUrl = (url: string): boolean => {\r\n  return url.includes('cloudinary.com') && url.includes(CLOUD_NAME);\r\n};\r\n\r\n/**\r\n * Check if Cloudinary is configured and show appropriate message\r\n */\r\nexport const checkCloudinaryConfig = (): { configured: boolean; message?: string } => {\r\n  if (!isCloudinaryConfigured()) {\r\n    return {\r\n      configured: false,\r\n      message: 'Cloudinary is not configured. Using mock images for development. To enable real image uploads, please update your .env.local file with valid Cloudinary credentials.'\r\n    };\r\n  }\r\n  return { configured: true };\r\n};"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3208, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/osr99/OneDrive/Documents/GitHub/pantypost/src/hooks/useMyListings.ts"],"sourcesContent":["// src/hooks/useMyListings.ts\r\n\r\nimport { useState, useEffect, useRef, useCallback, useContext } from 'react';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { useListings } from '@/context/ListingContext';\r\nimport { WalletContext } from '@/context/WalletContext';\r\nimport { listingsService } from '@/services';\r\nimport { Listing } from '@/context/ListingContext';\r\nimport { ListingFormState, EditingState, ListingAnalytics, ListingDraft } from '@/types/myListings';\r\nimport { \r\n  INITIAL_FORM_STATE, \r\n  calculateAuctionEndTime \r\n} from '@/utils/myListingsUtils';\r\nimport { uploadMultipleToCloudinary, checkCloudinaryConfig } from '@/utils/cloudinary';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport { listingSchemas, financialSchemas } from '@/utils/validation/schemas';\r\nimport { sanitizeStrict, sanitizeNumber } from '@/utils/security/sanitization';\r\nimport { securityService } from '@/services';\r\nimport { z } from 'zod';\r\nimport { ApiResponse } from '@/services/api.config';\r\n\r\n// Validation schema for listing form\r\nconst listingFormSchema = z.object({\r\n  title: listingSchemas.title,\r\n  description: listingSchemas.description,\r\n  price: z.string().regex(/^\\d+(\\.\\d{1,2})?$/, 'Invalid price format'),\r\n  isPremium: z.boolean(),\r\n  tags: z.string(),\r\n  hoursWorn: z.union([z.string(), z.number()]),\r\n  isAuction: z.boolean(),\r\n  startingPrice: z.string().optional(),\r\n  reservePrice: z.string().optional(),\r\n  auctionDuration: z.string()\r\n});\r\n\r\n// Sanitize listing form data\r\nfunction sanitizeFormState(formState: ListingFormState): ListingFormState {\r\n  return {\r\n    ...formState,\r\n    title: sanitizeStrict(formState.title),\r\n    description: sanitizeStrict(formState.description),\r\n    tags: formState.tags.split(',').map(tag => sanitizeStrict(tag.trim())).join(', '),\r\n    price: formState.price, // Keep as string for form\r\n    startingPrice: formState.startingPrice,\r\n    reservePrice: formState.reservePrice,\r\n    auctionDuration: formState.auctionDuration\r\n  };\r\n}\r\n\r\nexport const useMyListings = () => {\r\n  const { user } = useAuth();\r\n  const { \r\n    listings = [], \r\n    addListing, \r\n    addAuctionListing, \r\n    removeListing, \r\n    updateListing, \r\n    cancelAuction,\r\n    saveDraft: saveListingDraft,\r\n    getDrafts: getListingDrafts,\r\n    deleteDraft: deleteListingDraft,\r\n    refreshListings,\r\n    isLoading: listingsLoading,\r\n    error: listingsError\r\n  } = useListings();\r\n  \r\n  // Use useContext to get wallet context - it might be undefined\r\n  const walletContext = useContext(WalletContext);\r\n  const orderHistory = walletContext?.orderHistory || [];\r\n\r\n  // Form state\r\n  const [formState, setFormState] = useState<ListingFormState>(INITIAL_FORM_STATE);\r\n  const [showForm, setShowForm] = useState(false);\r\n  const [selectedFiles, setSelectedFiles] = useState<File[]>([]);\r\n  const [isUploading, setIsUploading] = useState(false);\r\n  const [uploadProgress, setUploadProgress] = useState(0);\r\n  \r\n  // Editing state\r\n  const [editingState, setEditingState] = useState<EditingState>({\r\n    listingId: null,\r\n    isEditing: false\r\n  });\r\n  \r\n  // Analytics state\r\n  const [viewsData, setViewsData] = useState<Record<string, number>>({});\r\n  const [viewsLoading, setViewsLoading] = useState<Record<string, boolean>>({});\r\n  \r\n  // Draft state\r\n  const [drafts, setDrafts] = useState<ListingDraft[]>([]);\r\n  const [isDraftLoading, setIsDraftLoading] = useState(false);\r\n  const [currentDraftId, setCurrentDraftId] = useState<string | null>(null);\r\n  \r\n  // Error state\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [validationErrors, setValidationErrors] = useState<Record<string, string>>({});\r\n  \r\n  // Drag refs\r\n  const dragItem = useRef<number | null>(null);\r\n  const dragOverItem = useRef<number | null>(null);\r\n  \r\n  // Track which listings we've loaded views for\r\n  const loadedViewsRef = useRef<Set<string>>(new Set());\r\n\r\n  const isVerified = user?.isVerified || user?.verificationStatus === 'verified';\r\n  const myListings = listings?.filter((listing: Listing) => listing.seller === user?.username) ?? [];\r\n  \r\n  // Calculate stats with validation\r\n  const auctionCount = myListings.filter((listing: Listing) => !!listing.auction).length;\r\n  const premiumCount = myListings.filter((listing: Listing) => listing.isPremium).length;\r\n  const standardCount = Math.max(0, myListings.length - (premiumCount + auctionCount));\r\n  \r\n  // Check listing limits\r\n  const maxListings = isVerified ? 25 : 2;\r\n  const atLimit = myListings.length >= maxListings;\r\n  \r\n  // Get seller orders with sanitization\r\n  const sellerOrders = orderHistory\r\n    .filter(order => order.seller === user?.username)\r\n    .sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime())\r\n    .map(order => ({\r\n      ...order,\r\n      title: sanitizeStrict(order.title || ''),\r\n      buyer: sanitizeStrict(order.buyer || '')\r\n    }));\r\n\r\n  // Load views data for all listings\r\n  useEffect(() => {\r\n    myListings.forEach(listing => {\r\n      // Skip if already loaded\r\n      if (loadedViewsRef.current.has(listing.id)) {\r\n        return;\r\n      }\r\n      \r\n      // Mark as loading/loaded\r\n      loadedViewsRef.current.add(listing.id);\r\n      \r\n      // Load view count with proper typing\r\n      listingsService.getListingViews(listing.id)\r\n        .then((result: ApiResponse<number>) => {\r\n          if (result.success && result.data !== undefined) {\r\n            const views = Math.max(0, parseInt(result.data.toString()) || 0);\r\n            setViewsData(prev => ({ ...prev, [listing.id]: views }));\r\n          }\r\n        })\r\n        .catch((error: any) => {\r\n          console.error(`Error loading views for listing ${listing.id}:`, error);\r\n          // Remove from loaded set so it can be retried\r\n          loadedViewsRef.current.delete(listing.id);\r\n        });\r\n    });\r\n  }, [myListings]);\r\n\r\n  // Load drafts with sanitization\r\n  useEffect(() => {\r\n    const loadDrafts = async () => {\r\n      if (!user || user.role !== 'seller') return;\r\n      \r\n      setIsDraftLoading(true);\r\n      try {\r\n        const userDrafts = await getListingDrafts();\r\n        // Sanitize draft data\r\n        const sanitizedDrafts = userDrafts.map(draft => ({\r\n          ...draft,\r\n          name: sanitizeStrict(draft.name || 'Untitled Draft'),\r\n          formState: sanitizeFormState(draft.formState)\r\n        }));\r\n        setDrafts(sanitizedDrafts);\r\n      } catch (error) {\r\n        console.error('Error loading drafts:', error);\r\n        setError('Failed to load drafts');\r\n      } finally {\r\n        setIsDraftLoading(false);\r\n      }\r\n    };\r\n    \r\n    loadDrafts();\r\n  }, [user, getListingDrafts]);\r\n\r\n  // Clear error after 5 seconds\r\n  useEffect(() => {\r\n    if (error) {\r\n      const timer = setTimeout(() => setError(null), 5000);\r\n      return () => clearTimeout(timer);\r\n    }\r\n    // Return undefined when there's no error\r\n    return undefined;\r\n  }, [error]);\r\n\r\n  // Update form state with sanitization\r\n  const updateFormState = useCallback((updates: Partial<ListingFormState>) => {\r\n    setFormState(prev => {\r\n      const updated = { ...prev, ...updates };\r\n      // Clear validation errors when fields change\r\n      setValidationErrors({});\r\n      return updated;\r\n    });\r\n  }, []);\r\n\r\n  // Reset form\r\n  const resetForm = useCallback(() => {\r\n    setFormState(INITIAL_FORM_STATE);\r\n    setSelectedFiles([]);\r\n    setEditingState({ listingId: null, isEditing: false });\r\n    setShowForm(false);\r\n    setUploadProgress(0);\r\n    setCurrentDraftId(null);\r\n    setError(null);\r\n    setValidationErrors({});\r\n  }, []);\r\n\r\n  // Handle file selection with validation\r\n  const handleFileSelect = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const files = e.target.files;\r\n    if (!files || files.length === 0) return;\r\n    \r\n    const newFiles = Array.from(files);\r\n    const validFiles: File[] = [];\r\n    const errors: string[] = [];\r\n    \r\n    newFiles.forEach(file => {\r\n      const validation = securityService.validateFileUpload(file, {\r\n        maxSize: 5 * 1024 * 1024, // 5MB\r\n        allowedTypes: ['image/jpeg', 'image/jpg', 'image/png', 'image/webp'],\r\n        allowedExtensions: ['jpg', 'jpeg', 'png', 'webp']\r\n      });\r\n      \r\n      if (validation.valid) {\r\n        validFiles.push(file);\r\n      } else {\r\n        errors.push(`${file.name}: ${validation.error}`);\r\n      }\r\n    });\r\n    \r\n    if (errors.length > 0) {\r\n      setError(errors.join(', '));\r\n    }\r\n    \r\n    setSelectedFiles(prev => [...prev, ...validFiles]);\r\n    e.target.value = '';\r\n  }, []);\r\n\r\n  // Remove selected file\r\n  const removeSelectedFile = useCallback((index: number) => {\r\n    setSelectedFiles(prev => prev.filter((_, i) => i !== index));\r\n  }, []);\r\n\r\n  // Upload files using Cloudinary\r\n  const handleUploadFiles = useCallback(async () => {\r\n    if (selectedFiles.length === 0) return;\r\n    \r\n    // Check Cloudinary configuration\r\n    const cloudinaryCheck = checkCloudinaryConfig();\r\n    if (!cloudinaryCheck.configured) {\r\n      console.warn(cloudinaryCheck.message);\r\n      // Show a user-friendly message\r\n      if (!error) {\r\n        setError('Using local image storage for development. Images will work but are stored in browser memory.');\r\n        // Clear the error after 3 seconds\r\n        setTimeout(() => setError(null), 3000);\r\n      }\r\n    }\r\n    \r\n    setIsUploading(true);\r\n    setUploadProgress(0);\r\n    \r\n    try {\r\n      // Validate all files before upload\r\n      for (const file of selectedFiles) {\r\n        const validation = securityService.validateFileUpload(file);\r\n        if (!validation.valid) {\r\n          throw new Error(validation.error);\r\n        }\r\n      }\r\n      \r\n      // Upload to Cloudinary with progress tracking\r\n      const uploadResults = await uploadMultipleToCloudinary(\r\n        selectedFiles,\r\n        (progress) => {\r\n          setUploadProgress(Math.round(progress));\r\n        }\r\n      );\r\n      \r\n      // Extract and validate URLs\r\n      const newImageUrls = uploadResults.map(result => {\r\n        // Validate URL\r\n        try {\r\n          new URL(result.url);\r\n          return result.url;\r\n        } catch {\r\n          throw new Error('Invalid image URL received from upload');\r\n        }\r\n      });\r\n      \r\n      // Update form state with new URLs\r\n      updateFormState({ imageUrls: [...formState.imageUrls, ...newImageUrls] });\r\n      setSelectedFiles([]);\r\n      setUploadProgress(0);\r\n      \r\n      console.log('Images uploaded successfully');\r\n    } catch (error) {\r\n      console.error(\"Error uploading images:\", error);\r\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error';\r\n      setError(sanitizeStrict(`Failed to upload images: ${errorMessage}`));\r\n    } finally {\r\n      setIsUploading(false);\r\n      setUploadProgress(0);\r\n    }\r\n  }, [selectedFiles, formState.imageUrls, updateFormState, error]);\r\n\r\n  // Remove image URL\r\n  const handleRemoveImageUrl = useCallback((urlToRemove: string) => {\r\n    updateFormState({ imageUrls: formState.imageUrls.filter(url => url !== urlToRemove) });\r\n  }, [formState.imageUrls, updateFormState]);\r\n\r\n  // Handle image reorder\r\n  const handleImageReorder = useCallback((dragIndex: number, dropIndex: number) => {\r\n    if (dragIndex < 0 || dropIndex < 0 || dragIndex >= formState.imageUrls.length || dropIndex >= formState.imageUrls.length) {\r\n      return;\r\n    }\r\n    \r\n    const _imageUrls = [...formState.imageUrls];\r\n    const draggedItemContent = _imageUrls[dragIndex];\r\n    _imageUrls.splice(dragIndex, 1);\r\n    _imageUrls.splice(dropIndex, 0, draggedItemContent);\r\n    updateFormState({ imageUrls: _imageUrls });\r\n  }, [formState.imageUrls, updateFormState]);\r\n\r\n  // Save as draft with validation\r\n  const handleSaveDraft = useCallback(async () => {\r\n    if (!user || user.role !== 'seller') return;\r\n    \r\n    setError(null);\r\n    \r\n    try {\r\n      // Sanitize form state before saving\r\n      const sanitizedFormState = sanitizeFormState(formState);\r\n      \r\n      const draft: ListingDraft = {\r\n        id: currentDraftId || uuidv4(),\r\n        seller: user.username,\r\n        formState: sanitizedFormState,\r\n        createdAt: currentDraftId ? drafts.find(d => d.id === currentDraftId)?.createdAt || new Date().toISOString() : new Date().toISOString(),\r\n        lastModified: new Date().toISOString(),\r\n        name: sanitizeStrict(formState.title || 'Untitled Draft')\r\n      };\r\n      \r\n      const success = await saveListingDraft(draft);\r\n      \r\n      if (success) {\r\n        // Update local drafts\r\n        setDrafts(prev => {\r\n          const existing = prev.findIndex(d => d.id === draft.id);\r\n          if (existing >= 0) {\r\n            const updated = [...prev];\r\n            updated[existing] = draft;\r\n            return updated;\r\n          } else {\r\n            return [...prev, draft];\r\n          }\r\n        });\r\n        \r\n        setCurrentDraftId(draft.id);\r\n        alert('Draft saved successfully!');\r\n      } else {\r\n        throw new Error('Failed to save draft');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error saving draft:', error);\r\n      setError('Failed to save draft. Please try again.');\r\n    }\r\n  }, [user, formState, currentDraftId, drafts, saveListingDraft]);\r\n\r\n  // Load draft\r\n  const handleLoadDraft = useCallback((draft: ListingDraft) => {\r\n    // Sanitize draft data before loading\r\n    const sanitizedFormState = sanitizeFormState(draft.formState);\r\n    setFormState(sanitizedFormState);\r\n    setCurrentDraftId(draft.id);\r\n    setShowForm(true);\r\n    setEditingState({ listingId: null, isEditing: false });\r\n    setValidationErrors({});\r\n  }, []);\r\n\r\n  // Delete draft\r\n  const handleDeleteDraft = useCallback(async (draftId: string) => {\r\n    if (confirm('Are you sure you want to delete this draft?')) {\r\n      try {\r\n        const success = await deleteListingDraft(draftId);\r\n        if (success) {\r\n          setDrafts(prev => prev.filter(d => d.id !== draftId));\r\n          if (currentDraftId === draftId) {\r\n            setCurrentDraftId(null);\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('Error deleting draft:', error);\r\n        setError('Failed to delete draft');\r\n      }\r\n    }\r\n  }, [currentDraftId, deleteListingDraft]);\r\n\r\n  // Validate form data\r\n  const validateFormData = useCallback((): boolean => {\r\n    const errors: Record<string, string> = {};\r\n    \r\n    // Validate basic fields\r\n    try {\r\n      listingSchemas.title.parse(formState.title);\r\n    } catch {\r\n      errors.title = 'Title must be 5-100 characters';\r\n    }\r\n    \r\n    try {\r\n      listingSchemas.description.parse(formState.description);\r\n    } catch {\r\n      errors.description = 'Description must be 20-2000 characters';\r\n    }\r\n    \r\n    if (formState.imageUrls.length === 0) {\r\n      errors.images = 'At least one image is required';\r\n    }\r\n    \r\n    // Validate price fields\r\n    if (formState.isAuction) {\r\n      const startingBid = parseFloat(formState.startingPrice);\r\n      if (isNaN(startingBid) || startingBid < 0.01 || startingBid > 10000) {\r\n        errors.startingPrice = 'Starting bid must be between $0.01 and $10,000';\r\n      }\r\n      \r\n      if (formState.reservePrice.trim() !== '') {\r\n        const reserveBid = parseFloat(formState.reservePrice);\r\n        if (isNaN(reserveBid) || reserveBid < startingBid) {\r\n          errors.reservePrice = 'Reserve price must be equal to or greater than starting bid';\r\n        }\r\n      }\r\n    } else {\r\n      const price = parseFloat(formState.price);\r\n      if (isNaN(price) || price < 0.01 || price > 10000) {\r\n        errors.price = 'Price must be between $0.01 and $10,000';\r\n      }\r\n    }\r\n    \r\n    // Validate hours worn\r\n    if (formState.hoursWorn !== '') {\r\n      const hours = parseInt(formState.hoursWorn.toString());\r\n      if (isNaN(hours) || hours < 0 || hours > 168) {\r\n        errors.hoursWorn = 'Hours worn must be between 0 and 168';\r\n      }\r\n    }\r\n    \r\n    setValidationErrors(errors);\r\n    return Object.keys(errors).length === 0;\r\n  }, [formState]);\r\n\r\n  // Save listing with validation and sanitization\r\n  const handleSaveListing = useCallback(async () => {\r\n    if (!validateFormData()) {\r\n      setError('Please fix the validation errors');\r\n      return;\r\n    }\r\n    \r\n    const { title, description, imageUrls, isAuction, startingPrice, reservePrice, auctionDuration, price, tags, hoursWorn, isPremium } = formState;\r\n    \r\n    setError(null);\r\n    \r\n    try {\r\n      // Sanitize all inputs\r\n      const sanitizedTitle = sanitizeStrict(title);\r\n      const sanitizedDescription = sanitizeStrict(description);\r\n      const tagsList = tags.split(',').map(tag => sanitizeStrict(tag.trim())).filter(tag => tag);\r\n      \r\n      if (isAuction) {\r\n        if (!isVerified) {\r\n          setError('You must be a verified seller to create auction listings.');\r\n          return;\r\n        }\r\n\r\n        const startingBid = sanitizeNumber(startingPrice, 0.01, 10000);\r\n        let reserveBid: number | undefined = undefined;\r\n        \r\n        if (reservePrice.trim() !== '') {\r\n          reserveBid = sanitizeNumber(reservePrice, startingBid, 10000);\r\n        }\r\n\r\n        const listingData = {\r\n          title: sanitizedTitle,\r\n          description: sanitizedDescription,\r\n          price: startingBid,\r\n          imageUrls,\r\n          seller: user?.username || 'unknown',\r\n          isPremium,\r\n          tags: tagsList,\r\n          hoursWorn: hoursWorn === '' ? undefined : sanitizeNumber(hoursWorn.toString(), 0, 168),\r\n        };\r\n\r\n        const auctionSettings = {\r\n          startingPrice: startingBid,\r\n          reservePrice: reserveBid,\r\n          endTime: calculateAuctionEndTime(auctionDuration)\r\n        };\r\n\r\n        await addAuctionListing(listingData, auctionSettings);\r\n        \r\n        // Delete draft if it was loaded\r\n        if (currentDraftId) {\r\n          await deleteListingDraft(currentDraftId);\r\n          setDrafts(prev => prev.filter(d => d.id !== currentDraftId));\r\n        }\r\n        \r\n        resetForm();\r\n      } else {\r\n        const numericPrice = sanitizeNumber(price, 0.01, 10000);\r\n\r\n        const listingData = {\r\n          title: sanitizedTitle,\r\n          description: sanitizedDescription,\r\n          price: numericPrice,\r\n          imageUrls,\r\n          seller: user?.username || 'unknown',\r\n          isPremium,\r\n          tags: tagsList,\r\n          hoursWorn: hoursWorn === '' ? undefined : sanitizeNumber(hoursWorn.toString(), 0, 168),\r\n        };\r\n\r\n        if (editingState.isEditing && editingState.listingId) {\r\n          if (updateListing) {\r\n            await updateListing(editingState.listingId, listingData);\r\n          } else {\r\n            console.error(\"updateListing function not available in context\");\r\n          }\r\n        } else {\r\n          await addListing(listingData);\r\n        }\r\n        \r\n        // Delete draft if it was loaded\r\n        if (currentDraftId) {\r\n          await deleteListingDraft(currentDraftId);\r\n          setDrafts(prev => prev.filter(d => d.id !== currentDraftId));\r\n        }\r\n        \r\n        resetForm();\r\n      }\r\n    } catch (error) {\r\n      console.error('Error saving listing:', error);\r\n      setError('Failed to save listing. Please try again.');\r\n    }\r\n  }, [formState, editingState, user, isVerified, addListing, addAuctionListing, updateListing, currentDraftId, deleteListingDraft, resetForm, validateFormData]);\r\n\r\n  // Handle edit click with sanitization\r\n  const handleEditClick = useCallback((listing: Listing) => {\r\n    setEditingState({ listingId: listing.id, isEditing: true });\r\n    setFormState({\r\n      title: sanitizeStrict(listing.title),\r\n      description: sanitizeStrict(listing.description),\r\n      price: listing.price.toString(),\r\n      imageUrls: listing.imageUrls || [],\r\n      isPremium: listing.isPremium ?? false,\r\n      tags: listing.tags ? listing.tags.map(tag => sanitizeStrict(tag)).join(', ') : '',\r\n      hoursWorn: listing.hoursWorn !== undefined && listing.hoursWorn !== null ? listing.hoursWorn : '',\r\n      isAuction: !!listing.auction,\r\n      startingPrice: listing.auction?.startingPrice.toString() || '',\r\n      reservePrice: listing.auction?.reservePrice?.toString() || '',\r\n      auctionDuration: listing.auction ? '1' : '1'\r\n    });\r\n    setSelectedFiles([]);\r\n    setShowForm(true);\r\n    setCurrentDraftId(null);\r\n    setValidationErrors({});\r\n    \r\n    // Handle auction data if present\r\n    if (listing.auction) {\r\n      // Calculate remaining days for auction\r\n      const endTime = new Date(listing.auction.endTime);\r\n      const now = new Date();\r\n      const daysRemaining = Math.ceil((endTime.getTime() - now.getTime()) / (1000 * 60 * 60 * 24));\r\n      updateFormState({ auctionDuration: Math.max(1, Math.min(7, daysRemaining)).toString() });\r\n    }\r\n  }, [updateFormState]);\r\n\r\n  // Handle cancel auction\r\n  const handleCancelAuction = useCallback(async (listingId: string) => {\r\n    if (confirm('Are you sure you want to cancel this auction? This action cannot be undone.')) {\r\n      try {\r\n        const success = await cancelAuction(listingId);\r\n        if (!success) {\r\n          setError('Failed to cancel auction');\r\n        }\r\n      } catch (error) {\r\n        console.error('Error cancelling auction:', error);\r\n        setError('Failed to cancel auction');\r\n      }\r\n    }\r\n  }, [cancelAuction]);\r\n\r\n  // Handle delete listing\r\n  const handleRemoveListing = useCallback(async (listingId: string) => {\r\n    if (confirm('Are you sure you want to remove this listing?')) {\r\n      try {\r\n        await removeListing(listingId);\r\n      } catch (error) {\r\n        console.error('Error removing listing:', error);\r\n        setError('Failed to remove listing');\r\n      }\r\n    }\r\n  }, [removeListing]);\r\n\r\n  // Get listing analytics\r\n  const getListingAnalytics = useCallback((listing: Listing): ListingAnalytics => {\r\n    const views = Math.max(0, viewsData[listing.id] || 0);\r\n    return { views };\r\n  }, [viewsData]);\r\n\r\n  // Drag handlers for direct use\r\n  const handleDragStart = useCallback((index: number) => {\r\n    if (index >= 0 && index < formState.imageUrls.length) {\r\n      dragItem.current = index;\r\n    }\r\n  }, [formState.imageUrls.length]);\r\n\r\n  const handleDragEnter = useCallback((index: number) => {\r\n    if (index >= 0 && index < formState.imageUrls.length) {\r\n      dragOverItem.current = index;\r\n    }\r\n  }, [formState.imageUrls.length]);\r\n\r\n  const handleDrop = useCallback(() => {\r\n    if (dragItem.current === null || dragOverItem.current === null) return;\r\n    \r\n    if (dragItem.current < 0 || dragOverItem.current < 0 || \r\n        dragItem.current >= formState.imageUrls.length || \r\n        dragOverItem.current >= formState.imageUrls.length) {\r\n      return;\r\n    }\r\n    \r\n    const _imageUrls = [...formState.imageUrls];\r\n    const draggedItemContent = _imageUrls[dragItem.current];\r\n    _imageUrls.splice(dragItem.current, 1);\r\n    _imageUrls.splice(dragOverItem.current, 0, draggedItemContent);\r\n    dragItem.current = null;\r\n    dragOverItem.current = null;\r\n    updateFormState({ imageUrls: _imageUrls });\r\n  }, [formState.imageUrls, updateFormState]);\r\n\r\n  return {\r\n    // State\r\n    user,\r\n    formState,\r\n    showForm,\r\n    selectedFiles,\r\n    isUploading,\r\n    uploadProgress,\r\n    editingState,\r\n    isVerified,\r\n    myListings,\r\n    atLimit,\r\n    maxListings,\r\n    auctionCount,\r\n    premiumCount,\r\n    standardCount,\r\n    sellerOrders,\r\n    drafts,\r\n    isDraftLoading,\r\n    currentDraftId,\r\n    error,\r\n    validationErrors,\r\n    isLoading: listingsLoading,\r\n    \r\n    // Actions\r\n    setShowForm,\r\n    updateFormState,\r\n    resetForm,\r\n    handleFileSelect,\r\n    removeSelectedFile,\r\n    handleUploadFiles,\r\n    handleRemoveImageUrl,\r\n    handleImageReorder,\r\n    handleSaveListing,\r\n    handleEditClick,\r\n    handleCancelAuction,\r\n    removeListing: handleRemoveListing,\r\n    getListingAnalytics,\r\n    handleSaveDraft,\r\n    handleLoadDraft,\r\n    handleDeleteDraft,\r\n    refreshListings,\r\n    \r\n    // Drag handlers for direct use\r\n    handleDragStart,\r\n    handleDragEnter,\r\n    handleDrop,\r\n  };\r\n};\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4032, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/osr99/OneDrive/Documents/GitHub/pantypost/src/app/sellers/my-listings/page.tsx"],"sourcesContent":["// src/app/sellers/my-listings/page.tsx\r\n'use client';\r\n\r\nimport { Crown, Sparkles, Gavel, BarChart2, Lock, ShieldCheck } from 'lucide-react';\r\nimport Link from 'next/link';\r\nimport BanCheck from '@/components/BanCheck';\r\nimport RequireAuth from '@/components/RequireAuth';\r\nimport ListingCard from '@/components/myListings/ListingCard';\r\nimport ListingForm from '@/components/myListings/ListingForm';\r\nimport RecentSales from '@/components/myListings/RecentSales';\r\nimport { useMyListings } from '@/hooks/useMyListings';\r\n\r\nconst AUCTION_TIPS = [\r\n  'Set a competitive starting price to attract initial bids.',\r\n  \"Use a reserve price to ensure you don't sell below your minimum acceptable price.\",\r\n  'Add high-quality photos and detailed descriptions to encourage higher bids.',\r\n  'Auctions create excitement and can result in higher final prices than fixed listings.',\r\n];\r\n\r\nconst PREMIUM_TIPS = [\r\n  'Premium listings are only visible to your subscribers, increasing exclusivity.',\r\n  'Set your monthly subscription price in your profile settings to unlock premium features.',\r\n  'Use high-quality, appealing images for your listings to attract more views and buyers.',\r\n  'Premium listings can often command higher prices due to their exclusive nature.',\r\n];\r\n\r\n// Separate the main content into its own component\r\nfunction MyListingsContent() {\r\n  const {\r\n    // State\r\n    user,\r\n    showForm,\r\n    formState,\r\n    selectedFiles,\r\n    isUploading,\r\n    uploadProgress,\r\n    editingState,\r\n    isVerified,\r\n    myListings,\r\n    atLimit,\r\n    maxListings, // kept in case the UI references it later\r\n    auctionCount,\r\n    premiumCount,\r\n    standardCount,\r\n    sellerOrders,\r\n\r\n    // Actions\r\n    setShowForm,\r\n    updateFormState,\r\n    resetForm,\r\n    handleFileSelect,\r\n    removeSelectedFile,\r\n    handleUploadFiles,\r\n    handleRemoveImageUrl,\r\n    handleImageReorder,\r\n    handleSaveListing,\r\n    handleEditClick,\r\n    handleCancelAuction,\r\n    removeListing,\r\n    getListingAnalytics,\r\n  } = useMyListings();\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className=\"min-h-screen bg-black flex items-center justify-center\">\r\n        <div className=\"text-white\">Loading...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <main className=\"min-h-screen bg-black text-white py-10 px-4 sm:px-6 lg:px-8\">\r\n      <div className=\"max-w-7xl mx-auto\">\r\n        {/* Page Title */}\r\n        <div className=\"mb-8\">\r\n          <h1 className=\"text-3xl sm:text-4xl font-bold text-white\">My Listings</h1>\r\n          <div className=\"w-16 h-1 bg-[#ff950e] mt-2 rounded-full\"></div>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8 lg:gap-12\">\r\n          {/* Left side: form + active listings */}\r\n          <div className=\"lg:col-span-2 space-y-8\">\r\n            {/* Stats Overview */}\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-4\">\r\n              <div className=\"bg-[#1a1a1a] p-6 rounded-xl shadow-lg border border-gray-800\">\r\n                <div className=\"flex justify-between items-center\">\r\n                  <div>\r\n                    <h3 className=\"text-lg font-semibold text-gray-300\">Standard Listings</h3>\r\n                    <span className=\"text-4xl font-bold text-white\">{standardCount ?? 0}</span>\r\n                  </div>\r\n                  <Sparkles className=\"w-10 h-10 text-gray-600\" />\r\n                </div>\r\n              </div>\r\n              <div className=\"bg-[#1a1a1a] p-6 rounded-xl shadow-lg border border-[#ff950e]\">\r\n                <div className=\"flex justify-between items-center\">\r\n                  <div>\r\n                    <h3 className=\"text-lg font-semibold text-gray-300\">Premium Listings</h3>\r\n                    <span className=\"text-4xl font-bold text-[#ff950e]\">{premiumCount ?? 0}</span>\r\n                  </div>\r\n                  <Crown className=\"w-10 h-10 text-[#ff950e]\" />\r\n                </div>\r\n              </div>\r\n              <div className=\"bg-[#1a1a1a] p-6 rounded-xl shadow-lg border border-purple-700\">\r\n                <div className=\"flex justify-between items-center\">\r\n                  <div>\r\n                    <h3 className=\"text-lg font-semibold text-gray-300\">Auction Listings</h3>\r\n                    <span className=\"text-4xl font-bold text-purple-500\">{auctionCount ?? 0}</span>\r\n                  </div>\r\n                  <Gavel className=\"w-10 h-10 text-purple-500\" />\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Listing Limit Message */}\r\n            {atLimit && !editingState.isEditing && (\r\n              <div className=\"bg-yellow-900 border border-yellow-700 text-yellow-200 rounded-lg p-4 my-4 text-center font-semibold\">\r\n                {isVerified ? (\r\n                  <>You have reached the maximum of <span className=\"text-[#ff950e] font-bold\">25</span> listings for verified sellers.</>\r\n                ) : (\r\n                  <>\r\n                    Unverified sellers can only have <span className=\"text-[#ff950e] font-bold\">2</span> active listings.<br />\r\n                    <span className=\"block mt-2\">\r\n                      <Link\r\n                        href=\"/sellers/verify\"\r\n                        className=\"text-[#ff950e] font-bold underline hover:text-white transition\"\r\n                      >\r\n                        Verify your account\r\n                      </Link>{' '}\r\n                      to add up to 25 listings!\r\n                    </span>\r\n                  </>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* Create Listing Button or Form */}\r\n            {!showForm && !editingState.isEditing && (\r\n              <div className=\"flex justify-center\">\r\n                <button\r\n                  onClick={() => setShowForm(true)}\r\n                  className=\"px-8 py-3 rounded-full bg-[#ff950e] text-black font-bold text-lg shadow-lg hover:bg-[#e0850d] transition flex items-center gap-2\"\r\n                  disabled={atLimit}\r\n                  style={atLimit ? { opacity: 0.5, cursor: 'not-allowed' } : {}}\r\n                >\r\n                  <Sparkles className=\"w-5 h-5\" />\r\n                  Create New Listing\r\n                </button>\r\n              </div>\r\n            )}\r\n\r\n            {(showForm || editingState.isEditing) && (\r\n              <div className=\"bg-[#1a1a1a] p-6 sm:p-8 rounded-xl shadow-lg border border-gray-800\">\r\n                <ListingForm\r\n                  formState={formState}\r\n                  isEditing={editingState.isEditing}\r\n                  isVerified={isVerified}\r\n                  selectedFiles={selectedFiles}\r\n                  isUploading={isUploading}\r\n                  uploadProgress={uploadProgress}\r\n                  onFormChange={updateFormState}\r\n                  onFileSelect={handleFileSelect}\r\n                  onRemoveFile={removeSelectedFile}\r\n                  onUploadFiles={handleUploadFiles}\r\n                  onRemoveImage={handleRemoveImageUrl}\r\n                  onImageReorder={handleImageReorder}\r\n                  onSave={handleSaveListing}\r\n                  onCancel={resetForm}\r\n                />\r\n              </div>\r\n            )}\r\n\r\n            {/* Active Listings */}\r\n            <div className=\"bg-[#1a1a1a] p-6 sm:p-8 rounded-xl shadow-lg border border-gray-800\">\r\n              <h2 className=\"text-2xl font-bold mb-6 text-white flex items-center gap-3\">\r\n                Your Active Listings\r\n                <BarChart2 className=\"w-6 h-6 text-[#ff950e]\" />\r\n              </h2>\r\n              {(myListings?.length ?? 0) === 0 ? (\r\n                <div className=\"text-center py-10 bg-black rounded-lg border border-dashed border-gray-700 text-gray-400\">\r\n                  <p className=\"text-lg mb-2\">You haven't created any listings yet.</p>\r\n                  <p className=\"text-sm\">Use the button above to add your first listing.</p>\r\n                </div>\r\n              ) : (\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                  {myListings!.map((listing) => (\r\n                    <ListingCard\r\n                      key={listing.id}\r\n                      listing={listing}\r\n                      analytics={getListingAnalytics(listing)}\r\n                      onEdit={handleEditClick}\r\n                      onDelete={removeListing}\r\n                      onCancelAuction={handleCancelAuction}\r\n                    />\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Right side: verification banner, tips, and order history */}\r\n          <div className=\"space-y-8\">\r\n            {/* Verification Banner */}\r\n            {!isVerified && (\r\n              <div className=\"bg-[#1a1a1a] p-6 sm:p-8 rounded-xl shadow-lg border border-yellow-700\">\r\n                <h2 className=\"text-2xl font-bold mb-5 text-white flex items-center gap-3\">\r\n                  <ShieldCheck className=\"text-yellow-500 w-6 h-6\" />\r\n                  Get Verified\r\n                </h2>\r\n                <div className=\"mb-5\">\r\n                  <p className=\"text-gray-300 mb-3\">Verified sellers get these exclusive benefits:</p>\r\n                  <ul className=\"space-y-2 text-gray-300 text-sm\">\r\n                    <li className=\"flex items-start gap-2\">\r\n                      <span className=\"text-yellow-500 font-bold text-lg leading-none\">•</span>\r\n                      <span>Post up to <span className=\"text-yellow-500 font-bold\">25 listings</span> (vs only 2 for unverified)</span>\r\n                    </li>\r\n                    <li className=\"flex items-start gap-2\">\r\n                      <span className=\"text-yellow-500 font-bold text-lg leading-none\">•</span>\r\n                      <span>Create <span className=\"text-purple-400 font-bold\">auction listings</span> for higher bids</span>\r\n                    </li>\r\n                    <li className=\"flex items-start gap-2\">\r\n                      <span className=\"text-yellow-500 font-bold text-lg leading-none\">•</span>\r\n                      <div className=\"flex items-center\">\r\n                        <span>Display a verification badge </span>\r\n                        <img src=\"/verification_badge.png\" alt=\"Verification Badge\" className=\"w-4 h-4 mx-1\" />\r\n                        <span> on your profile and listings</span>\r\n                      </div>\r\n                    </li>\r\n                    <li className=\"flex items-start gap-2\">\r\n                      <span className=\"text-yellow-500 font-bold text-lg leading-none\">•</span>\r\n                      <span>Earn buyers' trust for more sales and higher prices</span>\r\n                    </li>\r\n                  </ul>\r\n                </div>\r\n                <Link\r\n                  href=\"/sellers/verify\"\r\n                  className=\"w-full bg-yellow-600 text-white px-6 py-3 rounded-lg hover:bg-yellow-500 font-bold text-lg transition flex items-center justify-center gap-2\"\r\n                >\r\n                  <ShieldCheck className=\"w-5 h-5\" />\r\n                  Verify My Account\r\n                </Link>\r\n              </div>\r\n            )}\r\n\r\n            {/* Auction Seller Tips */}\r\n            <div className=\"bg-[#1a1a1a] p-6 sm:p-8 rounded-xl shadow-lg border border-purple-700\">\r\n              <h2 className=\"text-2xl font-bold mb-5 text-white flex items-center gap-3\">\r\n                <Gavel className=\"text-purple-500 w-6 h-6\" />\r\n                Auction Tips\r\n              </h2>\r\n              <ul className=\"space-y-4 text-gray-300 text-sm\">\r\n                {AUCTION_TIPS.map((tip, index) => (\r\n                  <li key={index} className=\"flex items-start gap-2\">\r\n                    <span className=\"text-purple-500 font-bold text-lg leading-none\">•</span>\r\n                    <span>{tip}</span>\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n              {!isVerified && (\r\n                <div className=\"mt-5 pt-4 border-t border-gray-700\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <Lock className=\"text-yellow-500 w-5 h-5\" />\r\n                    <p className=\"text-yellow-400 text-sm\">\r\n                      <Link href=\"/sellers/verify\" className=\"underline hover:text-yellow-300\">\r\n                        Get verified\r\n                      </Link>{' '}\r\n                      to unlock auction listings!\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Premium Seller Tips */}\r\n            <div className=\"bg-[#1a1a1a] p-6 sm:p-8 rounded-xl shadow-lg border border-[#ff950e]\">\r\n              <h2 className=\"text-2xl font-bold mb-5 text-white flex items-center gap-3\">\r\n                <Crown className=\"text-[#ff950e] w-6 h-6\" />\r\n                Premium Seller Tips\r\n              </h2>\r\n              <ul className=\"space-y-4 text-gray-300 text-sm\">\r\n                {PREMIUM_TIPS.map((tip, index) => (\r\n                  <li key={index} className=\"flex items-start gap-2\">\r\n                    <span className=\"text-[#ff950e] font-bold text-lg leading-none\">•</span>\r\n                    <span>{tip}</span>\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            </div>\r\n\r\n            {/* Recent Sales */}\r\n            <RecentSales orders={sellerOrders || []} />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n\r\n// Main page component with proper provider wrapping\r\nexport default function MyListingsPage() {\r\n  return (\r\n    <BanCheck>\r\n      <RequireAuth role=\"seller\">\r\n        <MyListingsContent />\r\n      </RequireAuth>\r\n    </BanCheck>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}