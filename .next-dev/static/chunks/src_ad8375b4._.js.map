{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/gerom/OneDrive/Documents/pantypost/src/components/RequireAuth.tsx"],"sourcesContent":["// src/components/RequireAuth.tsx\r\n'use client';\r\n\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useEffect, useState } from 'react';\r\nimport { z } from 'zod';\r\n\r\nconst VALID_ROLES = ['buyer', 'seller', 'admin'] as const;\r\ntype ValidRole = (typeof VALID_ROLES)[number];\r\n\r\nconst RoleSchema = z.enum(VALID_ROLES);\r\n\r\nexport default function RequireAuth({\r\n  role,\r\n  children,\r\n}: {\r\n  role: ValidRole;\r\n  children: React.ReactNode;\r\n}) {\r\n  const { user, isAuthReady } = useAuth();\r\n  const router = useRouter();\r\n  const [authorized, setAuthorized] = useState(false);\r\n  const [hasChecked, setHasChecked] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!isAuthReady || hasChecked) return;\r\n\r\n    // Runtime validation of `role` prop (dev-only noise)\r\n    const parsed = RoleSchema.safeParse(role);\r\n    if (!parsed.success) {\r\n      if (process.env.NODE_ENV === 'development') {\r\n        console.warn('[RequireAuth] Invalid role prop supplied:', role);\r\n      }\r\n      router.push('/login');\r\n      setHasChecked(true);\r\n      return;\r\n    }\r\n\r\n    const userRole = user?.role as ValidRole | undefined;\r\n\r\n    // NEW: strict role matching — no admin override for buyer/seller routes\r\n    let hasAccess = false;\r\n    if (parsed.data === 'admin') {\r\n      hasAccess = userRole === 'admin';\r\n    } else {\r\n      hasAccess = userRole === parsed.data; // admin can’t view buyer/seller pages\r\n    }\r\n\r\n    if (!user || !hasAccess) {\r\n      router.push('/login');\r\n    } else {\r\n      setAuthorized(true);\r\n    }\r\n\r\n    setHasChecked(true);\r\n  }, [isAuthReady, user, role, router, hasChecked]);\r\n\r\n  if (!isAuthReady || !hasChecked) {\r\n    return (\r\n      <div className=\"min-h-screen bg-black flex items-center justify-center\" role=\"status\" aria-label=\"Checking access\">\r\n        <div className=\"flex items-center space-x-2\">\r\n          <div className=\"w-4 h-4 bg-[#ff950e] rounded-full animate-pulse\" />\r\n          <div className=\"w-4 h-4 bg-[#ff950e] rounded-full animate-pulse\" style={{ animationDelay: '0.2s' }} />\r\n          <div className=\"w-4 h-4 bg-[#ff950e] rounded-full animate-pulse\" style={{ animationDelay: '0.4s' }} />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!authorized) return null;\r\n\r\n  return <>{children}</>;\r\n}\r\n"],"names":[],"mappings":"AAAA,iCAAiC;;;;AA+BvB;;AA5BV;AACA;AACA;AACA;;;AALA;;;;;AAOA,MAAM,cAAc;IAAC;IAAS;IAAU;CAAQ;AAGhD,MAAM,aAAa,qKAAA,CAAA,IAAC,CAAC,IAAI,CAAC;;AAEX,SAAS,YAAY,KAMnC;QANmC,EAClC,IAAI,EACJ,QAAQ,EAIT,GANmC;;IAOlC,MAAM,EAAE,IAAI,EAAE,WAAW,EAAE,GAAG,CAAA,GAAA,iIAAA,CAAA,UAAO,AAAD;IACpC,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC7C,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAE7C,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;iCAAE;YACR,IAAI,CAAC,eAAe,YAAY;YAEhC,qDAAqD;YACrD,MAAM,SAAS,WAAW,SAAS,CAAC;YACpC,IAAI,CAAC,OAAO,OAAO,EAAE;gBACnB,wCAA4C;oBAC1C,QAAQ,IAAI,CAAC,6CAA6C;gBAC5D;gBACA,OAAO,IAAI,CAAC;gBACZ,cAAc;gBACd;YACF;YAEA,MAAM,WAAW,iBAAA,2BAAA,KAAM,IAAI;YAE3B,wEAAwE;YACxE,IAAI,YAAY;YAChB,IAAI,OAAO,IAAI,KAAK,SAAS;gBAC3B,YAAY,aAAa;YAC3B,OAAO;gBACL,YAAY,aAAa,OAAO,IAAI,EAAE,sCAAsC;YAC9E;YAEA,IAAI,CAAC,QAAQ,CAAC,WAAW;gBACvB,OAAO,IAAI,CAAC;YACd,OAAO;gBACL,cAAc;YAChB;YAEA,cAAc;QAChB;gCAAG;QAAC;QAAa;QAAM;QAAM;QAAQ;KAAW;IAEhD,IAAI,CAAC,eAAe,CAAC,YAAY;QAC/B,qBACE,6LAAC;YAAI,WAAU;YAAyD,MAAK;YAAS,cAAW;sBAC/F,cAAA,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;;;;;kCACf,6LAAC;wBAAI,WAAU;wBAAkD,OAAO;4BAAE,gBAAgB;wBAAO;;;;;;kCACjG,6LAAC;wBAAI,WAAU;wBAAkD,OAAO;4BAAE,gBAAgB;wBAAO;;;;;;;;;;;;;;;;;IAIzG;IAEA,IAAI,CAAC,YAAY,OAAO;IAExB,qBAAO;kBAAG;;AACZ;GA5DwB;;QAOQ,iIAAA,CAAA,UAAO;QACtB,qIAAA,CAAA,YAAS;;;MARF","debugId":null}},
    {"offset": {"line": 144, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/gerom/OneDrive/Documents/pantypost/src/components/admin/verification/VerificationHeader.tsx"],"sourcesContent":["// src/components/admin/verification/VerificationHeader.tsx\r\n'use client';\r\n\r\nimport { Shield, RefreshCw } from 'lucide-react';\r\nimport type { VerificationHeaderProps } from '@/types/verification';\r\n\r\nexport default function VerificationHeader({ onRefresh }: VerificationHeaderProps) {\r\n  return (\r\n    <header className=\"sticky top-0 z-30 bg-black bg-opacity-90 backdrop-blur-sm border-b border-[#2a2a2a] shadow-md\">\r\n      <div className=\"max-w-7xl mx-auto px-4 md:px-6 py-4 flex flex-col sm:flex-row sm:items-center justify-between gap-3\">\r\n        <div className=\"flex items-center\">\r\n          <Shield className=\"w-6 h-6 text-[#ff950e] mr-3\" />\r\n          <h1 className=\"text-xl font-bold text-white\">Verification Center</h1>\r\n        </div>\r\n        {typeof onRefresh === 'function' && (\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => { onRefresh(); }}\r\n            className=\"px-4 py-2 bg-[#1a1a1a] border border-gray-700 rounded-lg text-white hover:bg-[#222] transition flex items-center gap-2\"\r\n            aria-label=\"Refresh verification list\"\r\n          >\r\n            <RefreshCw size={16} />\r\n            Refresh\r\n          </button>\r\n        )}\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,2DAA2D;;;;;AAG3D;AAAA;AAFA;;;AAKe,SAAS,mBAAmB,KAAsC;QAAtC,EAAE,SAAS,EAA2B,GAAtC;IACzC,qBACE,6LAAC;QAAO,WAAU;kBAChB,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAI,WAAU;;sCACb,6LAAC,yMAAA,CAAA,SAAM;4BAAC,WAAU;;;;;;sCAClB,6LAAC;4BAAG,WAAU;sCAA+B;;;;;;;;;;;;gBAE9C,OAAO,cAAc,4BACpB,6LAAC;oBACC,MAAK;oBACL,SAAS;wBAAQ;oBAAa;oBAC9B,WAAU;oBACV,cAAW;;sCAEX,6LAAC,mNAAA,CAAA,YAAS;4BAAC,MAAM;;;;;;wBAAM;;;;;;;;;;;;;;;;;;AAOnC;KAtBwB","debugId":null}},
    {"offset": {"line": 231, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/gerom/OneDrive/Documents/pantypost/src/components/admin/verification/VerificationSearch.tsx"],"sourcesContent":["// src/components/admin/verification/VerificationSearch.tsx\r\n'use client';\r\n\r\nimport { useCallback, useMemo } from 'react';\r\nimport { Search, UserCheck } from 'lucide-react';\r\nimport { SecureInput } from '@/components/ui/SecureInput';\r\nimport { sanitizeSearchQuery } from '@/utils/security/sanitization';\r\nimport type { VerificationSearchProps } from '@/types/verification';\r\n\r\nexport default function VerificationSearch({\r\n  searchTerm,\r\n  onSearchChange,\r\n  sortBy,\r\n  onSortChange,\r\n  pendingCount\r\n}: VerificationSearchProps) {\r\n  const handleSearchChange = useCallback((value: string) => {\r\n    onSearchChange(sanitizeSearchQuery(value));\r\n  }, [onSearchChange]);\r\n\r\n  const handleSortChange = useCallback(\r\n    (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n      const v = e.target.value as 'newest' | 'oldest' | 'alphabetical';\r\n      onSortChange(v);\r\n    },\r\n    [onSortChange]\r\n  );\r\n\r\n  // prevent negative / NaN\r\n  const safePending = useMemo(() => {\r\n    const n = Number(pendingCount);\r\n    return Number.isFinite(n) && n >= 0 ? n : 0;\r\n  }, [pendingCount]);\r\n\r\n  return (\r\n    <div className=\"max-w-7xl mx-auto px-4 md:px-6 py-6\">\r\n      {/* Search Bar */}\r\n      <div className=\"mb-6\">\r\n        <div className=\"relative max-w-md\">\r\n          <Search className=\"absolute left-3 top-3 text-gray-500 w-4 h-4 z-10\" aria-hidden=\"true\" />\r\n          <SecureInput\r\n            type=\"text\"\r\n            placeholder=\"Search username...\"\r\n            aria-label=\"Search username\"\r\n            value={searchTerm}\r\n            onChange={handleSearchChange}\r\n            className=\"w-full bg-[#121212] border border-[#2a2a2a] text-white rounded-lg pl-10 pr-4 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-[#ff950e] focus:border-[#ff950e] transition-all\"\r\n            maxLength={100}\r\n            sanitize={true}\r\n            sanitizer={sanitizeSearchQuery}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Control Panel */}\r\n      <div className=\"mb-6 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\r\n        <div>\r\n          <h2 className=\"text-2xl font-bold text-[#ff950e] flex items-center\">\r\n            <UserCheck className=\"mr-2 h-6 w-6\" aria-hidden=\"true\" />\r\n            Pending Verifications\r\n            <span\r\n              className=\"ml-3 text-sm bg-[#1f1f1f] text-gray-300 rounded-full px-3 py-1 font-normal\"\r\n              aria-label={`${safePending} ${safePending === 1 ? 'request' : 'requests'}`}\r\n            >\r\n              {safePending} {safePending === 1 ? 'request' : 'requests'}\r\n            </span>\r\n          </h2>\r\n          <p className=\"text-gray-400 text-sm mt-1\">\r\n            Review and validate seller identity documents\r\n          </p>\r\n        </div>\r\n        <div className=\"flex items-center gap-3\">\r\n          <label htmlFor=\"verification-sort\" className=\"text-gray-400 text-sm\">\r\n            Sort by:\r\n          </label>\r\n          <select\r\n            id=\"verification-sort\"\r\n            value={sortBy}\r\n            onChange={handleSortChange}\r\n            className=\"bg-[#1a1a1a] border border-[#2a2a2a] text-white rounded-lg px-3 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-[#ff950e] cursor-pointer\"\r\n            aria-label=\"Sort pending verifications\"\r\n          >\r\n            <option value=\"newest\">Newest first</option>\r\n            <option value=\"oldest\">Oldest first</option>\r\n            <option value=\"alphabetical\">Alphabetical</option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,2DAA2D;;;;;AAG3D;AACA;AAAA;AACA;AACA;;;AALA;;;;;AAQe,SAAS,mBAAmB,KAMjB;QANiB,EACzC,UAAU,EACV,cAAc,EACd,MAAM,EACN,YAAY,EACZ,YAAY,EACY,GANiB;;IAOzC,MAAM,qBAAqB,CAAA,GAAA,6JAAA,CAAA,cAAW,AAAD;8DAAE,CAAC;YACtC,eAAe,CAAA,GAAA,2IAAA,CAAA,sBAAmB,AAAD,EAAE;QACrC;6DAAG;QAAC;KAAe;IAEnB,MAAM,mBAAmB,CAAA,GAAA,6JAAA,CAAA,cAAW,AAAD;4DACjC,CAAC;YACC,MAAM,IAAI,EAAE,MAAM,CAAC,KAAK;YACxB,aAAa;QACf;2DACA;QAAC;KAAa;IAGhB,yBAAyB;IACzB,MAAM,cAAc,CAAA,GAAA,6JAAA,CAAA,UAAO,AAAD;mDAAE;YAC1B,MAAM,IAAI,OAAO;YACjB,OAAO,OAAO,QAAQ,CAAC,MAAM,KAAK,IAAI,IAAI;QAC5C;kDAAG;QAAC;KAAa;IAEjB,qBACE,6LAAC;QAAI,WAAU;;0BAEb,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC,yMAAA,CAAA,SAAM;4BAAC,WAAU;4BAAmD,eAAY;;;;;;sCACjF,6LAAC,0IAAA,CAAA,cAAW;4BACV,MAAK;4BACL,aAAY;4BACZ,cAAW;4BACX,OAAO;4BACP,UAAU;4BACV,WAAU;4BACV,WAAW;4BACX,UAAU;4BACV,WAAW,2IAAA,CAAA,sBAAmB;;;;;;;;;;;;;;;;;0BAMpC,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;;0CACC,6LAAC;gCAAG,WAAU;;kDACZ,6LAAC,mNAAA,CAAA,YAAS;wCAAC,WAAU;wCAAe,eAAY;;;;;;oCAAS;kDAEzD,6LAAC;wCACC,WAAU;wCACV,cAAY,AAAC,GAAiB,OAAf,aAAY,KAA8C,OAA3C,gBAAgB,IAAI,YAAY;;4CAE7D;4CAAY;4CAAE,gBAAgB,IAAI,YAAY;;;;;;;;;;;;;0CAGnD,6LAAC;gCAAE,WAAU;0CAA6B;;;;;;;;;;;;kCAI5C,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAM,SAAQ;gCAAoB,WAAU;0CAAwB;;;;;;0CAGrE,6LAAC;gCACC,IAAG;gCACH,OAAO;gCACP,UAAU;gCACV,WAAU;gCACV,cAAW;;kDAEX,6LAAC;wCAAO,OAAM;kDAAS;;;;;;kDACvB,6LAAC;wCAAO,OAAM;kDAAS;;;;;;kDACvB,6LAAC;wCAAO,OAAM;kDAAe;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMzC;GAjFwB;KAAA","debugId":null}},
    {"offset": {"line": 448, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/gerom/OneDrive/Documents/pantypost/src/components/admin/verification/VerificationStats.tsx"],"sourcesContent":["// src/components/admin/verification/VerificationStats.tsx\r\n'use client';\r\n\r\nimport { useMemo } from 'react';\r\nimport { FileCheck, Clock, Calendar, Timer } from 'lucide-react';\r\nimport type { VerificationStatsProps } from '@/types/verification';\r\n\r\nexport default function VerificationStats({ stats }: VerificationStatsProps) {\r\n  const safeNumber = (value: unknown): number => {\r\n    const num = Number(value);\r\n    return Number.isFinite(num) && num >= 0 ? num : 0;\r\n  };\r\n\r\n  const totals = useMemo(() => ({\r\n    total: safeNumber(stats?.total),\r\n    today: safeNumber(stats?.today),\r\n    thisWeek: safeNumber(stats?.thisWeek),\r\n    avgHours: safeNumber(stats?.averageProcessingTime)\r\n  }), [stats]);\r\n\r\n  return (\r\n    <div className=\"max-w-7xl mx-auto px-4 md:px-6 mb-6\">\r\n      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n        <div className=\"bg-[#1a1a1a] border border-gray-800 rounded-lg p-4 text-center hover:border-gray-700 transition-colors\">\r\n          <FileCheck className=\"mx-auto mb-2 text-[#ff950e]\" size={20} aria-hidden=\"true\" />\r\n          <div className=\"text-2xl font-bold text-white\">{totals.total}</div>\r\n          <div className=\"text-xs text-gray-400\">Total Pending</div>\r\n        </div>\r\n        <div className=\"bg-[#1a1a1a] border border-gray-800 rounded-lg p-4 text-center hover:border-gray-700 transition-colors\">\r\n          <Clock className=\"mx-auto mb-2 text-blue-400\" size={20} aria-hidden=\"true\" />\r\n          <div className=\"text-2xl font-bold text-blue-400\">{totals.today}</div>\r\n          <div className=\"text-xs text-gray-400\">Today</div>\r\n        </div>\r\n        <div className=\"bg-[#1a1a1a] border border-gray-800 rounded-lg p-4 text-center hover:border-gray-700 transition-colors\">\r\n          <Calendar className=\"mx-auto mb-2 text-purple-400\" size={20} aria-hidden=\"true\" />\r\n          <div className=\"text-2xl font-bold text-purple-400\">{totals.thisWeek}</div>\r\n          <div className=\"text-xs text-gray-400\">This Week</div>\r\n        </div>\r\n        <div className=\"bg-[#1a1a1a] border border-gray-800 rounded-lg p-4 text-center hover:border-gray-700 transition-colors\">\r\n          <Timer className=\"mx-auto mb-2 text-green-400\" size={20} aria-hidden=\"true\" />\r\n          <div className=\"text-2xl font-bold text-green-400\">\r\n            {totals.avgHours}\r\n            <span className=\"text-sm ml-1\">h</span>\r\n          </div>\r\n          <div className=\"text-xs text-gray-400\">Avg Processing</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,0DAA0D;;;;;AAG1D;AACA;AAAA;AAAA;AAAA;;;AAHA;;;AAMe,SAAS,kBAAkB,KAAiC;QAAjC,EAAE,KAAK,EAA0B,GAAjC;;IACxC,MAAM,aAAa,CAAC;QAClB,MAAM,MAAM,OAAO;QACnB,OAAO,OAAO,QAAQ,CAAC,QAAQ,OAAO,IAAI,MAAM;IAClD;IAEA,MAAM,SAAS,CAAA,GAAA,6JAAA,CAAA,UAAO,AAAD;6CAAE,IAAM,CAAC;gBAC5B,OAAO,WAAW,kBAAA,4BAAA,MAAO,KAAK;gBAC9B,OAAO,WAAW,kBAAA,4BAAA,MAAO,KAAK;gBAC9B,UAAU,WAAW,kBAAA,4BAAA,MAAO,QAAQ;gBACpC,UAAU,WAAW,kBAAA,4BAAA,MAAO,qBAAqB;YACnD,CAAC;4CAAG;QAAC;KAAM;IAEX,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAI,WAAU;;sCACb,6LAAC,mNAAA,CAAA,YAAS;4BAAC,WAAU;4BAA8B,MAAM;4BAAI,eAAY;;;;;;sCACzE,6LAAC;4BAAI,WAAU;sCAAiC,OAAO,KAAK;;;;;;sCAC5D,6LAAC;4BAAI,WAAU;sCAAwB;;;;;;;;;;;;8BAEzC,6LAAC;oBAAI,WAAU;;sCACb,6LAAC,uMAAA,CAAA,QAAK;4BAAC,WAAU;4BAA6B,MAAM;4BAAI,eAAY;;;;;;sCACpE,6LAAC;4BAAI,WAAU;sCAAoC,OAAO,KAAK;;;;;;sCAC/D,6LAAC;4BAAI,WAAU;sCAAwB;;;;;;;;;;;;8BAEzC,6LAAC;oBAAI,WAAU;;sCACb,6LAAC,6MAAA,CAAA,WAAQ;4BAAC,WAAU;4BAA+B,MAAM;4BAAI,eAAY;;;;;;sCACzE,6LAAC;4BAAI,WAAU;sCAAsC,OAAO,QAAQ;;;;;;sCACpE,6LAAC;4BAAI,WAAU;sCAAwB;;;;;;;;;;;;8BAEzC,6LAAC;oBAAI,WAAU;;sCACb,6LAAC,uMAAA,CAAA,QAAK;4BAAC,WAAU;4BAA8B,MAAM;4BAAI,eAAY;;;;;;sCACrE,6LAAC;4BAAI,WAAU;;gCACZ,OAAO,QAAQ;8CAChB,6LAAC;oCAAK,WAAU;8CAAe;;;;;;;;;;;;sCAEjC,6LAAC;4BAAI,WAAU;sCAAwB;;;;;;;;;;;;;;;;;;;;;;;AAKjD;GA1CwB;KAAA","debugId":null}},
    {"offset": {"line": 656, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/gerom/OneDrive/Documents/pantypost/src/components/admin/verification/VerificationCard.tsx"],"sourcesContent":["// src/components/admin/verification/VerificationCard.tsx\r\n'use client';\r\n\r\nimport { ChevronRight, Clock, Shield, Upload } from 'lucide-react';\r\nimport type { VerificationCardProps } from '@/types/verification';\r\nimport { SecureMessageDisplay } from '@/components/ui/SecureMessageDisplay';\r\n\r\nexport default function VerificationCard({\r\n  user,\r\n  onSelect,\r\n  getTimeAgo\r\n}: VerificationCardProps) {\r\n  const hasAllDocs =\r\n    !!user.verificationDocs &&\r\n    !!user.verificationDocs.codePhoto &&\r\n    (!!user.verificationDocs.idFront || !!user.verificationDocs.passport);\r\n\r\n  return (\r\n    <div\r\n      onClick={onSelect}\r\n      className=\"bg-[#0e0e0e] border border-[#222] rounded-xl p-4 hover:border-[#ff950e] transition-all duration-200 cursor-pointer group\"\r\n      role=\"button\"\r\n      aria-label={`Open verification for ${user.username}`}\r\n      tabIndex={0}\r\n      onKeyDown={(e) => {\r\n        if (e.key === 'Enter' || e.key === ' ') onSelect();\r\n      }}\r\n    >\r\n      <div className=\"flex items-center justify-between\">\r\n        <div className=\"flex items-center gap-4\">\r\n          <div className=\"w-12 h-12 bg-[#1a1a1a] rounded-full flex items-center justify-center border border-[#333] group-hover:border-[#ff950e] transition-colors\">\r\n            <Shield className=\"w-6 h-6 text-[#ff950e]\" />\r\n          </div>\r\n          <div>\r\n            <h3 className=\"font-bold text-white text-lg group-hover:text-[#ff950e] transition-colors\">\r\n              <SecureMessageDisplay content={user.username} allowBasicFormatting={false} />\r\n            </h3>\r\n            <div className=\"flex items-center gap-2 mt-1\">\r\n              <Clock className=\"w-3 h-3 text-gray-500\" />\r\n              <span className=\"text-xs text-gray-400\">\r\n                Requested {getTimeAgo(user.verificationRequestedAt)}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex items-center gap-3\">\r\n          {hasAllDocs ? (\r\n            <div className=\"flex items-center gap-2 text-green-500\">\r\n              <Upload className=\"w-4 h-4\" />\r\n              <span className=\"text-xs font-medium\">Docs Complete</span>\r\n            </div>\r\n          ) : (\r\n            <div className=\"flex items-center gap-2 text-yellow-500\">\r\n              <Upload className=\"w-4 h-4\" />\r\n              <span className=\"text-xs font-medium\">Docs Incomplete</span>\r\n            </div>\r\n          )}\r\n          <ChevronRight className=\"w-5 h-5 text-gray-400 group-hover:text-[#ff950e] transition-colors\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,yDAAyD;;;;;AAGzD;AAAA;AAAA;AAAA;AAEA;AAJA;;;;AAMe,SAAS,iBAAiB,KAIjB;QAJiB,EACvC,IAAI,EACJ,QAAQ,EACR,UAAU,EACY,GAJiB;IAKvC,MAAM,aACJ,CAAC,CAAC,KAAK,gBAAgB,IACvB,CAAC,CAAC,KAAK,gBAAgB,CAAC,SAAS,IACjC,CAAC,CAAC,CAAC,KAAK,gBAAgB,CAAC,OAAO,IAAI,CAAC,CAAC,KAAK,gBAAgB,CAAC,QAAQ;IAEtE,qBACE,6LAAC;QACC,SAAS;QACT,WAAU;QACV,MAAK;QACL,cAAY,AAAC,yBAAsC,OAAd,KAAK,QAAQ;QAClD,UAAU;QACV,WAAW,CAAC;YACV,IAAI,EAAE,GAAG,KAAK,WAAW,EAAE,GAAG,KAAK,KAAK;QAC1C;kBAEA,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC,yMAAA,CAAA,SAAM;gCAAC,WAAU;;;;;;;;;;;sCAEpB,6LAAC;;8CACC,6LAAC;oCAAG,WAAU;8CACZ,cAAA,6LAAC,mJAAA,CAAA,uBAAoB;wCAAC,SAAS,KAAK,QAAQ;wCAAE,sBAAsB;;;;;;;;;;;8CAEtE,6LAAC;oCAAI,WAAU;;sDACb,6LAAC,uMAAA,CAAA,QAAK;4CAAC,WAAU;;;;;;sDACjB,6LAAC;4CAAK,WAAU;;gDAAwB;gDAC3B,WAAW,KAAK,uBAAuB;;;;;;;;;;;;;;;;;;;;;;;;;8BAM1D,6LAAC;oBAAI,WAAU;;wBACZ,2BACC,6LAAC;4BAAI,WAAU;;8CACb,6LAAC,yMAAA,CAAA,SAAM;oCAAC,WAAU;;;;;;8CAClB,6LAAC;oCAAK,WAAU;8CAAsB;;;;;;;;;;;iDAGxC,6LAAC;4BAAI,WAAU;;8CACb,6LAAC,yMAAA,CAAA,SAAM;oCAAC,WAAU;;;;;;8CAClB,6LAAC;oCAAK,WAAU;8CAAsB;;;;;;;;;;;;sCAG1C,6LAAC,yNAAA,CAAA,eAAY;4BAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;AAKlC;KAxDwB","debugId":null}},
    {"offset": {"line": 845, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/gerom/OneDrive/Documents/pantypost/src/components/admin/verification/VerificationList.tsx"],"sourcesContent":["// src/components/admin/verification/VerificationList.tsx\r\n'use client';\r\n\r\nimport { AlertCircle, Shield } from 'lucide-react';\r\nimport VerificationCard from './VerificationCard';\r\nimport type { VerificationListProps } from '@/types/verification';\r\nimport { SecureMessageDisplay } from '@/components/ui/SecureMessageDisplay';\r\n\r\nexport default function VerificationList({\r\n  users,\r\n  searchTerm,\r\n  onSelectUser\r\n}: VerificationListProps) {\r\n  const getTimeAgo = (timestamp?: string): string => {\r\n    if (!timestamp) return 'Unknown date';\r\n    const requestDate = new Date(timestamp);\r\n    const t = requestDate.getTime();\r\n    if (!Number.isFinite(t)) return 'Unknown date';\r\n\r\n    const now = Date.now();\r\n    const diffInSeconds = Math.floor((now - t) / 1000);\r\n\r\n    if (diffInSeconds < 60) return `${diffInSeconds} seconds ago`;\r\n    if (diffInSeconds < 3600) return `${Math.floor(diffInSeconds / 60)} minutes ago`;\r\n    if (diffInSeconds < 86400) return `${Math.floor(diffInSeconds / 3600)} hours ago`;\r\n    if (diffInSeconds < 604800) return `${Math.floor(diffInSeconds / 86400)} days ago`;\r\n\r\n    return requestDate.toLocaleDateString('en-US', {\r\n      day: 'numeric',\r\n      month: 'short',\r\n      year: 'numeric'\r\n    });\r\n  };\r\n\r\n  if (!Array.isArray(users) || users.length === 0) {\r\n    return (\r\n      <div className=\"max-w-7xl mx-auto px-4 md:px-6\">\r\n        <div className=\"bg-[#0e0e0e] border border-[#222] rounded-xl p-8 text-center\">\r\n          {searchTerm ? (\r\n            <>\r\n              <AlertCircle className=\"w-12 h-12 text-gray-500 mx-auto mb-3\" />\r\n              <p className=\"text-gray-400\">\r\n                No pending verification requests found for \"\r\n                <SecureMessageDisplay\r\n                  content={searchTerm}\r\n                  allowBasicFormatting={false}\r\n                  className=\"inline\"\r\n                />\r\n                \"\r\n              </p>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <Shield className=\"w-12 h-12 text-gray-500 mx-auto mb-3\" />\r\n              <p className=\"text-gray-400\">\r\n                No pending verification requests at the moment\r\n              </p>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-7xl mx-auto px-4 md:px-6\">\r\n      <div className=\"space-y-4\">\r\n        {users.map((user) => (\r\n          <VerificationCard\r\n            key={user.username}\r\n            user={user}\r\n            onSelect={() => onSelectUser(user)}\r\n            getTimeAgo={getTimeAgo}\r\n          />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,yDAAyD;;;;;AAGzD;AAAA;AACA;AAEA;AALA;;;;;AAOe,SAAS,iBAAiB,KAIjB;QAJiB,EACvC,KAAK,EACL,UAAU,EACV,YAAY,EACU,GAJiB;IAKvC,MAAM,aAAa,CAAC;QAClB,IAAI,CAAC,WAAW,OAAO;QACvB,MAAM,cAAc,IAAI,KAAK;QAC7B,MAAM,IAAI,YAAY,OAAO;QAC7B,IAAI,CAAC,OAAO,QAAQ,CAAC,IAAI,OAAO;QAEhC,MAAM,MAAM,KAAK,GAAG;QACpB,MAAM,gBAAgB,KAAK,KAAK,CAAC,CAAC,MAAM,CAAC,IAAI;QAE7C,IAAI,gBAAgB,IAAI,OAAO,AAAC,GAAgB,OAAd,eAAc;QAChD,IAAI,gBAAgB,MAAM,OAAO,AAAC,GAAiC,OAA/B,KAAK,KAAK,CAAC,gBAAgB,KAAI;QACnE,IAAI,gBAAgB,OAAO,OAAO,AAAC,GAAmC,OAAjC,KAAK,KAAK,CAAC,gBAAgB,OAAM;QACtE,IAAI,gBAAgB,QAAQ,OAAO,AAAC,GAAoC,OAAlC,KAAK,KAAK,CAAC,gBAAgB,QAAO;QAExE,OAAO,YAAY,kBAAkB,CAAC,SAAS;YAC7C,KAAK;YACL,OAAO;YACP,MAAM;QACR;IACF;IAEA,IAAI,CAAC,MAAM,OAAO,CAAC,UAAU,MAAM,MAAM,KAAK,GAAG;QAC/C,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;0BACZ,2BACC;;sCACE,6LAAC,uNAAA,CAAA,cAAW;4BAAC,WAAU;;;;;;sCACvB,6LAAC;4BAAE,WAAU;;gCAAgB;8CAE3B,6LAAC,mJAAA,CAAA,uBAAoB;oCACnB,SAAS;oCACT,sBAAsB;oCACtB,WAAU;;;;;;gCACV;;;;;;;;iDAKN;;sCACE,6LAAC,yMAAA,CAAA,SAAM;4BAAC,WAAU;;;;;;sCAClB,6LAAC;4BAAE,WAAU;sCAAgB;;;;;;;;;;;;;;;;;;IAQzC;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;sBACZ,MAAM,GAAG,CAAC,CAAC,qBACV,6LAAC,kKAAA,CAAA,UAAgB;oBAEf,MAAM;oBACN,UAAU,IAAM,aAAa;oBAC7B,YAAY;mBAHP,KAAK,QAAQ;;;;;;;;;;;;;;;AAS9B;KAtEwB","debugId":null}},
    {"offset": {"line": 979, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/gerom/OneDrive/Documents/pantypost/src/components/admin/verification/DocumentCard.tsx"],"sourcesContent":["// src/components/admin/verification/DocumentCard.tsx\r\n'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { ExternalLink, ImageIcon, Loader2 } from 'lucide-react';\r\nimport { sanitizeStrict } from '@/utils/security/sanitization';\r\n\r\ninterface DocumentCardProps {\r\n  title: string;\r\n  imageSrc?: string;\r\n  onViewFull?: () => void;\r\n}\r\n\r\nexport default function DocumentCard({ title, imageSrc, onViewFull }: DocumentCardProps) {\r\n  const [imageError, setImageError] = useState(false);\r\n  const [imageLoading, setImageLoading] = useState(true);\r\n\r\n  // Don't sanitize URLs that are from our backend\r\n  const getSafeImageUrl = (url?: string): string => {\r\n    if (!url) return '';\r\n    \r\n    // If it's a data URL, return as is\r\n    if (url.startsWith('data:image/')) {\r\n      return url;\r\n    }\r\n    \r\n    // If it's an absolute URL from our backend, return as is\r\n    if (url.startsWith('http://localhost:5000') || \r\n        url.startsWith('https://localhost:5000') ||\r\n        url.includes('/uploads/verification/')) {\r\n      return url;\r\n    }\r\n    \r\n    // For any other URL, sanitize it\r\n    // But since we're dealing with backend URLs, just return the URL\r\n    return url;\r\n  };\r\n\r\n  const safeSrc = getSafeImageUrl(imageSrc);\r\n  const hasImage = !!safeSrc && !imageError;\r\n\r\n  const handleImageLoad = () => {\r\n    setImageLoading(false);\r\n    setImageError(false);\r\n  };\r\n\r\n  const handleImageError = () => {\r\n    console.error('[DocumentCard] Failed to load image:', safeSrc);\r\n    setImageLoading(false);\r\n    setImageError(true);\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-2\">\r\n      <h4 className=\"text-sm uppercase text-gray-400 font-medium tracking-wider\">\r\n        {sanitizeStrict(title)}\r\n      </h4>\r\n\r\n      <div className=\"relative bg-[#1a1a1a] rounded-lg border border-gray-700 overflow-hidden aspect-[4/3]\">\r\n        {safeSrc && !imageError ? (\r\n          <>\r\n            {/* Loading state */}\r\n            {imageLoading && (\r\n              <div className=\"absolute inset-0 flex items-center justify-center bg-[#1a1a1a] z-10\">\r\n                <Loader2 className=\"w-6 h-6 animate-spin text-gray-500\" />\r\n              </div>\r\n            )}\r\n\r\n            {/* Image */}\r\n            <img\r\n              src={safeSrc}\r\n              alt={sanitizeStrict(title)}\r\n              className=\"w-full h-full object-cover cursor-pointer hover:opacity-90 transition-opacity\"\r\n              onClick={onViewFull}\r\n              onLoad={handleImageLoad}\r\n              onError={handleImageError}\r\n              draggable={false}\r\n              style={{ display: imageError ? 'none' : 'block' }}\r\n            />\r\n\r\n            {/* Hover overlay */}\r\n            {!imageLoading && !imageError && (\r\n              <div \r\n                className=\"absolute inset-0 bg-black bg-opacity-30 hover:bg-opacity-0 transition flex items-center justify-center opacity-0 hover:opacity-100 cursor-pointer\"\r\n                onClick={onViewFull}\r\n              >\r\n                <ExternalLink className=\"w-6 h-6 text-white pointer-events-none\" />\r\n              </div>\r\n            )}\r\n          </>\r\n        ) : (\r\n          <div className=\"absolute inset-0 flex flex-col items-center justify-center text-gray-500\">\r\n            <ImageIcon className=\"w-8 h-8 mb-2\" />\r\n            <span className=\"text-xs text-center px-2\">\r\n              {imageError ? 'Failed to load image' : 'Not provided'}\r\n            </span>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,qDAAqD;;;;;AAGrD;AACA;AAAA;AAAA;AACA;;;AAJA;;;;AAYe,SAAS,aAAa,KAAkD;QAAlD,EAAE,KAAK,EAAE,QAAQ,EAAE,UAAU,EAAqB,GAAlD;;IACnC,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC7C,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEjD,gDAAgD;IAChD,MAAM,kBAAkB,CAAC;QACvB,IAAI,CAAC,KAAK,OAAO;QAEjB,mCAAmC;QACnC,IAAI,IAAI,UAAU,CAAC,gBAAgB;YACjC,OAAO;QACT;QAEA,yDAAyD;QACzD,IAAI,IAAI,UAAU,CAAC,4BACf,IAAI,UAAU,CAAC,6BACf,IAAI,QAAQ,CAAC,2BAA2B;YAC1C,OAAO;QACT;QAEA,iCAAiC;QACjC,iEAAiE;QACjE,OAAO;IACT;IAEA,MAAM,UAAU,gBAAgB;IAChC,MAAM,WAAW,CAAC,CAAC,WAAW,CAAC;IAE/B,MAAM,kBAAkB;QACtB,gBAAgB;QAChB,cAAc;IAChB;IAEA,MAAM,mBAAmB;QACvB,QAAQ,KAAK,CAAC,wCAAwC;QACtD,gBAAgB;QAChB,cAAc;IAChB;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;0BACX,CAAA,GAAA,2IAAA,CAAA,iBAAc,AAAD,EAAE;;;;;;0BAGlB,6LAAC;gBAAI,WAAU;0BACZ,WAAW,CAAC,2BACX;;wBAEG,8BACC,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC,oNAAA,CAAA,UAAO;gCAAC,WAAU;;;;;;;;;;;sCAKvB,6LAAC;4BACC,KAAK;4BACL,KAAK,CAAA,GAAA,2IAAA,CAAA,iBAAc,AAAD,EAAE;4BACpB,WAAU;4BACV,SAAS;4BACT,QAAQ;4BACR,SAAS;4BACT,WAAW;4BACX,OAAO;gCAAE,SAAS,aAAa,SAAS;4BAAQ;;;;;;wBAIjD,CAAC,gBAAgB,CAAC,4BACjB,6LAAC;4BACC,WAAU;4BACV,SAAS;sCAET,cAAA,6LAAC,yNAAA,CAAA,eAAY;gCAAC,WAAU;;;;;;;;;;;;iDAK9B,6LAAC;oBAAI,WAAU;;sCACb,6LAAC,2MAAA,CAAA,YAAS;4BAAC,WAAU;;;;;;sCACrB,6LAAC;4BAAK,WAAU;sCACb,aAAa,yBAAyB;;;;;;;;;;;;;;;;;;;;;;;AAOrD;GAxFwB;KAAA","debugId":null}},
    {"offset": {"line": 1136, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/gerom/OneDrive/Documents/pantypost/src/components/admin/verification/ActionButtons.tsx"],"sourcesContent":["// src/components/admin/verification/ActionButtons.tsx\r\n'use client';\r\n\r\nimport { useState, useCallback } from 'react';\r\nimport { CheckCircle, XCircle } from 'lucide-react';\r\nimport { SecureTextarea } from '@/components/ui/SecureInput';\r\nimport { sanitizeStrict } from '@/utils/security/sanitization';\r\nimport type { ActionButtonsProps } from '@/types/verification';\r\n\r\nexport default function ActionButtons({\r\n  showRejectInput,\r\n  rejectReason,\r\n  onApprove,\r\n  onReject,\r\n  onRejectInputShow,\r\n  onRejectInputCancel,\r\n  onRejectReasonChange\r\n}: ActionButtonsProps) {\r\n  const [busy, setBusy] = useState<'none' | 'approve' | 'reject'>('none');\r\n\r\n  const handleRejectReasonChange = useCallback((value: string) => {\r\n    onRejectReasonChange(sanitizeStrict(value));\r\n  }, [onRejectReasonChange]);\r\n\r\n  const handleApprove = useCallback(async () => {\r\n    if (busy !== 'none') return;\r\n    setBusy('approve');\r\n    try {\r\n      await Promise.resolve(onApprove());\r\n    } finally {\r\n      setBusy('none');\r\n    }\r\n  }, [onApprove, busy]);\r\n\r\n  const handleReject = useCallback(async () => {\r\n    if (busy !== 'none') return;\r\n    setBusy('reject');\r\n    try {\r\n      await Promise.resolve(onReject());\r\n    } finally {\r\n      setBusy('none');\r\n    }\r\n  }, [onReject, busy]);\r\n\r\n  if (!showRejectInput) {\r\n    return (\r\n      <div className=\"flex gap-3\">\r\n        <button\r\n          type=\"button\"\r\n          onClick={handleApprove}\r\n          disabled={busy !== 'none'}\r\n          className=\"flex-1 px-3 py-2 sm:py-2.5 bg-gradient-to-r from-green-600 to-green-500 hover:from-green-500 hover:to-green-400 text-white font-medium rounded-lg flex items-center justify-center gap-2 transition-all shadow-lg hover:shadow-green-900/30 disabled:opacity-60 disabled:cursor-not-allowed\"\r\n          aria-label=\"Approve verification\"\r\n        >\r\n          <CheckCircle className=\"w-4 h-4\" />\r\n          <span>{busy === 'approve' ? 'Approving…' : 'Approve'}</span>\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          onClick={onRejectInputShow}\r\n          className=\"flex-1 px-3 py-2 sm:py-2.5 bg-gradient-to-r from-red-600 to-red-500 hover:from-red-500 hover:to-red-400 text-white font-medium rounded-lg flex items-center justify-center gap-2 transition-all shadow-lg hover:shadow-red-900/30\"\r\n          aria-label=\"Reject verification and add reason\"\r\n        >\r\n          <XCircle className=\"w-4 h-4\" />\r\n          <span>Reject</span>\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      <SecureTextarea\r\n        placeholder=\"Provide a reason for rejection...\"\r\n        value={rejectReason}\r\n        onChange={handleRejectReasonChange}\r\n        rows={2}\r\n        maxLength={500}\r\n        characterCount={true}\r\n        sanitize={true}\r\n        sanitizer={sanitizeStrict}\r\n        className=\"w-full p-3 border border-[#2a2a2a] rounded-lg bg-[#121212] text-white resize-none focus:ring-2 focus:ring-[#ff950e] focus:border-transparent focus:outline-none transition-all text-sm\"\r\n        aria-label=\"Rejection reason\"\r\n      />\r\n      <div className=\"flex gap-2\">\r\n        <button\r\n          type=\"button\"\r\n          className=\"flex-1 bg-red-600 hover:bg-red-500 text-white font-medium px-3 py-2.5 rounded-lg transition-colors shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center\"\r\n          onClick={handleReject}\r\n          disabled={!rejectReason.trim() || busy !== 'none'}\r\n          aria-label=\"Confirm rejection\"\r\n        >\r\n          <span>{busy === 'reject' ? 'Rejecting…' : 'Confirm Rejection'}</span>\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          className=\"px-3 py-2.5 bg-[#1a1a1a] hover:bg-[#252525] text-white font-medium rounded-lg transition-colors border border-[#333]\"\r\n          onClick={onRejectInputCancel}\r\n          aria-label=\"Cancel rejection\"\r\n        >\r\n          <span>Cancel</span>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,sDAAsD;;;;;AAGtD;AACA;AAAA;AACA;AACA;;;AALA;;;;;AAQe,SAAS,cAAc,KAQjB;QARiB,EACpC,eAAe,EACf,YAAY,EACZ,SAAS,EACT,QAAQ,EACR,iBAAiB,EACjB,mBAAmB,EACnB,oBAAoB,EACD,GARiB;;IASpC,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAiC;IAEhE,MAAM,2BAA2B,CAAA,GAAA,6JAAA,CAAA,cAAW,AAAD;+DAAE,CAAC;YAC5C,qBAAqB,CAAA,GAAA,2IAAA,CAAA,iBAAc,AAAD,EAAE;QACtC;8DAAG;QAAC;KAAqB;IAEzB,MAAM,gBAAgB,CAAA,GAAA,6JAAA,CAAA,cAAW,AAAD;oDAAE;YAChC,IAAI,SAAS,QAAQ;YACrB,QAAQ;YACR,IAAI;gBACF,MAAM,QAAQ,OAAO,CAAC;YACxB,SAAU;gBACR,QAAQ;YACV;QACF;mDAAG;QAAC;QAAW;KAAK;IAEpB,MAAM,eAAe,CAAA,GAAA,6JAAA,CAAA,cAAW,AAAD;mDAAE;YAC/B,IAAI,SAAS,QAAQ;YACrB,QAAQ;YACR,IAAI;gBACF,MAAM,QAAQ,OAAO,CAAC;YACxB,SAAU;gBACR,QAAQ;YACV;QACF;kDAAG;QAAC;QAAU;KAAK;IAEnB,IAAI,CAAC,iBAAiB;QACpB,qBACE,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBACC,MAAK;oBACL,SAAS;oBACT,UAAU,SAAS;oBACnB,WAAU;oBACV,cAAW;;sCAEX,6LAAC,8NAAA,CAAA,cAAW;4BAAC,WAAU;;;;;;sCACvB,6LAAC;sCAAM,SAAS,YAAY,eAAe;;;;;;;;;;;;8BAE7C,6LAAC;oBACC,MAAK;oBACL,SAAS;oBACT,WAAU;oBACV,cAAW;;sCAEX,6LAAC,+MAAA,CAAA,UAAO;4BAAC,WAAU;;;;;;sCACnB,6LAAC;sCAAK;;;;;;;;;;;;;;;;;;IAId;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC,0IAAA,CAAA,iBAAc;gBACb,aAAY;gBACZ,OAAO;gBACP,UAAU;gBACV,MAAM;gBACN,WAAW;gBACX,gBAAgB;gBAChB,UAAU;gBACV,WAAW,2IAAA,CAAA,iBAAc;gBACzB,WAAU;gBACV,cAAW;;;;;;0BAEb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBACC,MAAK;wBACL,WAAU;wBACV,SAAS;wBACT,UAAU,CAAC,aAAa,IAAI,MAAM,SAAS;wBAC3C,cAAW;kCAEX,cAAA,6LAAC;sCAAM,SAAS,WAAW,eAAe;;;;;;;;;;;kCAE5C,6LAAC;wBACC,MAAK;wBACL,WAAU;wBACV,SAAS;wBACT,cAAW;kCAEX,cAAA,6LAAC;sCAAK;;;;;;;;;;;;;;;;;;;;;;;AAKhB;GAhGwB;KAAA","debugId":null}},
    {"offset": {"line": 1339, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/gerom/OneDrive/Documents/pantypost/src/components/admin/verification/ImageViewer.tsx"],"sourcesContent":["// src/components/admin/verification/ImageViewer.tsx\r\n'use client';\r\n\r\nimport { useEffect, useRef } from 'react';\r\nimport { X } from 'lucide-react';\r\nimport type { ImageViewerProps } from '@/types/verification';\r\nimport { sanitizeUrl, sanitizeStrict } from '@/utils/security/sanitization';\r\nimport { SecureMessageDisplay } from '@/components/ui/SecureMessageDisplay';\r\n\r\nexport default function ImageViewer({\r\n  imageData,\r\n  isLoading,\r\n  onClose,\r\n  onLoad\r\n}: ImageViewerProps) {\r\n  const closeBtnRef = useRef<HTMLButtonElement | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (!imageData) return;\r\n\r\n    // Lock body scroll\r\n    const prevOverflow = document.body.style.overflow;\r\n    document.body.style.overflow = 'hidden';\r\n\r\n    // ESC to close + initial focus\r\n    const onKey = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape') onClose();\r\n    };\r\n    document.addEventListener('keydown', onKey);\r\n    const t = setTimeout(() => closeBtnRef.current?.focus(), 0);\r\n\r\n    return () => {\r\n      document.removeEventListener('keydown', onKey);\r\n      clearTimeout(t);\r\n      document.body.style.overflow = prevOverflow;\r\n    };\r\n  }, [imageData, onClose]);\r\n\r\n  if (!imageData) return null;\r\n\r\n  const isDataUrl = imageData.url.startsWith('data:image/');\r\n  const safeImageUrl = isDataUrl ? imageData.url : sanitizeUrl(imageData.url);\r\n\r\n  return (\r\n    <>\r\n      {/* Backdrop */}\r\n      <div\r\n        className=\"fixed inset-0 bg-black bg-opacity-95 z-[100]\"\r\n        onClick={onClose}\r\n        role=\"button\"\r\n        aria-label=\"Close image viewer\"\r\n      />\r\n\r\n      {/* Modal Content */}\r\n      <div\r\n        className=\"fixed inset-0 flex items-center justify-center z-[101] p-4\"\r\n        role=\"dialog\"\r\n        aria-modal=\"true\"\r\n        aria-label=\"Verification image viewer\"\r\n        style={{ pointerEvents: 'none' }}\r\n      >\r\n        <div className=\"relative max-w-[90vw] max-h-[90vh]\" style={{ pointerEvents: 'auto' }}>\r\n          {/* Close button */}\r\n          <button\r\n            ref={closeBtnRef}\r\n            onClick={(e) => {\r\n              e.stopPropagation();\r\n              onClose();\r\n            }}\r\n            className=\"absolute -top-12 right-0 text-white hover:text-gray-300 transition-colors p-2\"\r\n            aria-label=\"Close\"\r\n          >\r\n            <X className=\"w-8 h-8\" />\r\n          </button>\r\n\r\n          {/* Image Type Label */}\r\n          <div className=\"absolute -top-12 left-0 text-white\">\r\n            <h3 className=\"text-lg font-medium\">\r\n              <SecureMessageDisplay\r\n                content={imageData.type}\r\n                allowBasicFormatting={false}\r\n              />\r\n            </h3>\r\n          </div>\r\n\r\n          {/* Loading */}\r\n          {isLoading && (\r\n            <div className=\"absolute inset-0 flex items-center justify-center\">\r\n              <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#ff950e]\" aria-label=\"Loading\" />\r\n            </div>\r\n          )}\r\n\r\n          {/* Image */}\r\n          <img\r\n            src={safeImageUrl}\r\n            alt={sanitizeStrict(imageData.type)}\r\n            className=\"max-w-full max-h-[85vh] object-contain rounded-lg shadow-2xl\"\r\n            onClick={(e) => e.stopPropagation()}\r\n            onLoad={() => {\r\n              if (onLoad) onLoad();\r\n            }}\r\n            onError={(e) => {\r\n              const target = e.target as HTMLImageElement;\r\n              target.src =\r\n                'data:image/svg+xml,%3Csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"400\" height=\"300\" viewBox=\"0 0 400 300\"%3E%3Crect width=\"400\" height=\"300\" fill=\"%23333\"/%3E%3Ctext x=\"50%25\" y=\"50%25\" text-anchor=\"middle\" dy=\".3em\" fill=\"%23999\" font-family=\"sans-serif\" font-size=\"20\"%3EImage failed to load%3C/text%3E%3C/svg%3E';\r\n            }}\r\n            style={{\r\n              opacity: isLoading ? 0.2 : 1,\r\n              transition: 'opacity 0.3s',\r\n              display: 'block'\r\n            }}\r\n            draggable={false}\r\n          />\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,oDAAoD;;;;;AAGpD;AACA;AAEA;AACA;;;AANA;;;;;AAQe,SAAS,YAAY,KAKjB;QALiB,EAClC,SAAS,EACT,SAAS,EACT,OAAO,EACP,MAAM,EACW,GALiB;;IAMlC,MAAM,cAAc,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAA4B;IAErD,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;iCAAE;YACR,IAAI,CAAC,WAAW;YAEhB,mBAAmB;YACnB,MAAM,eAAe,SAAS,IAAI,CAAC,KAAK,CAAC,QAAQ;YACjD,SAAS,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG;YAE/B,+BAA+B;YAC/B,MAAM;+CAAQ,CAAC;oBACb,IAAI,EAAE,GAAG,KAAK,UAAU;gBAC1B;;YACA,SAAS,gBAAgB,CAAC,WAAW;YACrC,MAAM,IAAI;2CAAW;wBAAM;4BAAA,uBAAA,YAAY,OAAO,cAAnB,2CAAA,qBAAqB,KAAK;;0CAAI;YAEzD;yCAAO;oBACL,SAAS,mBAAmB,CAAC,WAAW;oBACxC,aAAa;oBACb,SAAS,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG;gBACjC;;QACF;gCAAG;QAAC;QAAW;KAAQ;IAEvB,IAAI,CAAC,WAAW,OAAO;IAEvB,MAAM,YAAY,UAAU,GAAG,CAAC,UAAU,CAAC;IAC3C,MAAM,eAAe,YAAY,UAAU,GAAG,GAAG,CAAA,GAAA,2IAAA,CAAA,cAAW,AAAD,EAAE,UAAU,GAAG;IAE1E,qBACE;;0BAEE,6LAAC;gBACC,WAAU;gBACV,SAAS;gBACT,MAAK;gBACL,cAAW;;;;;;0BAIb,6LAAC;gBACC,WAAU;gBACV,MAAK;gBACL,cAAW;gBACX,cAAW;gBACX,OAAO;oBAAE,eAAe;gBAAO;0BAE/B,cAAA,6LAAC;oBAAI,WAAU;oBAAqC,OAAO;wBAAE,eAAe;oBAAO;;sCAEjF,6LAAC;4BACC,KAAK;4BACL,SAAS,CAAC;gCACR,EAAE,eAAe;gCACjB;4BACF;4BACA,WAAU;4BACV,cAAW;sCAEX,cAAA,6LAAC,+LAAA,CAAA,IAAC;gCAAC,WAAU;;;;;;;;;;;sCAIf,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC;gCAAG,WAAU;0CACZ,cAAA,6LAAC,mJAAA,CAAA,uBAAoB;oCACnB,SAAS,UAAU,IAAI;oCACvB,sBAAsB;;;;;;;;;;;;;;;;wBAM3B,2BACC,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC;gCAAI,WAAU;gCAA6E,cAAW;;;;;;;;;;;sCAK3G,6LAAC;4BACC,KAAK;4BACL,KAAK,CAAA,GAAA,2IAAA,CAAA,iBAAc,AAAD,EAAE,UAAU,IAAI;4BAClC,WAAU;4BACV,SAAS,CAAC,IAAM,EAAE,eAAe;4BACjC,QAAQ;gCACN,IAAI,QAAQ;4BACd;4BACA,SAAS,CAAC;gCACR,MAAM,SAAS,EAAE,MAAM;gCACvB,OAAO,GAAG,GACR;4BACJ;4BACA,OAAO;gCACL,SAAS,YAAY,MAAM;gCAC3B,YAAY;gCACZ,SAAS;4BACX;4BACA,WAAW;;;;;;;;;;;;;;;;;;;AAMvB;GA5GwB;KAAA","debugId":null}},
    {"offset": {"line": 1526, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/gerom/OneDrive/Documents/pantypost/src/components/admin/verification/ReviewModal.tsx"],"sourcesContent":["// src/components/admin/verification/ReviewModal.tsx\r\n'use client';\r\n\r\nimport { useState, useRef, useEffect, useCallback } from 'react';\r\nimport { ArrowLeft } from 'lucide-react';\r\nimport { sanitizeStrict } from '@/utils/security/sanitization';\r\nimport DocumentCard from './DocumentCard';\r\nimport ActionButtons from './ActionButtons';\r\nimport type { ReviewModalProps, ImageViewData } from '@/types/verification';\r\nimport ImageViewer from './ImageViewer';\r\nimport { SecureMessageDisplay } from '@/components/ui/SecureMessageDisplay';\r\n\r\nexport default function ReviewModal({\r\n  user,\r\n  onClose,\r\n  onApprove,\r\n  onReject,\r\n  getTimeAgo\r\n}: ReviewModalProps) {\r\n  const [showRejectInput, setShowRejectInput] = useState(false);\r\n  const [rejectReason, setRejectReason] = useState('');\r\n  const [currentImageView, setCurrentImageView] = useState<ImageViewData | null>(null);\r\n  const modalRef = useRef<HTMLDivElement>(null);\r\n  const [busy, setBusy] = useState<'none' | 'approve' | 'reject'>('none');\r\n\r\n  useEffect(() => {\r\n    // Reset inputs when user changes/clears\r\n    if (!user) {\r\n      setShowRejectInput(false);\r\n      setRejectReason('');\r\n    }\r\n  }, [user]);\r\n\r\n  useEffect(() => {\r\n    if (!user) return;\r\n    // Lock scroll & ESC handling\r\n    const prevOverflow = document.body.style.overflow;\r\n    document.body.style.overflow = 'hidden';\r\n    const onKey = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape') handleClose();\r\n    };\r\n    document.addEventListener('keydown', onKey);\r\n    return () => {\r\n      document.removeEventListener('keydown', onKey);\r\n      document.body.style.overflow = prevOverflow;\r\n    };\r\n  }, [user]); // eslint-disable-line\r\n\r\n  if (!user) return null;\r\n\r\n  const openFullImage = (type: string, url: string) => setCurrentImageView({ type, url });\r\n\r\n  const handleApprove = useCallback(async () => {\r\n    if (busy !== 'none') return;\r\n    setBusy('approve');\r\n    try {\r\n      await Promise.resolve(onApprove(user.username));\r\n    } finally {\r\n      setBusy('none');\r\n    }\r\n  }, [onApprove, user?.username, busy]);\r\n\r\n  const handleReject = useCallback(async () => {\r\n    if (busy !== 'none') return;\r\n    setBusy('reject');\r\n    try {\r\n      const sanitizedReason = sanitizeStrict(rejectReason);\r\n      await Promise.resolve(onReject(user.username, sanitizedReason));\r\n    } finally {\r\n      setBusy('none');\r\n    }\r\n  }, [onReject, user?.username, rejectReason, busy]);\r\n\r\n  const handleClose = useCallback(() => {\r\n    setShowRejectInput(false);\r\n    setRejectReason('');\r\n    onClose();\r\n  }, [onClose]);\r\n\r\n  const handleRejectReasonChange = (value: string) => {\r\n    setRejectReason(sanitizeStrict(value));\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/* Overlay */}\r\n      <div\r\n        className=\"fixed inset-0 bg-black bg-opacity-60 z-40\"\r\n        onClick={handleClose}\r\n        role=\"button\"\r\n        aria-label=\"Close review modal\"\r\n      />\r\n\r\n      {/* Content */}\r\n      <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 sm:p-6\">\r\n        <div\r\n          ref={modalRef}\r\n          className=\"bg-[#121212] rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-2xl border border-[#222] flex flex-col\"\r\n          onClick={(e) => e.stopPropagation()}\r\n          role=\"dialog\"\r\n          aria-modal=\"true\"\r\n          aria-label=\"Verification review\"\r\n        >\r\n          {/* Header */}\r\n          <div className=\"bg-gradient-to-r from-[#1a1a1a] to-[#222] p-4 sm:p-6 rounded-t-2xl sticky top-0 z-10\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={handleClose}\r\n              className=\"absolute left-4 top-4 text-gray-400 hover:text-white transition-colors\"\r\n              aria-label=\"Back\"\r\n              title=\"Back\"\r\n            >\r\n              <ArrowLeft className=\"w-6 h-6\" />\r\n            </button>\r\n\r\n            <div className=\"text-center\">\r\n              <h2 className=\"text-2xl font-bold text-white\">\r\n                Review:{' '}\r\n                <SecureMessageDisplay\r\n                  content={user.username}\r\n                  allowBasicFormatting={false}\r\n                  className=\"inline\"\r\n                />\r\n              </h2>\r\n              <p className=\"text-sm text-gray-400 mt-1\">\r\n                Requested {getTimeAgo(user.verificationRequestedAt)}\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Documents */}\r\n          <div className=\"p-4 sm:p-6 flex-grow\">\r\n            {/* Verification code */}\r\n            <div className=\"mb-6\">\r\n              <h3 className=\"text-sm uppercase text-gray-400 font-medium mb-2 tracking-wider\">\r\n                Verification Code\r\n              </h3>\r\n              <div className=\"inline-block px-4 py-2 bg-[#ff950e] text-black font-mono text-lg border border-[#ff950e] rounded-lg font-bold\">\r\n                <SecureMessageDisplay\r\n                  content={user.verificationDocs?.code || 'No code provided'}\r\n                  allowBasicFormatting={false}\r\n                  className=\"inline\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Grid */}\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6\">\r\n              <DocumentCard\r\n                title=\"Photo with Code\"\r\n                imageSrc={user.verificationDocs?.codePhoto}\r\n                onViewFull={() =>\r\n                  user.verificationDocs?.codePhoto &&\r\n                  openFullImage('Photo with Verification Code', user.verificationDocs.codePhoto)\r\n                }\r\n              />\r\n\r\n              <DocumentCard\r\n                title=\"ID Front\"\r\n                imageSrc={user.verificationDocs?.idFront}\r\n                onViewFull={() =>\r\n                  user.verificationDocs?.idFront && openFullImage('ID Front', user.verificationDocs.idFront)\r\n                }\r\n              />\r\n\r\n              <DocumentCard\r\n                title=\"ID Back\"\r\n                imageSrc={user.verificationDocs?.idBack}\r\n                onViewFull={() =>\r\n                  user.verificationDocs?.idBack && openFullImage('ID Back', user.verificationDocs.idBack)\r\n                }\r\n              />\r\n\r\n              <DocumentCard\r\n                title=\"Passport\"\r\n                imageSrc={user.verificationDocs?.passport}\r\n                onViewFull={() =>\r\n                  user.verificationDocs?.passport && openFullImage('Passport', user.verificationDocs.passport)\r\n                }\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Actions */}\r\n          <div className=\"bg-[#080808] border-t border-[#1a1a1a] p-3 sm:p-4 mt-auto sticky bottom-0\">\r\n            <ActionButtons\r\n              showRejectInput={showRejectInput}\r\n              rejectReason={rejectReason}\r\n              onApprove={handleApprove}\r\n              onReject={handleReject}\r\n              onRejectInputShow={() => setShowRejectInput(true)}\r\n              onRejectInputCancel={() => {\r\n                setShowRejectInput(false);\r\n                setRejectReason('');\r\n              }}\r\n              onRejectReasonChange={handleRejectReasonChange}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Full Image Viewer */}\r\n      {currentImageView && (\r\n        <ImageViewer\r\n          imageData={currentImageView}\r\n          isLoading={false}\r\n          onClose={() => setCurrentImageView(null)}\r\n          onLoad={() => {}}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1887, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/gerom/OneDrive/Documents/pantypost/src/services/verification.service.ts"],"sourcesContent":["// src/services/verification.service.ts\r\nimport { FEATURES, API_BASE_URL, ApiResponse } from './api.config';\r\nimport { storageService } from './storage.service';\r\nimport { sanitizeStrict } from '@/utils/security/sanitization';\r\n\r\nexport interface VerificationSubmitData {\r\n  code: string;\r\n  codePhoto: File | string;\r\n  idFront?: File | string;\r\n  idBack?: File | string;\r\n  passport?: File | string;\r\n}\r\n\r\nexport interface VerificationStatus {\r\n  status: 'unverified' | 'pending' | 'verified' | 'rejected';\r\n  submittedAt?: string;\r\n  reviewedAt?: string;\r\n  rejectionReason?: string;\r\n  attempts?: number;\r\n}\r\n\r\nexport interface PendingVerification {\r\n  _id: string;\r\n  userId: {\r\n    username: string;\r\n    email: string;\r\n    role: string;\r\n  };\r\n  status: string;\r\n  documents: {\r\n    codePhoto?: { url: string; uploadedAt: string };\r\n    idFront?: { url: string; uploadedAt: string };\r\n    idBack?: { url: string; uploadedAt: string };\r\n    passport?: { url: string; uploadedAt: string };\r\n  };\r\n  verificationCode: string;\r\n  submittedAt: string;\r\n}\r\n\r\nexport interface VerificationStats {\r\n  total: number;\r\n  today: number;\r\n  thisWeek: number;\r\n  averageProcessingTime: number;\r\n}\r\n\r\nclass VerificationService {\r\n  /**\r\n   * Get auth token from sessionStorage (where AuthContext stores it)\r\n   */\r\n  private getAuthToken(): string | null {\r\n    if (typeof window === 'undefined') return null;\r\n    \r\n    try {\r\n      const stored = sessionStorage.getItem('auth_tokens');\r\n      if (stored) {\r\n        const tokens = JSON.parse(stored);\r\n        return tokens?.token || null;\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to get auth token:', error);\r\n    }\r\n    \r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * Make authenticated API call\r\n   */\r\n  private async apiCall<T>(url: string, options: RequestInit = {}): Promise<ApiResponse<T>> {\r\n    const token = this.getAuthToken();\r\n    \r\n    const headers: any = {\r\n      ...options.headers,\r\n    };\r\n\r\n    if (token) {\r\n      headers['Authorization'] = `Bearer ${token}`;\r\n    }\r\n\r\n    try {\r\n      const response = await fetch(url, {\r\n        ...options,\r\n        headers,\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (!response.ok) {\r\n        return {\r\n          success: false,\r\n          error: data.error || { message: 'Request failed' }\r\n        };\r\n      }\r\n\r\n      return { success: true, data: data.data || data };\r\n    } catch (error) {\r\n      console.error('API call error:', error);\r\n      return {\r\n        success: false,\r\n        error: { message: 'Network error' }\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Submit verification request\r\n   */\r\n  async submitVerification(data: VerificationSubmitData): Promise<ApiResponse<any>> {\r\n    try {\r\n      console.log('[VerificationService] Submitting verification...');\r\n      \r\n      if (FEATURES.USE_API_USERS) {\r\n        const formData = new FormData();\r\n        formData.append('code', sanitizeStrict(data.code));\r\n        \r\n        // Handle files - either File objects or base64 strings\r\n        if (data.codePhoto) {\r\n          if (data.codePhoto instanceof File) {\r\n            formData.append('codePhoto', data.codePhoto);\r\n          } else {\r\n            // Convert base64 to file\r\n            const file = this.base64ToFile(data.codePhoto, 'codePhoto.jpg');\r\n            formData.append('codePhoto', file);\r\n          }\r\n        }\r\n        \r\n        if (data.idFront) {\r\n          if (data.idFront instanceof File) {\r\n            formData.append('idFront', data.idFront);\r\n          } else {\r\n            const file = this.base64ToFile(data.idFront, 'idFront.jpg');\r\n            formData.append('idFront', file);\r\n          }\r\n        }\r\n        \r\n        if (data.idBack) {\r\n          if (data.idBack instanceof File) {\r\n            formData.append('idBack', data.idBack);\r\n          } else {\r\n            const file = this.base64ToFile(data.idBack, 'idBack.jpg');\r\n            formData.append('idBack', file);\r\n          }\r\n        }\r\n        \r\n        if (data.passport) {\r\n          if (data.passport instanceof File) {\r\n            formData.append('passport', data.passport);\r\n          } else {\r\n            const file = this.base64ToFile(data.passport, 'passport.jpg');\r\n            formData.append('passport', file);\r\n          }\r\n        }\r\n\r\n        const token = this.getAuthToken();\r\n        console.log('[VerificationService] Auth token present:', !!token);\r\n        \r\n        if (!token) {\r\n          console.error('[VerificationService] No auth token found');\r\n          return {\r\n            success: false,\r\n            error: { message: 'Not authenticated. Please log in again.' }\r\n          };\r\n        }\r\n\r\n        const url = `${API_BASE_URL}/api/verification/submit`;\r\n        console.log('[VerificationService] Submitting to:', url);\r\n        \r\n        const response = await fetch(url, {\r\n          method: 'POST',\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`\r\n          },\r\n          body: formData\r\n        });\r\n\r\n        console.log('[VerificationService] Response status:', response.status);\r\n        const result = await response.json();\r\n        console.log('[VerificationService] Response data:', result);\r\n        \r\n        if (!response.ok) {\r\n          console.error('[VerificationService] Submit error:', result);\r\n          return {\r\n            success: false,\r\n            error: result.error || { message: 'Failed to submit verification' }\r\n          };\r\n        }\r\n\r\n        return { success: true, data: result.data };\r\n      }\r\n\r\n      // LocalStorage fallback\r\n      const username = sessionStorage.getItem('username') || localStorage.getItem('username');\r\n      if (!username) {\r\n        return {\r\n          success: false,\r\n          error: { message: 'User not authenticated' }\r\n        };\r\n      }\r\n\r\n      // Store verification request locally\r\n      const requests = await storageService.getItem<Record<string, any>>(\r\n        'panty_verification_requests',\r\n        {}\r\n      );\r\n\r\n      requests[username] = {\r\n        code: sanitizeStrict(data.code),\r\n        codePhoto: data.codePhoto,\r\n        idFront: data.idFront,\r\n        idBack: data.idBack,\r\n        passport: data.passport,\r\n        submittedAt: new Date().toISOString(),\r\n        status: 'pending'\r\n      };\r\n\r\n      await storageService.setItem('panty_verification_requests', requests);\r\n\r\n      // Update user status\r\n      const users = await storageService.getItem<Record<string, any>>(\r\n        'all_users_v2',\r\n        {}\r\n      );\r\n\r\n      if (users[username]) {\r\n        users[username].verificationStatus = 'pending';\r\n        users[username].verificationRequestedAt = new Date().toISOString();\r\n        users[username].verificationDocs = {\r\n          code: data.code,\r\n          codePhoto: data.codePhoto,\r\n          idFront: data.idFront,\r\n          idBack: data.idBack,\r\n          passport: data.passport\r\n        };\r\n        await storageService.setItem('all_users_v2', users);\r\n      }\r\n\r\n      return { success: true, data: { status: 'pending' } };\r\n    } catch (error) {\r\n      console.error('[VerificationService] Submit verification error:', error);\r\n      return {\r\n        success: false,\r\n        error: { message: error instanceof Error ? error.message : 'Failed to submit verification' }\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get verification status\r\n   */\r\n  async getVerificationStatus(): Promise<ApiResponse<VerificationStatus>> {\r\n    try {\r\n      if (FEATURES.USE_API_USERS) {\r\n        const token = this.getAuthToken();\r\n        if (!token) {\r\n          return {\r\n            success: false,\r\n            error: { message: 'Not authenticated' }\r\n          };\r\n        }\r\n\r\n        const response = await fetch(`${API_BASE_URL}/api/verification/status`, {\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`\r\n          }\r\n        });\r\n\r\n        const data = await response.json();\r\n        \r\n        if (!response.ok) {\r\n          return {\r\n            success: false,\r\n            error: data.error || { message: 'Failed to get verification status' }\r\n          };\r\n        }\r\n\r\n        return { success: true, data: data.data };\r\n      }\r\n\r\n      // LocalStorage fallback\r\n      const username = sessionStorage.getItem('username') || localStorage.getItem('username');\r\n      if (!username) {\r\n        return {\r\n          success: false,\r\n          error: { message: 'User not authenticated' }\r\n        };\r\n      }\r\n\r\n      const users = await storageService.getItem<Record<string, any>>(\r\n        'all_users_v2',\r\n        {}\r\n      );\r\n\r\n      const user = users[username];\r\n      if (!user) {\r\n        return {\r\n          success: true,\r\n          data: { status: 'unverified' }\r\n        };\r\n      }\r\n\r\n      return {\r\n        success: true,\r\n        data: {\r\n          status: user.verificationStatus || 'unverified',\r\n          submittedAt: user.verificationRequestedAt,\r\n          rejectionReason: user.verificationRejectionReason\r\n        }\r\n      };\r\n    } catch (error) {\r\n      console.error('Get verification status error:', error);\r\n      return {\r\n        success: false,\r\n        error: { message: 'Failed to get verification status' }\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get pending verifications (admin only)\r\n   */\r\n  async getPendingVerifications(params?: {\r\n    page?: number;\r\n    limit?: number;\r\n    sort?: 'newest' | 'oldest';\r\n  }): Promise<ApiResponse<{ data: PendingVerification[]; meta: any }>> {\r\n    try {\r\n      if (FEATURES.USE_API_USERS) {\r\n        const queryParams = new URLSearchParams();\r\n        if (params?.page) queryParams.append('page', params.page.toString());\r\n        if (params?.limit) queryParams.append('limit', params.limit.toString());\r\n        if (params?.sort) queryParams.append('sort', params.sort);\r\n\r\n        const token = this.getAuthToken();\r\n        if (!token) {\r\n          return {\r\n            success: false,\r\n            error: { message: 'Not authenticated' }\r\n          };\r\n        }\r\n\r\n        const response = await fetch(\r\n          `${API_BASE_URL}/api/verification/pending?${queryParams.toString()}`,\r\n          {\r\n            headers: {\r\n              'Authorization': `Bearer ${token}`\r\n            }\r\n          }\r\n        );\r\n\r\n        const result = await response.json();\r\n        console.log('[VerificationService] Get pending response:', result);\r\n\r\n        if (!response.ok) {\r\n          return {\r\n            success: false,\r\n            error: result.error || { message: 'Failed to get pending verifications' }\r\n          };\r\n        }\r\n\r\n        // Ensure consistent response structure\r\n        if (result.success && result.data) {\r\n          return { \r\n            success: true, \r\n            data: {\r\n              data: Array.isArray(result.data) ? result.data : [],\r\n              meta: result.meta || {\r\n                page: params?.page || 1,\r\n                pageSize: params?.limit || 20,\r\n                total: Array.isArray(result.data) ? result.data.length : 0,\r\n                totalPages: 1\r\n              }\r\n            }\r\n          };\r\n        }\r\n\r\n        // Handle direct array response\r\n        if (Array.isArray(result)) {\r\n          return {\r\n            success: true,\r\n            data: {\r\n              data: result,\r\n              meta: {\r\n                page: params?.page || 1,\r\n                pageSize: params?.limit || 20,\r\n                total: result.length,\r\n                totalPages: 1\r\n              }\r\n            }\r\n          };\r\n        }\r\n\r\n        return {\r\n          success: true,\r\n          data: { data: [], meta: { page: 1, pageSize: 20, total: 0, totalPages: 0 } }\r\n        };\r\n      }\r\n\r\n      // LocalStorage fallback\r\n      const requests = await storageService.getItem<Record<string, any>>(\r\n        'panty_verification_requests',\r\n        {}\r\n      );\r\n\r\n      const pending = Object.entries(requests)\r\n        .filter(([_, req]) => req.status === 'pending')\r\n        .map(([username, req]) => ({\r\n          _id: `local_${username}`,\r\n          userId: { username, email: '', role: 'seller' },\r\n          status: 'pending',\r\n          documents: {\r\n            codePhoto: req.codePhoto ? { url: req.codePhoto, uploadedAt: req.submittedAt } : undefined,\r\n            idFront: req.idFront ? { url: req.idFront, uploadedAt: req.submittedAt } : undefined,\r\n            idBack: req.idBack ? { url: req.idBack, uploadedAt: req.submittedAt } : undefined,\r\n            passport: req.passport ? { url: req.passport, uploadedAt: req.submittedAt } : undefined\r\n          },\r\n          verificationCode: req.code,\r\n          submittedAt: req.submittedAt\r\n        }));\r\n\r\n      // Sort\r\n      if (params?.sort === 'newest') {\r\n        pending.sort((a, b) => new Date(b.submittedAt).getTime() - new Date(a.submittedAt).getTime());\r\n      } else {\r\n        pending.sort((a, b) => new Date(a.submittedAt).getTime() - new Date(b.submittedAt).getTime());\r\n      }\r\n\r\n      // Paginate\r\n      const page = params?.page || 1;\r\n      const limit = params?.limit || 20;\r\n      const start = (page - 1) * limit;\r\n      const paginatedData = pending.slice(start, start + limit);\r\n\r\n      return {\r\n        success: true,\r\n        data: {\r\n          data: paginatedData,\r\n          meta: {\r\n            page,\r\n            pageSize: limit,\r\n            total: pending.length,\r\n            totalPages: Math.ceil(pending.length / limit)\r\n          }\r\n        }\r\n      };\r\n    } catch (error) {\r\n      console.error('Get pending verifications error:', error);\r\n      return {\r\n        success: false,\r\n        error: { message: 'Failed to get pending verifications' }\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Review verification (admin only)\r\n   */\r\n  async reviewVerification(\r\n    verificationId: string,\r\n    action: 'approve' | 'reject',\r\n    rejectionReason?: string\r\n  ): Promise<ApiResponse<any>> {\r\n    try {\r\n      if (FEATURES.USE_API_USERS) {\r\n        return await this.apiCall<any>(\r\n          `${API_BASE_URL}/api/verification/${verificationId}/review`,\r\n          {\r\n            method: 'PATCH',\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({\r\n              action,\r\n              rejectionReason: rejectionReason ? sanitizeStrict(rejectionReason) : undefined\r\n            })\r\n          }\r\n        );\r\n      }\r\n\r\n      // LocalStorage fallback\r\n      if (verificationId.startsWith('local_')) {\r\n        const username = verificationId.replace('local_', '');\r\n        \r\n        // Update verification request\r\n        const requests = await storageService.getItem<Record<string, any>>(\r\n          'panty_verification_requests',\r\n          {}\r\n        );\r\n\r\n        if (requests[username]) {\r\n          requests[username].status = action === 'approve' ? 'approved' : 'rejected';\r\n          requests[username].reviewedAt = new Date().toISOString();\r\n          if (action === 'reject' && rejectionReason) {\r\n            requests[username].rejectionReason = sanitizeStrict(rejectionReason);\r\n          }\r\n          await storageService.setItem('panty_verification_requests', requests);\r\n        }\r\n\r\n        // Update user\r\n        const users = await storageService.getItem<Record<string, any>>(\r\n          'all_users_v2',\r\n          {}\r\n        );\r\n\r\n        if (users[username]) {\r\n          if (action === 'approve') {\r\n            users[username].isVerified = true;\r\n            users[username].verificationStatus = 'verified';\r\n          } else {\r\n            users[username].verificationStatus = 'rejected';\r\n            users[username].verificationRejectionReason = rejectionReason;\r\n          }\r\n          await storageService.setItem('all_users_v2', users);\r\n        }\r\n\r\n        // Add to resolved verifications\r\n        const resolved = await storageService.getItem<any[]>(\r\n          'panty_resolved_verifications',\r\n          []\r\n        );\r\n\r\n        resolved.push({\r\n          id: verificationId,\r\n          username,\r\n          requestDate: requests[username]?.submittedAt || new Date().toISOString(),\r\n          resolvedDate: new Date().toISOString(),\r\n          resolvedBy: sessionStorage.getItem('username') || localStorage.getItem('username') || 'admin',\r\n          status: action === 'approve' ? 'approved' : 'rejected',\r\n          rejectionReason\r\n        });\r\n\r\n        await storageService.setItem('panty_resolved_verifications', resolved);\r\n\r\n        return { success: true, data: { status: action } };\r\n      }\r\n\r\n      return {\r\n        success: false,\r\n        error: { message: 'Invalid verification ID' }\r\n      };\r\n    } catch (error) {\r\n      console.error('Review verification error:', error);\r\n      return {\r\n        success: false,\r\n        error: { message: 'Failed to review verification' }\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get verification statistics (admin only)\r\n   */\r\n  async getVerificationStats(): Promise<ApiResponse<VerificationStats>> {\r\n    try {\r\n      if (FEATURES.USE_API_USERS) {\r\n        return await this.apiCall<VerificationStats>(`${API_BASE_URL}/api/verification/stats`);\r\n      }\r\n\r\n      // LocalStorage fallback\r\n      const requests = await storageService.getItem<Record<string, any>>(\r\n        'panty_verification_requests',\r\n        {}\r\n      );\r\n\r\n      const now = new Date();\r\n      const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());\r\n      const weekAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);\r\n\r\n      const pending = Object.values(requests).filter(req => req.status === 'pending');\r\n      \r\n      const todayCount = pending.filter(req => \r\n        new Date(req.submittedAt) >= today\r\n      ).length;\r\n\r\n      const weekCount = pending.filter(req => \r\n        new Date(req.submittedAt) >= weekAgo\r\n      ).length;\r\n\r\n      // Calculate average processing time from resolved\r\n      const resolved = await storageService.getItem<any[]>(\r\n        'panty_resolved_verifications',\r\n        []\r\n      );\r\n\r\n      let avgTime = 0;\r\n      if (resolved.length > 0) {\r\n        const times = resolved\r\n          .filter(r => r.requestDate && r.resolvedDate)\r\n          .map(r => {\r\n            const start = new Date(r.requestDate).getTime();\r\n            const end = new Date(r.resolvedDate).getTime();\r\n            return (end - start) / (1000 * 60 * 60); // hours\r\n          });\r\n        \r\n        if (times.length > 0) {\r\n          avgTime = times.reduce((a, b) => a + b, 0) / times.length;\r\n        }\r\n      }\r\n\r\n      return {\r\n        success: true,\r\n        data: {\r\n          total: pending.length,\r\n          today: todayCount,\r\n          thisWeek: weekCount,\r\n          averageProcessingTime: avgTime\r\n        }\r\n      };\r\n    } catch (error) {\r\n      console.error('Get verification stats error:', error);\r\n      return {\r\n        success: false,\r\n        error: { message: 'Failed to get verification statistics' }\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Helper: Convert base64 to File\r\n   */\r\n  private base64ToFile(base64: string, filename: string): File {\r\n    const arr = base64.split(',');\r\n    const mime = arr[0].match(/:(.*?);/)?.[1] || 'image/jpeg';\r\n    const bstr = atob(arr[1]);\r\n    let n = bstr.length;\r\n    const u8arr = new Uint8Array(n);\r\n    \r\n    while (n--) {\r\n      u8arr[n] = bstr.charCodeAt(n);\r\n    }\r\n    \r\n    return new File([u8arr], filename, { type: mime });\r\n  }\r\n}\r\n\r\nexport const verificationService = new VerificationService();"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2455, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/gerom/OneDrive/Documents/pantypost/src/app/admin/verification-requests/page.tsx"],"sourcesContent":["// src/app/admin/verification-requests/page.tsx\r\n'use client';\r\n\r\nimport { useEffect, useState, useCallback } from 'react';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { useRouter } from 'next/navigation';\r\nimport RequireAuth from '@/components/RequireAuth';\r\nimport VerificationHeader from '@/components/admin/verification/VerificationHeader';\r\nimport VerificationSearch from '@/components/admin/verification/VerificationSearch';\r\nimport VerificationStats from '@/components/admin/verification/VerificationStats';\r\nimport VerificationList from '@/components/admin/verification/VerificationList';\r\nimport ReviewModal from '@/components/admin/verification/ReviewModal';\r\nimport ImageViewer from '@/components/admin/verification/ImageViewer';\r\nimport { verificationService } from '@/services/verification.service';\r\nimport type { PendingVerification, VerificationStats as StatsType } from '@/services/verification.service';\r\nimport type { VerificationUser, SortOption, ImageViewData } from '@/types/verification';\r\nimport { sanitizeStrict } from '@/utils/security/sanitization';\r\nimport { Shield, AlertCircle, Loader2 } from 'lucide-react';\r\nimport { FEATURES } from '@/services/api.config';\r\n\r\n// Get backend URL from environment\r\nconst BACKEND_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';\r\n\r\n// Helper to convert relative URL to absolute backend URL\r\nconst toAbsoluteUrl = (url?: string): string | undefined => {\r\n  if (!url) return undefined;\r\n  \r\n  // If it's already an absolute URL or data URL, return as is\r\n  if (url.startsWith('http://') || url.startsWith('https://') || url.startsWith('data:')) {\r\n    return url;\r\n  }\r\n  \r\n  // If it starts with /, remove it to avoid double slashes\r\n  const path = url.startsWith('/') ? url : `/${url}`;\r\n  return `${BACKEND_URL}${path}`;\r\n};\r\n\r\n// Convert PendingVerification to VerificationUser format for components\r\nconst convertToVerificationUser = (pv: PendingVerification): VerificationUser => {\r\n  return {\r\n    username: pv.userId?.username || 'Unknown',\r\n    verificationStatus: 'pending', // Always pending from this endpoint\r\n    verificationRequestedAt: pv.submittedAt,\r\n    verificationDocs: {\r\n      code: pv.verificationCode,\r\n      codePhoto: toAbsoluteUrl(pv.documents?.codePhoto?.url),\r\n      idFront: toAbsoluteUrl(pv.documents?.idFront?.url),\r\n      idBack: toAbsoluteUrl(pv.documents?.idBack?.url),\r\n      passport: toAbsoluteUrl(pv.documents?.passport?.url)\r\n    }\r\n  };\r\n};\r\n\r\nexport default function AdminVerificationRequestsPage() {\r\n  const { user, isAuthReady } = useAuth();\r\n  const router = useRouter();\r\n  \r\n  // State\r\n  const [pending, setPending] = useState<VerificationUser[]>([]);\r\n  const [pendingMap, setPendingMap] = useState<Map<string, string>>(new Map()); // username -> verification ID\r\n  const [selected, setSelected] = useState<VerificationUser | null>(null);\r\n  const [searchTerm, setSearchTerm] = useState<string>('');\r\n  const [sortBy, setSortBy] = useState<SortOption>('oldest');\r\n  const [stats, setStats] = useState<StatsType>({\r\n    total: 0,\r\n    today: 0,\r\n    thisWeek: 0,\r\n    averageProcessingTime: 0\r\n  });\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [imageViewer, setImageViewer] = useState<ImageViewData | null>(null);\r\n  const [imageLoading, setImageLoading] = useState(false);\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n\r\n  // Load verifications and stats\r\n  const loadData = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n\r\n      // Load pending verifications\r\n      const verResult = await verificationService.getPendingVerifications({\r\n        sort: sortBy === 'alphabetical' ? 'oldest' : sortBy,\r\n        limit: 100 // Get more for client-side filtering\r\n      });\r\n\r\n      console.log('[Admin] Verification result:', verResult);\r\n\r\n      if (verResult.success && verResult.data) {\r\n        const idMap = new Map<string, string>();\r\n        \r\n        // Handle different response structures\r\n        let verifications: PendingVerification[] = [];\r\n        \r\n        // Check if data.data exists (paginated response)\r\n        if (Array.isArray(verResult.data.data)) {\r\n          verifications = verResult.data.data;\r\n        } \r\n        // Check if data itself is an array (direct response)\r\n        else if (Array.isArray(verResult.data)) {\r\n          verifications = verResult.data as any;\r\n        }\r\n        // Handle unexpected structure\r\n        else {\r\n          console.warn('[Admin] Unexpected verification data structure:', verResult.data);\r\n          verifications = [];\r\n        }\r\n\r\n        const converted = verifications.map(pv => {\r\n          const user = convertToVerificationUser(pv);\r\n          // Store the verification ID mapping\r\n          idMap.set(user.username, pv._id);\r\n          return user;\r\n        });\r\n        \r\n        // Apply alphabetical sort if needed\r\n        if (sortBy === 'alphabetical') {\r\n          converted.sort((a, b) => a.username.localeCompare(b.username));\r\n        }\r\n        \r\n        setPending(converted);\r\n        setPendingMap(idMap);\r\n      } else {\r\n        console.error('[Admin] Failed to load verifications:', verResult.error);\r\n        // Don't set error for empty results\r\n        if (verResult.error?.message && verResult.error.message !== 'No pending verifications') {\r\n          setError(verResult.error.message);\r\n        }\r\n      }\r\n\r\n      // Load stats\r\n      const statsResult = await verificationService.getVerificationStats();\r\n      if (statsResult.success && statsResult.data) {\r\n        setStats(statsResult.data);\r\n      }\r\n    } catch (err) {\r\n      console.error('Error loading verification data:', err);\r\n      setError('Failed to load verification data');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [sortBy]);\r\n\r\n  // Initial load and auth check\r\n  useEffect(() => {\r\n    if (!isAuthReady) return;\r\n    \r\n    if (!user) {\r\n      router.push('/login');\r\n      return;\r\n    }\r\n    \r\n    if (user.role !== 'admin') {\r\n      router.push('/');\r\n      return;\r\n    }\r\n\r\n    loadData();\r\n  }, [isAuthReady, user, router, loadData]);\r\n\r\n  // Handle search\r\n  const handleSearchTermChange = (term: string) => {\r\n    const sanitized = sanitizeStrict(term);\r\n    setSearchTerm(sanitized);\r\n  };\r\n\r\n  // Filter users based on search\r\n  const filteredUsers = pending.filter((u) =>\r\n    u.username.toLowerCase().includes(searchTerm.toLowerCase())\r\n  );\r\n\r\n  // Calculate filtered stats\r\n  const filteredStats: StatsType = {\r\n    ...stats,\r\n    total: filteredUsers.length\r\n  };\r\n\r\n  // Time ago helper\r\n  const getTimeAgo = (timestamp?: string): string => {\r\n    if (!timestamp) return 'Unknown';\r\n\r\n    const date = new Date(timestamp);\r\n    const now = new Date();\r\n    const seconds = Math.floor((now.getTime() - date.getTime()) / 1000);\r\n\r\n    if (seconds < 60) return 'just now';\r\n    if (seconds < 3600) return `${Math.floor(seconds / 60)}m ago`;\r\n    if (seconds < 86400) return `${Math.floor(seconds / 3600)}h ago`;\r\n    if (seconds < 604800) return `${Math.floor(seconds / 86400)}d ago`;\r\n    return `${Math.floor(seconds / 604800)}w ago`;\r\n  };\r\n\r\n  // Handle approval\r\n  const handleApprove = async (username: string): Promise<void> => {\r\n    if (isProcessing) return;\r\n    \r\n    try {\r\n      setIsProcessing(true);\r\n      console.log('[Admin] Approving verification for:', username);\r\n      \r\n      // Find the verification ID from our map\r\n      const verificationId = pendingMap.get(username);\r\n      if (!verificationId) {\r\n        throw new Error('Verification ID not found');\r\n      }\r\n\r\n      // Call backend API\r\n      const result = await verificationService.reviewVerification(\r\n        verificationId,\r\n        'approve'\r\n      );\r\n\r\n      if (result.success) {\r\n        console.log('[Admin] Verification approved successfully');\r\n        \r\n        // Remove from pending list\r\n        setPending(prev => prev.filter(p => p.username !== username));\r\n        setSelected(null);\r\n        \r\n        // Reload data to refresh stats\r\n        loadData();\r\n      } else {\r\n        throw new Error(result.error?.message || 'Failed to approve verification');\r\n      }\r\n    } catch (err) {\r\n      console.error('[Admin] Error approving verification:', err);\r\n      alert(`Error: ${err instanceof Error ? err.message : 'Failed to approve verification'}`);\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  };\r\n\r\n  // Handle rejection\r\n  const handleReject = async (username: string, reason: string): Promise<void> => {\r\n    if (isProcessing) return;\r\n    \r\n    try {\r\n      setIsProcessing(true);\r\n      console.log('[Admin] Rejecting verification for:', username);\r\n      \r\n      // Find the verification ID from our map\r\n      const verificationId = pendingMap.get(username);\r\n      if (!verificationId) {\r\n        throw new Error('Verification ID not found');\r\n      }\r\n\r\n      // Call backend API\r\n      const result = await verificationService.reviewVerification(\r\n        verificationId,\r\n        'reject',\r\n        reason\r\n      );\r\n\r\n      if (result.success) {\r\n        console.log('[Admin] Verification rejected successfully');\r\n        \r\n        // Remove from pending list\r\n        setPending(prev => prev.filter(p => p.username !== username));\r\n        setSelected(null);\r\n        \r\n        // Reload data to refresh stats\r\n        loadData();\r\n      } else {\r\n        throw new Error(result.error?.message || 'Failed to reject verification');\r\n      }\r\n    } catch (err) {\r\n      console.error('[Admin] Error rejecting verification:', err);\r\n      alert(`Error: ${err instanceof Error ? err.message : 'Failed to reject verification'}`);\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  };\r\n\r\n  // Refresh data\r\n  const refreshData = () => {\r\n    loadData();\r\n  };\r\n\r\n  // Handle image viewer\r\n  const handleImageView = (imageData: ImageViewData) => {\r\n    setImageViewer(imageData);\r\n    setImageLoading(true);\r\n  };\r\n\r\n  const handleImageLoad = () => {\r\n    setImageLoading(false);\r\n  };\r\n\r\n  const handleImageClose = () => {\r\n    setImageViewer(null);\r\n    setImageLoading(false);\r\n  };\r\n\r\n  // Loading state\r\n  if (!isAuthReady || loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-b from-black to-[#0a0a0a] text-white flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <Loader2 className=\"w-8 h-8 animate-spin mx-auto mb-4 text-[#ff950e]\" />\r\n          <p className=\"text-gray-400\">Loading verification requests...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Error state\r\n  if (error) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-b from-black to-[#0a0a0a] text-white flex items-center justify-center\">\r\n        <div className=\"text-center max-w-md\">\r\n          <AlertCircle className=\"w-12 h-12 text-red-500 mx-auto mb-4\" />\r\n          <h2 className=\"text-xl font-bold mb-2\">Error Loading Verifications</h2>\r\n          <p className=\"text-gray-400 mb-4\">{error}</p>\r\n          <button\r\n            onClick={refreshData}\r\n            className=\"px-4 py-2 bg-[#ff950e] text-black font-bold rounded-lg hover:bg-[#e88800] transition\"\r\n          >\r\n            Retry\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <RequireAuth role=\"admin\">\r\n      <div className=\"min-h-screen bg-gradient-to-b from-black to-[#0a0a0a] text-white\">\r\n        <VerificationHeader onRefresh={refreshData} />\r\n\r\n        <VerificationSearch\r\n          searchTerm={searchTerm}\r\n          onSearchChange={handleSearchTermChange}\r\n          sortBy={sortBy}\r\n          onSortChange={setSortBy}\r\n          pendingCount={filteredUsers.length}\r\n        />\r\n\r\n        <VerificationStats stats={filteredStats} />\r\n\r\n        {filteredUsers.length === 0 ? (\r\n          <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\r\n            <div className=\"bg-[#121212] rounded-xl border border-gray-800 p-12 text-center\">\r\n              <Shield className=\"w-16 h-16 text-gray-600 mx-auto mb-4\" />\r\n              <h3 className=\"text-xl font-bold mb-2\">No Pending Verifications</h3>\r\n              <p className=\"text-gray-400\">\r\n                {searchTerm \r\n                  ? `No verification requests found matching \"${searchTerm}\"`\r\n                  : 'There are no verification requests awaiting review'}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <VerificationList\r\n            users={filteredUsers}\r\n            searchTerm={searchTerm}\r\n            onSelectUser={setSelected}\r\n          />\r\n        )}\r\n\r\n        {selected && (\r\n          <ReviewModal\r\n            user={selected}\r\n            onClose={() => setSelected(null)}\r\n            onApprove={handleApprove}\r\n            onReject={handleReject}\r\n            getTimeAgo={getTimeAgo}\r\n          />\r\n        )}\r\n\r\n        {imageViewer && (\r\n          <ImageViewer\r\n            imageData={imageViewer}\r\n            isLoading={imageLoading}\r\n            onClose={handleImageClose}\r\n            onLoad={handleImageLoad}\r\n          />\r\n        )}\r\n\r\n        {/* Processing overlay */}\r\n        {isProcessing && (\r\n          <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center\">\r\n            <div className=\"bg-[#121212] rounded-xl border border-gray-800 p-6\">\r\n              <Loader2 className=\"w-8 h-8 animate-spin mx-auto mb-4 text-[#ff950e]\" />\r\n              <p className=\"text-gray-400\">Processing verification...</p>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </RequireAuth>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}